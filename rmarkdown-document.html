<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南</title>
  <meta name="description" content="第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南" />
  <meta name="github-repo" content="cosname/rmarkdown-guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南" />
  
  <meta name="twitter:description" content="第 3 章 使用 R Markdown 创建常用文档 | R Markdown 指南" />
  

<meta name="author" content="王祎帆" />
<meta name="author" content="闫求识" />
<meta name="author" content="高春辉" />
<meta name="author" content="庄亮亮" />


<meta name="date" content="2022-02-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rmarkdown-base.html"/>
<link rel="next" href="rmarkdown-working.html"/>
<script src="libs/header-attrs/header-attrs.js"></script>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<script src="libs/kePrint/kePrint.js"></script>
<link href="libs/lightable/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Markdown 中文指南</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a></li>
<li class="part"><span><b>I 初识 R Markdown</b></span></li>
<li class="chapter" data-level="1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html"><i class="fa fa-check"></i><b>1</b> R Markdown概述</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#rmarkdown-source"><i class="fa fa-check"></i><b>1.1</b> R Markdown 的渊源</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#knitr-sweave"><i class="fa fa-check"></i><b>1.1.1</b> knitr 和 Sweave</a></li>
<li class="chapter" data-level="1.1.2" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#mark-pandoc"><i class="fa fa-check"></i><b>1.1.2</b> 标记语言和 Pandoc 转换器</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#rmarkdown-example"><i class="fa fa-check"></i><b>1.2</b> 以案例形式初识 R Markdown</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-report"><i class="fa fa-check"></i><b>1.2.1</b> 数据分析报告</a></li>
<li class="chapter" data-level="1.2.2" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-note"><i class="fa fa-check"></i><b>1.2.2</b> 交互笔记本</a></li>
<li class="chapter" data-level="1.2.3" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-report"><i class="fa fa-check"></i><b>1.2.3</b> 个人简历</a></li>
<li class="chapter" data-level="1.2.4" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-resume"><i class="fa fa-check"></i><b>1.2.4</b> 网站</a></li>
<li class="chapter" data-level="1.2.5" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-ppt"><i class="fa fa-check"></i><b>1.2.5</b> 幻灯片</a></li>
<li class="chapter" data-level="1.2.6" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-forms"><i class="fa fa-check"></i><b>1.2.6</b> 交互报表</a></li>
<li class="chapter" data-level="1.2.7" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-dynamic"><i class="fa fa-check"></i><b>1.2.7</b> 动态文档</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html"><i class="fa fa-check"></i><b>2</b> R Markdown 的基础知识</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rstudio-config"><i class="fa fa-check"></i><b>2.1</b> R Studio 相关的配置</a></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-install"><i class="fa fa-check"></i><b>2.2</b> R Markdown 的安装</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-rmd"><i class="fa fa-check"></i><b>2.2.1</b> 安装 R Markdown</a></li>
<li class="chapter" data-level="2.2.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-tinytex"><i class="fa fa-check"></i><b>2.2.2</b> 安装 Tinytex</a></li>
<li class="chapter" data-level="2.2.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#安装-git-install-git"><i class="fa fa-check"></i><b>2.2.3</b> 安装 Git（*） {#install-git}</a></li>
<li class="chapter" data-level="2.2.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-graph"><i class="fa fa-check"></i><b>2.2.4</b> 安装 RStudio 图形化编辑器</a></li>
<li class="chapter" data-level="2.2.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#create-rmd"><i class="fa fa-check"></i><b>2.2.5</b> 创建第一个 R Markdown 文档</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-compile"><i class="fa fa-check"></i><b>2.3</b> R Markdown 的编译过程</a></li>
<li class="chapter" data-level="2.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-element"><i class="fa fa-check"></i><b>2.4</b> R Markdown 的基本元素</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#yaml"><i class="fa fa-check"></i><b>2.4.1</b> YAML 头部</a></li>
<li class="chapter" data-level="2.4.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#markdown"><i class="fa fa-check"></i><b>2.4.2</b> Markdown 语法</a></li>
<li class="chapter" data-level="2.4.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#block-inline"><i class="fa fa-check"></i><b>2.4.3</b> 代码区块和行内代码</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#page-layout"><i class="fa fa-check"></i><b>2.5</b> 页面设置和布局</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#output-width"><i class="fa fa-check"></i><b>2.5.1</b> 控制输出宽度</a></li>
<li class="chapter" data-level="2.5.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#line-break"><i class="fa fa-check"></i><b>2.5.2</b> 换行符号</a></li>
<li class="chapter" data-level="2.5.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#page-break"><i class="fa fa-check"></i><b>2.5.3</b> 分页符和分割线</a></li>
<li class="chapter" data-level="2.5.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#catalog"><i class="fa fa-check"></i><b>2.5.4</b> 目录</a></li>
<li class="chapter" data-level="2.5.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#chapter-number"><i class="fa fa-check"></i><b>2.5.5</b> 章节编号</a></li>
<li class="chapter" data-level="2.5.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#plottable-index"><i class="fa fa-check"></i><b>2.5.6</b> 图表的索引</a></li>
<li class="chapter" data-level="2.5.7" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#reference-index"><i class="fa fa-check"></i><b>2.5.7</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#document-element"><i class="fa fa-check"></i><b>2.6</b> R Markdown 的文档元素</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-plot"><i class="fa fa-check"></i><b>2.6.1</b> 图片</a></li>
<li class="chapter" data-level="2.6.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-table"><i class="fa fa-check"></i><b>2.6.2</b> 表格</a></li>
<li class="chapter" data-level="2.6.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-equation"><i class="fa fa-check"></i><b>2.6.3</b> 公式</a></li>
<li class="chapter" data-level="2.6.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-quote"><i class="fa fa-check"></i><b>2.6.4</b> 引用</a></li>
<li class="chapter" data-level="2.6.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-textcol"><i class="fa fa-check"></i><b>2.6.5</b> 字体颜色</a></li>
<li class="chapter" data-level="2.6.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-dynamic"><i class="fa fa-check"></i><b>2.6.6</b> 动态交互元件</a></li>
<li class="chapter" data-level="2.6.7" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-video"><i class="fa fa-check"></i><b>2.6.7</b> 音频和视频</a></li>
<li class="chapter" data-level="2.6.8" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-flow"><i class="fa fa-check"></i><b>2.6.8</b> 流程图</a></li>
<li class="chapter" data-level="2.6.9" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-gantt"><i class="fa fa-check"></i><b>2.6.9</b> 甘特图</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II 基于R Markdown的应用</b></span></li>
<li class="chapter" data-level="3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html"><i class="fa fa-check"></i><b>3</b> 使用 R Markdown 创建常用文档</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-html"><i class="fa fa-check"></i><b>3.1</b> HTML 文档</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-title"><i class="fa fa-check"></i><b>3.1.1</b> 目录和标题</a></li>
<li class="chapter" data-level="3.1.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-theme"><i class="fa fa-check"></i><b>3.1.2</b> 主题和样式</a></li>
<li class="chapter" data-level="3.1.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-pic"><i class="fa fa-check"></i><b>3.1.3</b> 图片和数据框</a></li>
<li class="chapter" data-level="3.1.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-module"><i class="fa fa-check"></i><b>3.1.4</b> 组件和内容</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-pdf"><i class="fa fa-check"></i><b>3.2</b> PDF 文档</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-rmd"><i class="fa fa-check"></i><b>3.2.1</b> 从 R Markdown 到 PDF 文档</a></li>
<li class="chapter" data-level="3.2.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-chinese"><i class="fa fa-check"></i><b>3.2.2</b> 在 PDF 文档中使用中文的注意事项</a></li>
<li class="chapter" data-level="3.2.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-general-setting"><i class="fa fa-check"></i><b>3.2.3</b> 与 HTML 文档中相通的一些设置</a></li>
<li class="chapter" data-level="3.2.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex"><i class="fa fa-check"></i><b>3.2.4</b> LaTeX 选项</a></li>
<li class="chapter" data-level="3.2.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex-citation"><i class="fa fa-check"></i><b>3.2.5</b> 使用 LaTeX 包处理参考文献</a></li>
<li class="chapter" data-level="3.2.6" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex-engine"><i class="fa fa-check"></i><b>3.2.6</b> LaTeX 的渲染引擎</a></li>
<li class="chapter" data-level="3.2.7" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-keep-tex"><i class="fa fa-check"></i><b>3.2.7</b> 保留生成的 TeX 中间文件</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-ppt"><i class="fa fa-check"></i><b>3.3</b> PPT 幻灯片</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#ioslides-presentation"><i class="fa fa-check"></i><b>3.3.1</b> ioslides 幻灯片</a></li>
<li class="chapter" data-level="3.3.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#slidy-presentation"><i class="fa fa-check"></i><b>3.3.2</b> Slidy 幻灯片</a></li>
<li class="chapter" data-level="3.3.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#beamer-presentation"><i class="fa fa-check"></i><b>3.3.3</b> Beamer 幻灯片</a></li>
<li class="chapter" data-level="3.3.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#powerpoint-presentation"><i class="fa fa-check"></i><b>3.3.4</b> PowerPoint 幻灯片</a></li>
<li class="chapter" data-level="3.3.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#ppt-xaringan"><i class="fa fa-check"></i><b>3.3.5</b> Xaringan 幻灯片</a></li>
<li class="chapter" data-level="3.3.6" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#xaringan-extension"><i class="fa fa-check"></i><b>3.3.6</b> Xaringan 幻灯片的扩展包</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-word"><i class="fa fa-check"></i><b>3.4</b> Word 文档</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-template"><i class="fa fa-check"></i><b>3.4.1</b> 创建 word 模板</a></li>
<li class="chapter" data-level="3.4.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-custom-template"><i class="fa fa-check"></i><b>3.4.2</b> 自定义 Word 模板</a></li>
<li class="chapter" data-level="3.4.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-rmd"><i class="fa fa-check"></i><b>3.4.3</b> R Markdown 和 Word 之间的双向工作流程</a></li>
<li class="chapter" data-level="3.4.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-style"><i class="fa fa-check"></i><b>3.4.4</b> 个人风格元素</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-new"><i class="fa fa-check"></i><b>3.5</b> 创建新的文档格式</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-existing"><i class="fa fa-check"></i><b>3.5.1</b> 从现有文档格式衍生新格式</a></li>
<li class="chapter" data-level="3.5.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-new"><i class="fa fa-check"></i><b>3.5.2</b> 完全的自定义输出格式</a></li>
<li class="chapter" data-level="3.5.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-using"><i class="fa fa-check"></i><b>3.5.3</b> 使用新的文档输出格式</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html"><i class="fa fa-check"></i><b>4</b> 基于 R Markdown 工作与学习</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-email"><i class="fa fa-check"></i><b>4.1</b> 发邮件：blastula</a></li>
<li class="chapter" data-level="4.2" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-package"><i class="fa fa-check"></i><b>4.2</b> 制作 R 包：fusen</a></li>
<li class="chapter" data-level="4.3" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-cv"><i class="fa fa-check"></i><b>4.3</b> 制作简历：datadrivencv</a></li>
<li class="chapter" data-level="4.4" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-bookdown"><i class="fa fa-check"></i><b>4.4</b> 写书和记学习笔记：bookdown</a></li>
<li class="chapter" data-level="4.5" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-blogdown"><i class="fa fa-check"></i><b>4.5</b> 制作网站：blogdown</a></li>
<li class="chapter" data-level="4.6" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-paper"><i class="fa fa-check"></i><b>4.6</b> 制作科技论文的支撑材料</a></li>
</ul></li>
<li class="part"><span><b>III R Markdown进阶操作</b></span></li>
<li class="chapter" data-level="5" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html"><i class="fa fa-check"></i><b>5</b> 使用 R Markdown 创建动态交互文档</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmarkdown-shiny"><i class="fa fa-check"></i><b>5.1</b> Web交互界面：Shiny小程序</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-intro"><i class="fa fa-check"></i><b>5.1.1</b> Shiny 入门指南</a></li>
<li class="chapter" data-level="5.1.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-deploy"><i class="fa fa-check"></i><b>5.1.2</b> Shiny 的部署</a></li>
<li class="chapter" data-level="5.1.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-app"><i class="fa fa-check"></i><b>5.1.3</b> 嵌入 Shiny 应用程序</a></li>
<li class="chapter" data-level="5.1.4" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-widget"><i class="fa fa-check"></i><b>5.1.4</b> Shiny 小部件</a></li>
<li class="chapter" data-level="5.1.5" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-link"><i class="fa fa-check"></i><b>5.1.5</b> Shiny 文档间的链接</a></li>
<li class="chapter" data-level="5.1.6" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-render"><i class="fa fa-check"></i><b>5.1.6</b> Shiny 文档的渲染</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmarkdown-dashboards"><i class="fa fa-check"></i><b>5.2</b> 交互式仪表盘：Dashboards</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-intro"><i class="fa fa-check"></i><b>5.2.1</b> Dashboards 入门</a></li>
<li class="chapter" data-level="5.2.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-layout"><i class="fa fa-check"></i><b>5.2.2</b> Dashboards 排版</a></li>
<li class="chapter" data-level="5.2.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-module"><i class="fa fa-check"></i><b>5.2.3</b> Dashboards 组件</a></li>
<li class="chapter" data-level="5.2.4" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-shiny"><i class="fa fa-check"></i><b>5.2.4</b> Dashboards 与 Shiny</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#package-rmd"><i class="fa fa-check"></i><b>5.3</b> 在 R package 中使用 R Markdown</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmd-vignettes"><i class="fa fa-check"></i><b>5.3.1</b> 写软件包的文档</a></li>
<li class="chapter" data-level="5.3.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmd-auto"><i class="fa fa-check"></i><b>5.3.2</b> 定义一个自动化报告函数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html"><i class="fa fa-check"></i><b>6</b> R Markdown 的操作技巧</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#table-advanced"><i class="fa fa-check"></i><b>6.1</b> 表格操作进阶</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#table-complex"><i class="fa fa-check"></i><b>6.1.1</b> 利用函数 <code>knitr::kable()</code> 生成复杂的表格</a></li>
<li class="chapter" data-level="6.1.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#kable-extra"><i class="fa fa-check"></i><b>6.1.2</b> 利用 <strong>kableExtra</strong> 美化表格</a></li>
<li class="chapter" data-level="6.1.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#else-table"><i class="fa fa-check"></i><b>6.1.3</b> 其它生成表格的包及功能介绍</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-options"><i class="fa fa-check"></i><b>6.2</b> 块选项</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-variable"><i class="fa fa-check"></i><b>6.2.1</b> 在块选项中使用变量</a></li>
<li class="chapter" data-level="6.2.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-error"><i class="fa fa-check"></i><b>6.2.2</b> 如何在遇到 error 的时候继续编译</a></li>
<li class="chapter" data-level="6.2.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-cache"><i class="fa fa-check"></i><b>6.2.3</b> 缓存代码块</a></li>
<li class="chapter" data-level="6.2.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-asis"><i class="fa fa-check"></i><b>6.2.4</b> 通过 asis 引擎有条件地执行内容</a></li>
<li class="chapter" data-level="6.2.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-shell"><i class="fa fa-check"></i><b>6.2.5</b> 执行 Shell 脚本</a></li>
<li class="chapter" data-level="6.2.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-output"><i class="fa fa-check"></i><b>6.2.6</b> 控制输出</a></li>
<li class="chapter" data-level="6.2.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-reformat"><i class="fa fa-check"></i><b>6.2.7</b> 重新格式化源代码</a></li>
<li class="chapter" data-level="6.2.8" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-leading"><i class="fa fa-check"></i><b>6.2.8</b> 删除文本输出中的前导符号</a></li>
<li class="chapter" data-level="6.2.9" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#为文本输出块添加属性-chunk-property"><i class="fa fa-check"></i><b>6.2.9</b> 为文本输出块添加属性 (*) {#chunk-property}</a></li>
<li class="chapter" data-level="6.2.10" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-multiplot"><i class="fa fa-check"></i><b>6.2.10</b> 同一张图的多种图像输出格式</a></li>
<li class="chapter" data-level="6.2.11" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#图像的后期加工-chunk-process"><i class="fa fa-check"></i><b>6.2.11</b> 图像的后期加工 (*) {#chunk-process}</a></li>
<li class="chapter" data-level="6.2.12" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#输出高质量的图像-chunk-highquality"><i class="fa fa-check"></i><b>6.2.12</b> 输出高质量的图像 (*) {#chunk-highquality}</a></li>
<li class="chapter" data-level="6.2.13" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#带有低级绘图功能的逐步绘图-chunk-step-plot"><i class="fa fa-check"></i><b>6.2.13</b> 带有低级绘图功能的逐步绘图 (*) {#chunk-step-plot}</a></li>
<li class="chapter" data-level="6.2.14" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#在代码块中自定义对象的打印格式-chunk-print"><i class="fa fa-check"></i><b>6.2.14</b> 在代码块中自定义对象的打印格式 (*) {#chunk-print}</a></li>
<li class="chapter" data-level="6.2.15" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#选项钩子-option-hook"><i class="fa fa-check"></i><b>6.2.15</b> 选项钩子 (*) {#option-hook}</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#other-language"><i class="fa fa-check"></i><b>6.3</b> 与其他语言的结合</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#注册自定义语言引擎-register-language"><i class="fa fa-check"></i><b>6.3.1</b> 注册自定义语言引擎 (*) {#register-language}</a></li>
<li class="chapter" data-level="6.3.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#python-rmd"><i class="fa fa-check"></i><b>6.3.2</b> 运行 Python 代码并与 Python 交互</a></li>
<li class="chapter" data-level="6.3.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cat-file"><i class="fa fa-check"></i><b>6.3.3</b> 通过 cat 引擎将块内容写入文件</a></li>
<li class="chapter" data-level="6.3.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#sas-rmd"><i class="fa fa-check"></i><b>6.3.4</b> 运行 SAS 代码</a></li>
<li class="chapter" data-level="6.3.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#stata-rmd"><i class="fa fa-check"></i><b>6.3.5</b> 运行 Stata 代码</a></li>
<li class="chapter" data-level="6.3.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#asymptote-plot"><i class="fa fa-check"></i><b>6.3.6</b> 用渐近线 Asymptote 创建图形</a></li>
<li class="chapter" data-level="6.3.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#sass-scss"><i class="fa fa-check"></i><b>6.3.7</b> 使用 Sass/SCSS 构建 HTML 页面</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#输出钩子-output-hook"><i class="fa fa-check"></i><b>6.4</b> 输出钩子 (*) {#output-hook}</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#edit-source"><i class="fa fa-check"></i><b>6.4.1</b> 编辑源代码</a></li>
<li class="chapter" data-level="6.4.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#source-index"><i class="fa fa-check"></i><b>6.4.2</b> 向源代码中添加行号</a></li>
<li class="chapter" data-level="6.4.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#scrollable-output"><i class="fa fa-check"></i><b>6.4.3</b> 可滚动的文本输出</a></li>
<li class="chapter" data-level="6.4.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#truncated-output"><i class="fa fa-check"></i><b>6.4.4</b> 截断文本输出</a></li>
<li class="chapter" data-level="6.4.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#html5-plot"><i class="fa fa-check"></i><b>6.4.5</b> 以HTML5格式输出图像</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#其它使用-knitr-的小技巧-other-trick"><i class="fa fa-check"></i><b>6.5</b> 其它使用 knitr 的小技巧 (*) {#other-trick}</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#reuse-chunk"><i class="fa fa-check"></i><b>6.5.1</b> 重复使用代码块</a></li>
<li class="chapter" data-level="6.5.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#在创建对象之前使用它-use-creat"><i class="fa fa-check"></i><b>6.5.2</b> 在创建对象之前使用它 (*) {#use-creat}</a></li>
<li class="chapter" data-level="6.5.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#compile-exit"><i class="fa fa-check"></i><b>6.5.3</b> 提前退出编译</a></li>
<li class="chapter" data-level="6.5.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#plot-show-else"><i class="fa fa-check"></i><b>6.5.4</b> 生成一个图像并在其他地方显示</a></li>
<li class="chapter" data-level="6.5.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#modify-before"><i class="fa fa-check"></i><b>6.5.5</b> 修改前一个代码块中的图像</a></li>
<li class="chapter" data-level="6.5.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#保存一组块选项并重复使用它们-reuse-option"><i class="fa fa-check"></i><b>6.5.6</b> 保存一组块选项并重复使用它们 (*) {#reuse-option}</a></li>
<li class="chapter" data-level="6.5.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#knit-expand"><i class="fa fa-check"></i><b>6.5.7</b> 使用 knitr::knit_expand() 来生成 Rmd 源代码</a></li>
<li class="chapter" data-level="6.5.8" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#允许代码块中的标签重复-repeat-label"><i class="fa fa-check"></i><b>6.5.8</b> 允许代码块中的标签重复 (*) {#repeat-label}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html"><i class="fa fa-check"></i><b>7</b> 使用R Markdown开展项目工作</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#project-manage"><i class="fa fa-check"></i><b>7.1</b> 使用 R Markdown 在工作中管理项目</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#external-r"><i class="fa fa-check"></i><b>7.1.1</b> 来自外部的 R 脚本</a></li>
<li class="chapter" data-level="7.1.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#external-read"><i class="fa fa-check"></i><b>7.1.2</b> 将外部脚本读取到一个块中</a></li>
<li class="chapter" data-level="7.1.3" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#从外部脚本读取多个代码块-external-multi"><i class="fa fa-check"></i><b>7.1.3</b> 从外部脚本读取多个代码块 (*) {#external-multi}</a></li>
<li class="chapter" data-level="7.1.4" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#子文档-child-document"><i class="fa fa-check"></i><b>7.1.4</b> 子文档 (*) {#child-document}</a></li>
<li class="chapter" data-level="7.1.5" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#keep-plot"><i class="fa fa-check"></i><b>7.1.5</b> 保留图像文件</a></li>
<li class="chapter" data-level="7.1.6" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#chunk-directory"><i class="fa fa-check"></i><b>7.1.6</b> R 代码块的工作目录</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#work-flow"><i class="fa fa-check"></i><b>7.2</b> 使用 R Markdown 实现工作流</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#rstudio-shortcut"><i class="fa fa-check"></i><b>7.2.1</b> 使用 RStudio 键盘快捷键</a></li>
<li class="chapter" data-level="7.2.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#spell-check"><i class="fa fa-check"></i><b>7.2.2</b> R Markdown 的拼写检查</a></li>
<li class="chapter" data-level="7.2.3" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#render-rmd"><i class="fa fa-check"></i><b>7.2.3</b> 用 rmarkdown::render() 呈现 R Markdown</a></li>
<li class="chapter" data-level="7.2.4" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#parameterized-reports"><i class="fa fa-check"></i><b>7.2.4</b> 参数化的报告</a></li>
<li class="chapter" data-level="7.2.5" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#自定义-knit-按钮-customize-button"><i class="fa fa-check"></i><b>7.2.5</b> 自定义 Knit 按钮 (*) {#customize-button}</a></li>
<li class="chapter" data-level="7.2.6" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#google-drive"><i class="fa fa-check"></i><b>7.2.6</b> 通过 Google Drive 对 Rmd 文档进行协作</a></li>
<li class="chapter" data-level="7.2.7" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#workflowr-web"><i class="fa fa-check"></i><b>7.2.7</b> 用 workflowr 将R Markdown项目组织到一个研究网站上</a></li>
<li class="chapter" data-level="7.2.8" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#github-actions"><i class="fa fa-check"></i><b>7.2.8</b> 使用 GitHub Actions 实现自动化部署</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">本书由 bookdown 强力驱动</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Markdown 指南</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmarkdown-document" class="section level1" number="3">
<h1><span class="header-section-number">第 3 章</span> 使用 R Markdown 创建常用文档</h1>
<p>Markdown 在发明之初的主要目的就是简化 HTML 内容的书写方式。例如要表示一个无序列表中的项，用 HTML 来写是 <code>&lt;ul&gt;&lt;li&gt;text&lt;/li&gt;&lt;/ul&gt;</code>，而用 Markdown 来写则只需要 <code>- text</code>；又如要表示一段引用文字，用 HTML 来写是 <code>&lt;blockquote&gt;text&lt;/blockquote&gt;</code>，用 Markdown 来写则只需要 <code>&gt; text</code>。</p>
<p>Pandoc 大大扩展了 Markdown 的语法。更重要的是，Pandoc 使得将 Markdown 文档转换为多种输出格式成为可能。尽管这些文档大体可以按照背后的实现方式，分为 HTML、PDF 和 Microsoft Office 等 3 大类型，但是根据应用场景的差异，会有多种多样的具体样式。</p>
<p>鉴于每种样式通常会通过不同的 R Markdown 扩展软件包来实现，所以其设置和使用方面会有自身的特点。因此，在接下来的一部分内容中将依次介绍常用文档格式的使用方法。而本章则主要介绍将 R Markdown 源文件输出为各种常用文档格式的功能。</p>
<p>简单说来，要论从 R Markdown 到各种文档之间总共分几步？答案是 2 步。</p>
<ol style="list-style-type: decimal">
<li>R Markdown –&gt; Markdown，由 <strong>knitr</strong> <span class="citation">(<a href="#ref-R-knitr" role="doc-biblioref">Xie 2021a</a>)</span> 完成；</li>
<li>Markdown –&gt; 不同格式文档，由 Pandoc 完成。</li>
</ol>
<div id="rmarkdown-html" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> HTML 文档</h2>
<p>HTML 即超文本标记语言（Hyper Text Markup Language），该技术是互联网最重要的基础设施之一，是网上精彩纷呈内容的主要依托。HTML 文档不仅能够展示文字、图片、表格、公式等常规页面元素，而且还可以呈现音乐、视频、交互动画等丰富多样的多媒体内容。而同样的任务则是其它常见的文档格式如 PDF、Microsoft Word 等所不能完成的。因为 Markdown 技术在设计之初的输出格式就是 HTML，所以 HTML 文档不仅仅是最常用 R Markdown 输出格式，同时也拥有最丰富的功能，因此是在学习 R Markdown 技术的过程中首先需要了解这一部分内容。</p>
<p>严格意义上说，采用 R Markdown 和 HTML 技术呈现的网站、幻灯片等也都属于 HTML 格式的文档，不过这些形式的内容通常包含了多个 <code>.html</code> 格式的文件，而这里介绍如何通过 R Markdown 源文件生成一份<strong>独立</strong>的 <code>.html</code> 格式的文件。</p>
<p>前面提过，R Markdown 生成 HTML 文档的过程有一个中间步骤，就是 Markdown + HTML 模板。HTML 模板包括预定义的文档结构、 CSS 样式表和 JavaScript 动态网页功能等，所以最终渲染得到的 HTML 文档的一些功能可能依赖于特定 HTML 模板才能实现。对于一般用户而言，不了解这方面的知识并不影响正常使用 R Markdown 创建 HTML 文档。但是如果用户对此有所了解，那将有利于了解 HTML 文档的实现途径。</p>
<p>默认情况下，R Markdown 的 HTML 文档使用 <code>rmarkdown::html_document</code> 模板。除此之外， <strong>rmarkdown</strong> 之外的其它软件包也提供了各种不同类型的 HTML 模板文件（如 <code>bookdown::html_document2</code>，<code>pagedown::html_paged</code> 等）。因此，在这一部分将首先从 R Markdown 到 <code>html_document</code> 文档开始。</p>
<p>要创建一个 <code>html_document</code>，只需要在 R Markdown 的开头加入 YAML 格式的元数据。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="rmarkdown-document.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb8-2"><a href="rmarkdown-document.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;文档标题&quot;</span></span>
<span id="cb8-3"><a href="rmarkdown-document.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;作者&quot;</span></span>
<span id="cb8-4"><a href="rmarkdown-document.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;创建时间&quot;</span></span>
<span id="cb8-5"><a href="rmarkdown-document.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb8-6"><a href="rmarkdown-document.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>在元数据中，还可以加入各种各样设置，从而改变文档的格式。例如下面的设置将为文档添加一个自动目录。</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb9-1"><a href="rmarkdown-document.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb9-2"><a href="rmarkdown-document.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;文档标题&quot;</span></span>
<span id="cb9-3"><a href="rmarkdown-document.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;作者&quot;</span></span>
<span id="cb9-4"><a href="rmarkdown-document.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;创建时间&quot;</span></span>
<span id="cb9-5"><a href="rmarkdown-document.html#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb9-6"><a href="rmarkdown-document.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb9-7"><a href="rmarkdown-document.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb9-8"><a href="rmarkdown-document.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<div id="html-title" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> 目录和标题</h3>
<p>R Markdown 文件中使用的目录都是自动目录，是根据文档的层次结构（一级标题、二级标题等）自动生成的。这一部分介绍如何在 HTML 文档中设置自动目录。</p>
<div id="html-toc" class="section level4" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> 显示目录</h4>
<p>在开头的元数据中，使用 <code>toc: true</code> 可以打开文档的目录。目录会从 HTML 的标题自动生成，目录的层级由 <code>toc_depth</code> 的值确定（默认为 3）。例如：</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb10-1"><a href="rmarkdown-document.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb10-2"><a href="rmarkdown-document.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb10-3"><a href="rmarkdown-document.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb10-4"><a href="rmarkdown-document.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb10-5"><a href="rmarkdown-document.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb10-6"><a href="rmarkdown-document.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb10-7"><a href="rmarkdown-document.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>在上面的例子中，目录中将包含 HTML 文档中的一级标题和二级标题。</p>
</div>
<div id="html-toc-float" class="section level4" number="3.1.1.2">
<h4><span class="header-section-number">3.1.1.2</span> 悬停目录</h4>
<p>当把 <code>toc_float</code> 设为 <code>true</code> 的时候，目录会在侧边栏悬停。这样就可以随时借助目录在一篇比较长的文档中跳转了。</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb11-1"><a href="rmarkdown-document.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb11-2"><a href="rmarkdown-document.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb11-3"><a href="rmarkdown-document.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb11-4"><a href="rmarkdown-document.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb11-5"><a href="rmarkdown-document.html#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-6"><a href="rmarkdown-document.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_float</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb11-7"><a href="rmarkdown-document.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>通过改变 <code>toc_float</code> 的选项，可以控制侧边栏的折叠和动画。其中：</p>
<ul>
<li><code>collapsed</code> （默认为 <code>true</code>）控制文档第一次打开时目录是否被折叠。如果为 <code>true</code> 则只显示高级别的标题（二级标题及以上元素）；</li>
<li><code>smooth_scroll</code> （默认为 <code>true</code>）控制页面滚动时，标题是否会随之变化。</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb12-1"><a href="rmarkdown-document.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb12-2"><a href="rmarkdown-document.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb12-3"><a href="rmarkdown-document.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="rmarkdown-document.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb12-5"><a href="rmarkdown-document.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb12-6"><a href="rmarkdown-document.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_float</span><span class="kw">:</span></span>
<span id="cb12-7"><a href="rmarkdown-document.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">collapsed</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-8"><a href="rmarkdown-document.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">smooth_scroll</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-9"><a href="rmarkdown-document.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-number-sections" class="section level4" number="3.1.1.3">
<h4><span class="header-section-number">3.1.1.3</span> 显示标题编号</h4>
<p>使用 <code>number_sections</code> 可以在标题开头加上编号。一级标题编号为 “1 一级标题”，二级标题为”1.1 二级标题”。</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="rmarkdown-document.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb13-2"><a href="rmarkdown-document.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb13-3"><a href="rmarkdown-document.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="rmarkdown-document.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb13-5"><a href="rmarkdown-document.html#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-6"><a href="rmarkdown-document.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">number_sections</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-7"><a href="rmarkdown-document.html#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-tabset" class="section level4" number="3.1.1.4">
<h4><span class="header-section-number">3.1.1.4</span> 使用标签页展示小标题的内容</h4>
<p>在 HTML 文档中使用标签页非常简单，只需要在标题后附加 <code>{.tabset}</code> 标签即可。</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb14-1"><a href="rmarkdown-document.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 季度报表（应用 `.tabset` 标签） {.tabset}</span></span>
<span id="cb14-2"><a href="rmarkdown-document.html#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="rmarkdown-document.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">### 按产品汇总</span></span>
<span id="cb14-4"><a href="rmarkdown-document.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="rmarkdown-document.html#cb14-5" aria-hidden="true" tabindex="-1"></a>（具体的报表内容）</span>
<span id="cb14-6"><a href="rmarkdown-document.html#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="rmarkdown-document.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">### 按区域汇总</span></span>
<span id="cb14-8"><a href="rmarkdown-document.html#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="rmarkdown-document.html#cb14-9" aria-hidden="true" tabindex="-1"></a>（具体的报表内容）</span></code></pre></div>
<p>在此基础上，添加相关的额外标签还可以控制标签的样式和行为。其中：</p>
<ul>
<li><code>.tabset-fade</code> 将为标签切换过程加入淡入淡出的动画效果；</li>
<li><code>.tabset-pills</code> 将为标签文字加上预设的 <code>.tabset-pills</code> 样式（图 <a href="rmarkdown-document.html#fig:html-tabset">3.1</a>）。</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:html-tabset"></span>
<img src="examples/tabset-example.png" alt="标签的默认样式及 `.tabset-pills` 样式" width="350" />
<p class="caption">
图 3.1: 标签的默认样式及 <code>.tabset-pills</code> 样式
</p>
</div>
</div>
</div>
<div id="html-theme" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> 主题和样式</h3>
<div id="html-theme-list" class="section level4" number="3.1.2.1">
<h4><span class="header-section-number">3.1.2.1</span> 可选的文档主题样式</h4>
<p>为了满足颜值党的差异化需求，<code>html_document</code> 自带了多个不同的主题。这些主题来自于 <a href="https://bootswatch.com/3/">Bootswatch</a>。可用的主题名称包括 <a href="https://bootswatch.com/3/default">default</a>，<a href="https://bootswatch.com/3/cerulean">cerulean</a>，<a href="https://bootswatch.com/3/journal">journal</a>，<a href="https://bootswatch.com/3/flatly">flatly</a>，<a href="https://bootswatch.com/3/darkly">darkly</a>，<a href="https://bootswatch.com/3/readable">readable</a>，<a href="https://bootswatch.com/3/spacelab">spacelab</a>，<a href="https://bootswatch.com/3/united">united</a>，<a href="https://bootswatch.com/3/cosmo">cosmo</a>，<a href="https://bootswatch.com/3/lumen">lumen</a>，<a href="https://bootswatch.com/3/paper">paper</a>，<a href="https://bootswatch.com/3/sandstone">sandstone</a>，<a href="https://bootswatch.com/3/simplex">simplex</a> 和 <a href="https://bootswatch.com/3/yeti">yeti</a> 等等。</p>
<p>主题使用 <code>theme</code> 参数来指定，这里以 <code>darkly</code> 作为一个例子，感兴趣的读者可以自行尝试其它样式（图 @ref(fig:first-rmd-theme-darkly）：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb15-1"><a href="rmarkdown-document.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb15-2"><a href="rmarkdown-document.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb15-3"><a href="rmarkdown-document.html#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb15-4"><a href="rmarkdown-document.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb15-5"><a href="rmarkdown-document.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> darkly</span></span>
<span id="cb15-6"><a href="rmarkdown-document.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:first-rmd-theme-darkly"></span>
<img src="examples/first-rmd-theme-darkly.png" alt="应用 darkly 主题后的文档样式" width="350" />
<p class="caption">
图 3.2: 应用 <a href="https://bootswatch.com/3/darkly">darkly</a> 主题后的文档样式
</p>
</div>
<p>如果设置为 <code>theme: null</code>，那么将不会应用任何主题，此时可以通过指定自定义的 CSS 样式表来进行格式化。</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="rmarkdown-document.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb16-2"><a href="rmarkdown-document.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb16-3"><a href="rmarkdown-document.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb16-4"><a href="rmarkdown-document.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb16-5"><a href="rmarkdown-document.html#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb16-6"><a href="rmarkdown-document.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> style.css</span></span>
<span id="cb16-7"><a href="rmarkdown-document.html#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-code-highlight" class="section level4" number="3.1.2.2">
<h4><span class="header-section-number">3.1.2.2</span> 可选的代码高亮样式</h4>
<p>代码高亮也有可选的多种样式，包括 <code>default</code>，<code>tango</code>，<code>pygments</code>，<code>kate</code>，<code>monchrome</code>，<code>espresso</code>，<code>zenburn</code>，<code>haddock</code>，<code>breezedark</code> 和 <code>textmate</code> 等。</p>
<p>在元数据中，使用 <code>highlight</code> 参数指定代码高亮样式。下面的示例中将代码高亮设为 <code>tango</code>，更多的代码高亮样式见图 <a href="#fig:html-code-highlight-example"><strong>??</strong></a>。</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb17-1"><a href="rmarkdown-document.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb17-2"><a href="rmarkdown-document.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb17-3"><a href="rmarkdown-document.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb17-4"><a href="rmarkdown-document.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb17-5"><a href="rmarkdown-document.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> tango</span></span>
<span id="cb17-6"><a href="rmarkdown-document.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>

<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="rmarkdown-document.html#cb18-1" aria-hidden="true" tabindex="-1"></a>code_highlight_examples <span class="ot">=</span> <span class="fu">list.files</span>(<span class="st">&quot;examples/&quot;</span>, <span class="st">&quot;code-highlight-example.*</span><span class="sc">\\</span><span class="st">.Rmd&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="rmarkdown-document.html#cb18-2" aria-hidden="true" tabindex="-1"></a>success <span class="ot">=</span> <span class="fu">lapply</span>(code_highlight_examples, import_example_result)</span></code></pre></div>
<p>跟上面的 <code>theme</code> 属性一样，<code>highlight</code> 也可以设为 <code>null</code>，这样的话代码将不显示高亮。</p>
</div>
<div id="html-style-css" class="section level4" number="3.1.2.3">
<h4><span class="header-section-number">3.1.2.3</span> 自定义样式表</h4>
<p>不论有没有应用主题和代码高亮，用户都可以使用 <code>css</code> 参数指定附加样式表。附加样式表中的定义优先级更高，当被应用到特定元素上去之后，可以改变元素的外观。</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb19-1"><a href="rmarkdown-document.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb19-2"><a href="rmarkdown-document.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb19-3"><a href="rmarkdown-document.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb19-4"><a href="rmarkdown-document.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb19-5"><a href="rmarkdown-document.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb19-6"><a href="rmarkdown-document.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb19-7"><a href="rmarkdown-document.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> styles.css</span></span>
<span id="cb19-8"><a href="rmarkdown-document.html#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>如果在 <code>styley.css</code> 中定义了两个名为 <code>#nextsteps</code> 和 <code>.emphasized</code> 的新样式，分别用于指定 HTML 文档中 <code>id = "nextsteps"</code> 和 <code>class = "emphasized"</code> 这两种元素的外观。</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb20-1"><a href="rmarkdown-document.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#nextsteps</span> {</span>
<span id="cb20-2"><a href="rmarkdown-document.html#cb20-2" aria-hidden="true" tabindex="-1"></a>   <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb20-3"><a href="rmarkdown-document.html#cb20-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-4"><a href="rmarkdown-document.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="rmarkdown-document.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">.emphasized</span> {</span>
<span id="cb20-6"><a href="rmarkdown-document.html#cb20-6" aria-hidden="true" tabindex="-1"></a>   <span class="kw">font-size</span>: <span class="dv">1.2</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb20-7"><a href="rmarkdown-document.html#cb20-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>那么，就可以通过在行尾大括号中添加元素 id 和 CSS 类的方法，对某个二级标题（此处为“这里强调一下下一步”）应用这个样式：</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb21-1"><a href="rmarkdown-document.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 这里强调一下下一步 {#nextsteps .emphasized}</span></span></code></pre></div>
<p>如果要应用多个 CSS 配置文件，可以这样写：</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb22-1"><a href="rmarkdown-document.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb22-2"><a href="rmarkdown-document.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb22-3"><a href="rmarkdown-document.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;style-1.css&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;style-2.css&quot;</span><span class="kw">]</span></span></code></pre></div>
</div>
<div id="html-css-source" class="section level4" number="3.1.2.4">
<h4><span class="header-section-number">3.1.2.4</span> 通过 CSS 代码块定义样式</h4>
<p>除了像上面那样导入一个预定义的样式表，还可以直接在 R Markdown 中添加新的 CSS 定义。不过这种方法只适合针对个别元素进行个性化设置，如果 CSS 代码有很多行，或者想要在其它 R Markdown 文件中中交叉使用同样的定义，那么将其放在自定义样式表文件中会更加合适（参见 <a href="rmarkdown-document.html#html-style-css">3.1.2.3</a>）。</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb23-1"><a href="rmarkdown-document.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-2"><a href="rmarkdown-document.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;对代码块使用自定义的 CSS 样式&quot;</span></span>
<span id="cb23-3"><a href="rmarkdown-document.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb23-4"><a href="rmarkdown-document.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb23-5"><a href="rmarkdown-document.html#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="rmarkdown-document.html#cb23-6" aria-hidden="true" tabindex="-1"></a>首先定义一个新样式 <span class="in">`watch-out`</span>。</span>
<span id="cb23-7"><a href="rmarkdown-document.html#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="rmarkdown-document.html#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{css, echo=FALSE}</span></span>
<span id="cb23-9"><a href="rmarkdown-document.html#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="in">.watch-out {</span></span>
<span id="cb23-10"><a href="rmarkdown-document.html#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: lightpink;</span></span>
<span id="cb23-11"><a href="rmarkdown-document.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="in">  border: 3px solid red;</span></span>
<span id="cb23-12"><a href="rmarkdown-document.html#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="in">  font-weight: bold;</span></span>
<span id="cb23-13"><a href="rmarkdown-document.html#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb23-14"><a href="rmarkdown-document.html#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb23-15"><a href="rmarkdown-document.html#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="rmarkdown-document.html#cb23-16" aria-hidden="true" tabindex="-1"></a>使用代码块属性 <span class="in">`class.source`</span> 可以将新样式指定给这一区块。</span>
<span id="cb23-17"><a href="rmarkdown-document.html#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="rmarkdown-document.html#cb23-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-19"><a href="rmarkdown-document.html#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r class.source=&quot;watch-out&quot;}</span></span>
<span id="cb23-20"><a href="rmarkdown-document.html#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="in">mtcars[1:5, &quot;mpg&quot;]</span></span>
<span id="cb23-21"><a href="rmarkdown-document.html#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:chunk-border"></span>
<img src="examples/chunk-custom.png" alt="一个具有浅红色背景和深红色边框的代码块" width="350" />
<p class="caption">
图 3.3: 一个具有浅红色背景和深红色边框的代码块
</p>
</div>
</div>
<div id="html-css-list" class="section level4" number="3.1.2.5">
<h4><span class="header-section-number">3.1.2.5</span> 使用丰富多样的内置 CSS 样式</h4>
<p>大多数时候，用户并不需要自己定义 CSS 样式，因为 HTML 内置的主题中已经包含了丰富且高级的内置样式。</p>
<p>默认情况下，R Markdown 输出的 HTML 文档中，已经内嵌了 Bootstrap 框架<a href="references.html#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>，因此可以使用一系列预定义的 CSS 样式。其中，可用的背景样式就包括 <code>"bg-primary"</code>，<code>"bg-success"</code>，<code>"bg-info"</code>，<code>"bg-warning"</code> 和 <code>"bg-danger"</code> 等。</p>
<p>只需要在代码块属性中使用 <code>class.source</code> 标签，就可以应用这些预定义的 CSS 样式。</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb24-1"><a href="rmarkdown-document.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb24-2"><a href="rmarkdown-document.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 改变代码块的样式</span></span>
<span id="cb24-3"><a href="rmarkdown-document.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb24-4"><a href="rmarkdown-document.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb24-5"><a href="rmarkdown-document.html#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="rmarkdown-document.html#cb24-6" aria-hidden="true" tabindex="-1"></a>当你对一个数据框取子集的时候，其输出跟选取的列的数目有关。</span>
<span id="cb24-7"><a href="rmarkdown-document.html#cb24-7" aria-hidden="true" tabindex="-1"></a>如果选取了 2 个以上的列，则输出仍然是一个数据库；</span>
<span id="cb24-8"><a href="rmarkdown-document.html#cb24-8" aria-hidden="true" tabindex="-1"></a>如果选取了 1 个列，则输出的结果将会是一个向量。</span>
<span id="cb24-9"><a href="rmarkdown-document.html#cb24-9" aria-hidden="true" tabindex="-1"></a>因此，我们对这个操作应用了 <span class="in">`bg-danger`</span> 和 <span class="in">`bg-warning`</span> 的样式。</span>
<span id="cb24-10"><a href="rmarkdown-document.html#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="rmarkdown-document.html#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="rmarkdown-document.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r class.source=&quot;bg-danger&quot;, class.output=&quot;bg-warning&quot;}</span></span>
<span id="cb24-13"><a href="rmarkdown-document.html#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="in">mtcars[1:5, &quot;mpg&quot;]</span></span>
<span id="cb24-14"><a href="rmarkdown-document.html#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb24-15"><a href="rmarkdown-document.html#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="rmarkdown-document.html#cb24-16" aria-hidden="true" tabindex="-1"></a>为了确保始终能够得到数据框，则需要添加 <span class="in">`drop = FALSE`</span> 参数。</span>
<span id="cb24-17"><a href="rmarkdown-document.html#cb24-17" aria-hidden="true" tabindex="-1"></a>为了显示这个结果，我们应用了 <span class="in">`bg-success`</span> 样式。</span>
<span id="cb24-18"><a href="rmarkdown-document.html#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="rmarkdown-document.html#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r df-drop-ok, class.source=&quot;bg-success&quot;}</span></span>
<span id="cb24-20"><a href="rmarkdown-document.html#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="in">mtcars[1:5, &quot;mpg&quot;, drop = FALSE]</span></span>
<span id="cb24-21"><a href="rmarkdown-document.html#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>以上内容生成 HTML 文档后的样子如图 <a href="rmarkdown-document.html#fig:chunk-style-example">3.4</a> 所示：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:chunk-style-example"></span>
<img src="examples/chunk-style.png" alt="在代码块上应用内置 CSS 样式" width="300" />
<p class="caption">
图 3.4: 在代码块上应用内置 CSS 样式
</p>
</div>
</div>
<div id="html-code-folding" class="section level4" number="3.1.2.6">
<h4><span class="header-section-number">3.1.2.6</span> 代码折叠</h4>
<p>当 <strong>Knitr</strong> 的代码块参数 <code>echo = TRUE</code> 时，R 代码将会输出到最终生成的文档中。
如果不需要显示源代码，可以直接设为 <code>echo = FALSE</code>。
如果既想要保留代码但又让其默认不显示，
则可以通过 <code>code_folding: hide</code> 参数来实现。</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb25-1"><a href="rmarkdown-document.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb25-2"><a href="rmarkdown-document.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;代码折叠&quot;</span></span>
<span id="cb25-3"><a href="rmarkdown-document.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb25-4"><a href="rmarkdown-document.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb25-5"><a href="rmarkdown-document.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">    code_folding: hide</span></span>
<span id="cb25-6"><a href="rmarkdown-document.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code></pre></div>
<p><code>code_folding: hide</code> 将折叠所有的代码块，用户可以通过点击来查看折叠的代码。如果想让部分代码块在一开始就显示，则可以在代码块选项中使用 <code>class.source = 'fold-show'</code>（图 <a href="rmarkdown-document.html#fig:fold-show">3.5</a>）。</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb26-1"><a href="rmarkdown-document.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb26-2"><a href="rmarkdown-document.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;代码的折叠和显示&quot;</span></span>
<span id="cb26-3"><a href="rmarkdown-document.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb26-4"><a href="rmarkdown-document.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb26-5"><a href="rmarkdown-document.html#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">    code_folding: hide</span></span>
<span id="cb26-6"><a href="rmarkdown-document.html#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb26-7"><a href="rmarkdown-document.html#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="rmarkdown-document.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb26-9"><a href="rmarkdown-document.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="in">1  # 折叠的</span></span>
<span id="cb26-10"><a href="rmarkdown-document.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb26-11"><a href="rmarkdown-document.html#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="rmarkdown-document.html#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r class.source = &#39;fold-show&#39;}</span></span>
<span id="cb26-13"><a href="rmarkdown-document.html#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="in">2  # 显示的</span></span>
<span id="cb26-14"><a href="rmarkdown-document.html#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb26-15"><a href="rmarkdown-document.html#cb26-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-16"><a href="rmarkdown-document.html#cb26-16" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb26-17"><a href="rmarkdown-document.html#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="in">3  # 还是折叠的</span></span>
<span id="cb26-18"><a href="rmarkdown-document.html#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:fold-show"></span>
<img src="examples/fold-show.png" alt="代码块的折叠和显示。图中每个代码区块旁边都有一个按钮，可以控制相应代码区块的显示方式；文档的右上角也有一个按钮，可以控制文档中全部代码区块的显示方式。" width="400" />
<p class="caption">
图 3.5: 代码块的折叠和显示。图中每个代码区块旁边都有一个按钮，可以控制相应代码区块的显示方式；文档的右上角也有一个按钮，可以控制文档中全部代码区块的显示方式。
</p>
</div>
<p>这种操作也可以反向进行，即默认显示全部的代码区块，然后再将部分代码区块设为折叠。如下配置即可：</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb27-1"><a href="rmarkdown-document.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb27-2"><a href="rmarkdown-document.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb27-3"><a href="rmarkdown-document.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb27-4"><a href="rmarkdown-document.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">    code_folding: show</span></span>
<span id="cb27-5"><a href="rmarkdown-document.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb27-6"><a href="rmarkdown-document.html#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="rmarkdown-document.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb27-8"><a href="rmarkdown-document.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="in">1  # 代码默认是显示的</span></span>
<span id="cb27-9"><a href="rmarkdown-document.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb27-10"><a href="rmarkdown-document.html#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="rmarkdown-document.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r class.source = &#39;fold-hide&#39;}</span></span>
<span id="cb27-12"><a href="rmarkdown-document.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="in">2  # 这一块代码将被折叠</span></span>
<span id="cb27-13"><a href="rmarkdown-document.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>如图 <a href="rmarkdown-document.html#fig:fold-show">3.5</a> 所示，在页面和每一个代码块的右上方有一个按钮。页面右上方的按钮可以控制全部代码块的显示和隐藏，代码块右上方的按钮则可以控制对应代码块的显示和隐藏。</p>
</div>
<div id="html-code-scroll" class="section level4" number="3.1.2.7">
<h4><span class="header-section-number">3.1.2.7</span> 设置代码块内容可滚动</h4>
<p>如果想限制代码块的高度，特别是代码执行过程中输出内容的高度，还可以从相应内容的 CSS 样式上着手，即通过 <code>class.output</code> 和 <code>class.source</code> 来定义内容的高度。</p>
<p>下面是一个限制设定代码区块高度后，再通过滚动查看完整内容的例子：</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb28-1"><a href="rmarkdown-document.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-2"><a href="rmarkdown-document.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 可以滚动的代码和输出</span></span>
<span id="cb28-3"><a href="rmarkdown-document.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> html_document</span></span>
<span id="cb28-4"><a href="rmarkdown-document.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb28-5"><a href="rmarkdown-document.html#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="rmarkdown-document.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="in">```{css, echo = TRUE}</span></span>
<span id="cb28-7"><a href="rmarkdown-document.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="in">pre {</span></span>
<span id="cb28-8"><a href="rmarkdown-document.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="in">  max-height: 300px;</span></span>
<span id="cb28-9"><a href="rmarkdown-document.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="in">  overflow-y: auto;</span></span>
<span id="cb28-10"><a href="rmarkdown-document.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb28-11"><a href="rmarkdown-document.html#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="rmarkdown-document.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="in">pre[class] {</span></span>
<span id="cb28-13"><a href="rmarkdown-document.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="in">  max-height: 100px;</span></span>
<span id="cb28-14"><a href="rmarkdown-document.html#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb28-15"><a href="rmarkdown-document.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-16"><a href="rmarkdown-document.html#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="rmarkdown-document.html#cb28-17" aria-hidden="true" tabindex="-1"></a>我们首先定义了上述 CSS 规则，用来限制代码块的高度。</span>
<span id="cb28-18"><a href="rmarkdown-document.html#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="rmarkdown-document.html#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb28-20"><a href="rmarkdown-document.html#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="in"># 假如这里有 N 多行的代码</span></span>
<span id="cb28-21"><a href="rmarkdown-document.html#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="in">if (1 + 1 == 2) {</span></span>
<span id="cb28-22"><a href="rmarkdown-document.html#cb28-22" aria-hidden="true" tabindex="-1"></a><span class="in">  # 然后再打印一个非常长的数据</span></span>
<span id="cb28-23"><a href="rmarkdown-document.html#cb28-23" aria-hidden="true" tabindex="-1"></a><span class="in">  print(mtcars)</span></span>
<span id="cb28-24"><a href="rmarkdown-document.html#cb28-24" aria-hidden="true" tabindex="-1"></a><span class="in">  # 如果不够长的话，再加上这行注释可能就够了</span></span>
<span id="cb28-25"><a href="rmarkdown-document.html#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb28-26"><a href="rmarkdown-document.html#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-27"><a href="rmarkdown-document.html#cb28-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-28"><a href="rmarkdown-document.html#cb28-28" aria-hidden="true" tabindex="-1"></a>现在添加一个新的 CSS 类 <span class="in">`scroll-100`</span>，以用来限制代码块的输出高度为 100 像素。</span>
<span id="cb28-29"><a href="rmarkdown-document.html#cb28-29" aria-hidden="true" tabindex="-1"></a>然后，将这个类赋值给代码块中的 <span class="in">`class.output`</span> 参数。</span>
<span id="cb28-30"><a href="rmarkdown-document.html#cb28-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-31"><a href="rmarkdown-document.html#cb28-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-32"><a href="rmarkdown-document.html#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{css, echo=FALSE}</span></span>
<span id="cb28-33"><a href="rmarkdown-document.html#cb28-33" aria-hidden="true" tabindex="-1"></a><span class="in">.scroll-100 {</span></span>
<span id="cb28-34"><a href="rmarkdown-document.html#cb28-34" aria-hidden="true" tabindex="-1"></a><span class="in">  max-height: 100px;</span></span>
<span id="cb28-35"><a href="rmarkdown-document.html#cb28-35" aria-hidden="true" tabindex="-1"></a><span class="in">  overflow-y: auto;</span></span>
<span id="cb28-36"><a href="rmarkdown-document.html#cb28-36" aria-hidden="true" tabindex="-1"></a><span class="in">  background-color: inherit;</span></span>
<span id="cb28-37"><a href="rmarkdown-document.html#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb28-38"><a href="rmarkdown-document.html#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb28-39"><a href="rmarkdown-document.html#cb28-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-40"><a href="rmarkdown-document.html#cb28-40" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, class.output=&quot;scroll-100&quot;}</span></span>
<span id="cb28-41"><a href="rmarkdown-document.html#cb28-41" aria-hidden="true" tabindex="-1"></a><span class="in">print(mtcars)</span></span>
<span id="cb28-42"><a href="rmarkdown-document.html#cb28-42" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>因为代码块是位于 <code>&lt;pre class="sourcecode"&gt;</code> 标签内的，所以 <code>pre[class]</code> 操作符将限制代码块的高度为不超过 100 像素。 而将 <code>class.output</code> 设为 <code>scroll-100</code> 则限制输出部分的高度为不超过 100 像素。最终效果如图 <a href="rmarkdown-document.html#fig:html-scroll-example">3.6</a> 所示。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:html-scroll-example"></span>
<img src="examples/html-scroll.png" alt="可以滚动的代码块" width="400" />
<p class="caption">
图 3.6: 可以滚动的代码块
</p>
</div>
</div>
</div>
<div id="html-pic" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> 图片和数据框</h3>
<div id="html-pic-setting" class="section level4" number="3.1.3.1">
<h4><span class="header-section-number">3.1.3.1</span> 设置图片的属性</h4>
<p>下列参数可以调整生成的 HTML 文档中图片的属性：</p>
<ul>
<li><code>fig_width</code>，<code>fig_height</code> 指定图片显示时的宽和高（默认为 7 × 5，单位英寸）；</li>
<li><code>fig_retina</code> 开启视网膜屏幕优化（默认为 2，设为 <code>null</code> 时关闭优化）；</li>
<li><code>fig_caption</code> 控制是否渲染图注；</li>
<li><code>dev</code> 设置图片输出设备，默认为 <code>png</code>。可以设置多个图片输出设备。</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="rmarkdown-document.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb29-2"><a href="rmarkdown-document.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb29-3"><a href="rmarkdown-document.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="rmarkdown-document.html#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb29-5"><a href="rmarkdown-document.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_width</span><span class="kw">:</span><span class="at"> </span><span class="dv">7</span></span>
<span id="cb29-6"><a href="rmarkdown-document.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_height</span><span class="kw">:</span><span class="at"> </span><span class="dv">6</span></span>
<span id="cb29-7"><a href="rmarkdown-document.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_caption</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb29-8"><a href="rmarkdown-document.html#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">dev</span><span class="kw">:</span><span class="at"> c(&quot;png&quot;,&quot;pdf&quot;)</span></span>
<span id="cb29-9"><a href="rmarkdown-document.html#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>在代码框属性中，仍然可以通过 <code>fig.height</code>，<code>fig.width</code>，<code>fig.asp</code> 等参数来指定生成图片的高度、宽度和宽高比。</p>
</div>
<div id="html-include-graphics" class="section level4" number="3.1.3.2">
<h4><span class="header-section-number">3.1.3.2</span> 插入外源图片</h4>
<p>虽然在 R Markdown 中可以使用 Markdown 语法和 HTML 语法插入图片，但是推荐使用 <code>knitr::include_graphics()</code> 的方式来完成这一操作。例如：</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb30-1"><a href="rmarkdown-document.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb30-2"><a href="rmarkdown-document.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::include_graphics(&quot;https://r-project.org/Rlogo.png&quot;)</span></span>
<span id="cb30-3"><a href="rmarkdown-document.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>使用这种方法插入外源图片，可以方便地添加图注（使用 <code>fig.cap</code> 参数），以及设置图片的宽高等属性（图 <a href="rmarkdown-document.html#fig:include-graphics-example">3.7</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:include-graphics-example"></span>
<img src="images/Rlogo.png" alt="插入外源图片的推荐方式" width="100" />
<p class="caption">
图 3.7: 插入外源图片的推荐方式
</p>
</div>
</div>
<div id="html-df-print" class="section level4" number="3.1.3.3">
<h4><span class="header-section-number">3.1.3.3</span> 输出数据框</h4>
<p>数据框是常见的数据结构，通过设置 <code>df_print</code> 参数，可以调整数据框的输出格式。可用的参数如表 <a href="#tab:df-print">3.1</a> 所示。</p>
<p>表： (#tab:df-print) <code>html_document</code> 可以被设置的 <code>df_print</code> 参数及其对应的含义。</p>
<table>
<thead>
<tr class="header">
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>default</td>
<td>调用 <code>print.data.frame</code> 的通用方法</td>
</tr>
<tr class="even">
<td>kable</td>
<td>使用 <code>knitr::kable</code> 函数</td>
</tr>
<tr class="odd">
<td>tibble</td>
<td>使用 <code>tibble::print.tbl_df</code> 函数</td>
</tr>
<tr class="even">
<td>paged</td>
<td>使用 <code>rmarkdown::paged_table</code> 来创建一个分页的表格</td>
</tr>
</tbody>
</table>
<p><img src="examples/df-print-example.default.png" width="496" style="display: block; margin: auto;" /><img src="examples/df-print-example.kable.png" width="496" style="display: block; margin: auto;" /><img src="examples/df-print-example.tibble.png" width="496" style="display: block; margin: auto;" /><img src="examples/df-print-example.paged.png" width="496" style="display: block; margin: auto;" /></p>
</div>
<div id="分页打印数据框时的附加参数-html-df-print-paged" class="section level4" number="3.1.3.4">
<h4><span class="header-section-number">3.1.3.4</span> 分页打印数据框时的附加参数 {html-df-print-paged}</h4>
<p>若把 <code>df_print</code> 参数设为 <code>paged</code>，数据框将支持行列的分页，效果如图 <a href="rmarkdown-document.html#fig:paged">3.8</a> 所示。</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb31-1"><a href="rmarkdown-document.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb31-2"><a href="rmarkdown-document.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;发动机测试和汽车道路测试&quot;</span></span>
<span id="cb31-3"><a href="rmarkdown-document.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb31-4"><a href="rmarkdown-document.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html_document:</span></span>
<span id="cb31-5"><a href="rmarkdown-document.html#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co">    df_print: paged</span></span>
<span id="cb31-6"><a href="rmarkdown-document.html#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb31-7"><a href="rmarkdown-document.html#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="rmarkdown-document.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb31-9"><a href="rmarkdown-document.html#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="in">mtcars</span></span>
<span id="cb31-10"><a href="rmarkdown-document.html#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:paged"></span>
<img src="images/paged.png" alt="HTML文档中分页显示的数据框"  />
<p class="caption">
图 3.8: HTML文档中分页显示的数据框
</p>
</div>
<p>表 @ref(#tab:paged) 列出了这种情况下可以使用的附加参数。</p>
<table>
<caption><span id="tab:paged">表 3.2: </span> 分页 HTML 表格的附加可用参数。</caption>
<colgroup>
<col width="23%" />
<col width="76%" />
</colgroup>
<thead>
<tr class="header">
<th>参数名</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>max.print</td>
<td>显示的总行数</td>
</tr>
<tr class="even">
<td>rows.print</td>
<td>一页显示的行数</td>
</tr>
<tr class="odd">
<td>cols.print</td>
<td>一页显示的列数</td>
</tr>
<tr class="even">
<td>cols.min.print</td>
<td>最少显示几列</td>
</tr>
<tr class="odd">
<td>pages.print</td>
<td>下方显示页面导航链接的数目</td>
</tr>
<tr class="even">
<td>paged.print</td>
<td>设为 <code>FALSE</code> 则不输出分页的表格</td>
</tr>
<tr class="odd">
<td>rownames.print</td>
<td>设为 <code>FALSE</code> 时不显示行的名称</td>
</tr>
</tbody>
</table>
<p>这些参数可以在代码块中使用。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb32-1"><a href="rmarkdown-document.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cols.print=3, rows.print=3}</span></span>
<span id="cb32-2"><a href="rmarkdown-document.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="in">mtcars</span></span>
<span id="cb32-3"><a href="rmarkdown-document.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
</div>
</div>
<div id="html-module" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> 组件和内容</h3>
<div id="html-dependency" class="section level4" number="3.1.4.1">
<h4><span class="header-section-number">3.1.4.1</span> 理解 HTML 文档的依赖关系</h4>
<p>R Markdown 输出 HTML 文档时依赖于软件包提供的 HTML 模板。
实际上，HTML 文档的样式和功能很大程度上依赖于一些 CSS 样式和 JavaScript 库的支持。
这里面包括 <a href="https://getbootstrap.com/">Bootstrap</a><a href="references.html#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>，<a href="https://jquery.com/">JQuery</a> 等优秀的开源项目。前者是一个通用的网站开发框架，后者是一个通用的 JavaScript 库。</p>
<p>默认情况下，R Markdown 输出的 HTML 文档是一个单一的 <code>.html</code> 文件。这是由 <code>self_contained: true</code> 控制的。<code>.html</code> 文件中，会使用 <code>data:</code> 存储包括 JavaScript、CSS、图片和视频在内的全部资料。这样的一个封装，使得用户可以像分享 PDF 或 Word 文档那样分享文件，同时享受超链接、动态效果等一系列 HTML 特性。</p>
<p>如果指定 <code>self_contained: false</code>，那么 HTML 文档将会将自身的依赖文件单独存放。</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb33-1"><a href="rmarkdown-document.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb33-2"><a href="rmarkdown-document.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb33-3"><a href="rmarkdown-document.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb33-4"><a href="rmarkdown-document.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb33-5"><a href="rmarkdown-document.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">self_contained</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb33-6"><a href="rmarkdown-document.html#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>默认情况下，在 <code>.html</code> 文件同一目录会生成同名的 <code>_files</code> 文件夹，存放相应的依赖文件。下面是默认情况下一份 HTML 文档所包含的依赖文件。</p>
<pre><code>+---anchor-sections-1.0
+---bootstrap-3.3.5
|   +---css
|   |   \---fonts
|   +---fonts
|   +---js
|   \---shim
+---header-attrs-2.5
+---highlightjs-9.12.0
+---jquery-1.11.3
\---navigation-1.1</code></pre>
<p>存放这些依赖文件的文件夹位置可以由 <code>lib_dir: xxx</code> 指定，例如：</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb35-1"><a href="rmarkdown-document.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb35-2"><a href="rmarkdown-document.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb35-3"><a href="rmarkdown-document.html#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb35-4"><a href="rmarkdown-document.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb35-5"><a href="rmarkdown-document.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">self_contained</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb35-6"><a href="rmarkdown-document.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">lib_dir</span><span class="kw">:</span><span class="at"> libs</span></span>
<span id="cb35-7"><a href="rmarkdown-document.html#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>依赖文件的内容会随配置变化，例如当在 YAML 配置中加入 <code>df_print: paged</code> 之后，依赖文件中会多一个 <code>pagedtable-1.1</code> 的子文件夹出来。</p>
<p>显然，存放依赖的子文件夹依据 <strong>库名</strong> + <strong>版本号</strong> 的规则命名。要弄清楚库文件的全部特性，可能要对库本身有相当的理解才行。而 R Markdown 则是把最常用的功能整合提供给了用户。</p>
<p>当文档的内容比较少，同时又有多个类似的文档的时候，库文件所占的存储空间可能比自己编写的内容还要大得多。这种情况下，将库文件统一存储在指定的 <code>libs</code> 文件夹，可以实现库文件公用。</p>
<p>另外，有些库文件不常用，或者文件太大，还可以通过库文件的服务器调用。例如下面一节要讲的 MathJax 库。</p>
</div>
<div id="html-mathjax" class="section level4" number="3.1.4.2">
<h4><span class="header-section-number">3.1.4.2</span> MathJax 库的配置</h4>
<p>HTML 文档需要 <a href="https://www.mathjax.org">MathJax</a> 脚本来渲染 Latex 和 MathML 公式<a href="references.html#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>，调用 <a href="https://www.mathjax.org">MathJax</a> 的方式则可以通过 <code>mathjax</code> 参数来调整。</p>
<ul>
<li><p><code>"default"</code>：默认配置，会通过 HTTPS 链接从 RStudio 的 CDN 网络服务器上调用；</p></li>
<li><p><code>"local"</code>：与 <code>self_contained: false</code> 联合使用时，会将 MathJax 库文件保存在本地目录中；</p></li>
<li><p>还可以将 <code>mathjax</code> 的值设置成一个 URL 链接，指向可用的 MathJax 库文件地址；</p></li>
<li><p><code>null</code>：完全不使用 MathJax。</p></li>
</ul>
<p>例如，使用 MathJax 的本地拷贝可以如下配置：</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb36-1"><a href="rmarkdown-document.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb36-2"><a href="rmarkdown-document.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb36-3"><a href="rmarkdown-document.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb36-4"><a href="rmarkdown-document.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb36-5"><a href="rmarkdown-document.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">mathjax</span><span class="kw">:</span><span class="at"> local</span></span>
<span id="cb36-6"><a href="rmarkdown-document.html#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">self_contained</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb36-7"><a href="rmarkdown-document.html#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>为 MathJax 配置一个新的可用来源。</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb37-1"><a href="rmarkdown-document.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb37-2"><a href="rmarkdown-document.html#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb37-3"><a href="rmarkdown-document.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb37-4"><a href="rmarkdown-document.html#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb37-5"><a href="rmarkdown-document.html#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">mathjax</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;http://example.com/MathJax.js&quot;</span></span>
<span id="cb37-6"><a href="rmarkdown-document.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>不使用 MathJax。</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb38-1"><a href="rmarkdown-document.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb38-2"><a href="rmarkdown-document.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb38-3"><a href="rmarkdown-document.html#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb38-4"><a href="rmarkdown-document.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb38-5"><a href="rmarkdown-document.html#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">mathjax</span><span class="kw">:</span><span class="at"> </span><span class="ch">null</span></span>
<span id="cb38-6"><a href="rmarkdown-document.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-keep-md" class="section level4" number="3.1.4.3">
<h4><span class="header-section-number">3.1.4.3</span> 是否保留 Markdown</h4>
<p><strong>knitr</strong> 处理 R Markdown 文件时，会先生成一个 Markdown 文件（<code>*.md</code>），随后再由 Pandoc 转换成 HTML 文档。如果需要保留这个 Markdown 文件，可以使用 <code>keep_md</code> 选项。</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb39-1"><a href="rmarkdown-document.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb39-2"><a href="rmarkdown-document.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb39-3"><a href="rmarkdown-document.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb39-4"><a href="rmarkdown-document.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb39-5"><a href="rmarkdown-document.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">keep_md</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb39-6"><a href="rmarkdown-document.html#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-template" class="section level4" number="3.1.4.4">
<h4><span class="header-section-number">3.1.4.4</span> 使用自定义的 HTML 模板</h4>
<p>使用 <code>template</code> 选项，可以配置 Pandoc 转换时使用的模板。</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb40-1"><a href="rmarkdown-document.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb40-2"><a href="rmarkdown-document.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb40-3"><a href="rmarkdown-document.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb40-4"><a href="rmarkdown-document.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb40-5"><a href="rmarkdown-document.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">template</span><span class="kw">:</span><span class="at"> another_template.html</span></span>
<span id="cb40-6"><a href="rmarkdown-document.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>Pandoc 模板遵循特定的格式，有关的进一步信息可以在 <a href="http://pandoc.org/MANUAL.html#templates">Pandoc 模板</a> 页面获得。</p>
<p>下面是一个 HTML 模板的示例：</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb41-1"><a href="rmarkdown-document.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb41-2"><a href="rmarkdown-document.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb41-3"><a href="rmarkdown-document.html#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;title&gt;</span>$title$<span class="kw">&lt;/title&gt;</span></span>
<span id="cb41-4"><a href="rmarkdown-document.html#cb41-4" aria-hidden="true" tabindex="-1"></a>    $for(css)$</span>
<span id="cb41-5"><a href="rmarkdown-document.html#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;$css$&quot;</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text/css&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb41-6"><a href="rmarkdown-document.html#cb41-6" aria-hidden="true" tabindex="-1"></a>    $endfor$</span>
<span id="cb41-7"><a href="rmarkdown-document.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb41-8"><a href="rmarkdown-document.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb41-9"><a href="rmarkdown-document.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  $body$</span>
<span id="cb41-10"><a href="rmarkdown-document.html#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb41-11"><a href="rmarkdown-document.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>这其中包括一些变量，如 <code>$title$</code>，<code>$body$</code> 等。这些变量由 Pandoc 定义，完整的变量列表可以 <a href="https://pandoc.org/MANUAL.html#templates">参见 Pandoc 的官方文档</a>。</p>
<p>这样的 HTML 模板使得高度定制化的输出成为可能。例如，可以在 <code>&lt;head&gt;</code> 区域加入任意的 CSS 样式， JavaScript 代码，以及其它的开源库。 另外，还可以定义一些新变量来控制文档的格式化。例如，定义一个布尔值 <code>draft</code> 来确定文档是一个草稿还是最终版本。</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb42-1"><a href="rmarkdown-document.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb42-2"><a href="rmarkdown-document.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;style</span> <span class="er">type</span><span class="ot">=</span><span class="st">&quot;text/css&quot;</span><span class="kw">&gt;</span></span>
<span id="cb42-3"><a href="rmarkdown-document.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">.logo</span> {</span>
<span id="cb42-4"><a href="rmarkdown-document.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">float</span>: <span class="dv">right</span><span class="op">;</span></span>
<span id="cb42-5"><a href="rmarkdown-document.html#cb42-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-6"><a href="rmarkdown-document.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/style&gt;</span></span>
<span id="cb42-7"><a href="rmarkdown-document.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb42-8"><a href="rmarkdown-document.html#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="rmarkdown-document.html#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb42-10"><a href="rmarkdown-document.html#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;logo&quot;</span><span class="kw">&gt;</span></span>
<span id="cb42-11"><a href="rmarkdown-document.html#cb42-11" aria-hidden="true" tabindex="-1"></a>$if(draft)$</span>
<span id="cb42-12"><a href="rmarkdown-document.html#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- 使用 draft.png 以表明这是一份草稿 --&gt;</span></span>
<span id="cb42-13"><a href="rmarkdown-document.html#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;images/draft.png&quot;</span> <span class="er">alt</span><span class="ot">=</span><span class="st">&quot;您正在阅读的是一份草稿&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb42-14"><a href="rmarkdown-document.html#cb42-14" aria-hidden="true" tabindex="-1"></a>$else$</span>
<span id="cb42-15"><a href="rmarkdown-document.html#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- 在最终版本中插入正式 LOGO --&gt;</span></span>
<span id="cb42-16"><a href="rmarkdown-document.html#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;img</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;images/logo.png&quot;</span> <span class="er">alt</span><span class="ot">=</span><span class="st">&quot;您正在阅读本文档的正式版本&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb42-17"><a href="rmarkdown-document.html#cb42-17" aria-hidden="true" tabindex="-1"></a>$endif$</span>
<span id="cb42-18"><a href="rmarkdown-document.html#cb42-18" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span>
<span id="cb42-19"><a href="rmarkdown-document.html#cb42-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-20"><a href="rmarkdown-document.html#cb42-20" aria-hidden="true" tabindex="-1"></a>$body$</span>
<span id="cb42-21"><a href="rmarkdown-document.html#cb42-21" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span></code></pre></div>
<p><code>draft</code> 变量可以通过 YAML 元数据来赋值。这样根据 <code>draft</code> 设定的不同值，R Markdown 可以编译出具有不同 LOGO 图像的 HTML 文档，从而可以直观的显示读者目前看到的这份文档是一个草案还是最终版本。</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb43-1"><a href="rmarkdown-document.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb43-2"><a href="rmarkdown-document.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;一份重要的报告&quot;</span></span>
<span id="cb43-3"><a href="rmarkdown-document.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="fu">draft</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb43-4"><a href="rmarkdown-document.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb43-5"><a href="rmarkdown-document.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb43-6"><a href="rmarkdown-document.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">template</span><span class="kw">:</span><span class="at"> my-template.html</span></span>
<span id="cb43-7"><a href="rmarkdown-document.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p><em>说明</em>：<strong>rmarkdown</strong> 软件包默认使用自带的 HTML 模板，一些方面与 Pandoc 默认的模板存在差异。如果有 <code>template: null</code> 的话，则 Pandoc 的模板会被使用。</p>
</div>
<div id="html-includes" class="section level4" number="3.1.4.5">
<h4><span class="header-section-number">3.1.4.5</span> 包含其它文件</h4>
<p>使用 <code>includes</code> 选项，可以在 HTML 文档的不同位置嵌入其它的 HTML 格式内容。可选的位置包括在 HTML 文档的 <code>header</code>、<code>body</code> 前/后等<a href="references.html#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>。</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb44-1"><a href="rmarkdown-document.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb44-2"><a href="rmarkdown-document.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb44-3"><a href="rmarkdown-document.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb44-4"><a href="rmarkdown-document.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb44-5"><a href="rmarkdown-document.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">includes</span><span class="kw">:</span></span>
<span id="cb44-6"><a href="rmarkdown-document.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">in_header</span><span class="kw">:</span><span class="at"> header.html</span></span>
<span id="cb44-7"><a href="rmarkdown-document.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">before_body</span><span class="kw">:</span><span class="at"> doc_prefix.html</span></span>
<span id="cb44-8"><a href="rmarkdown-document.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">after_body</span><span class="kw">:</span><span class="at"> doc_suffix.html</span></span>
<span id="cb44-9"><a href="rmarkdown-document.html#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>这种方式可以很方便的为文档加入一些第三方功能和公用的元件。例如在 <code>in_header</code> 中导入预定义的 CSS 样式表和 Javascript 脚本，在 <code>before_body</code> 中加入导航栏，在 <code>after_body</code> 中加入一个底栏等。</p>
<p>下面的例子中，即添加了一个简单的底栏。将其中内容保存到一个 HTML 文件中，放在 <code>after_body</code> 后面即可。</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb45-1"><a href="rmarkdown-document.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;footer&quot;</span><span class="kw">&gt;</span>Copyright <span class="dv">&amp;copy;</span> R Markdown 指南 2021<span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>除了以上几种常用的位置，还可以在任意地方插入 HTML 内容。实现这一功能的途径至少有两种。</p>
<p>一是使用 <code>htmltools::includeHTML()</code> 方法：</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb46-1"><a href="rmarkdown-document.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, results=&#39;asis&#39;}</span></span>
<span id="cb46-2"><a href="rmarkdown-document.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="in">htmltools::includeHTML(&#39;file.html&#39;)</span></span>
<span id="cb46-3"><a href="rmarkdown-document.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>二是使用 <code>xfun::file_string()</code> 方法：</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb47-1"><a href="rmarkdown-document.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE, results=&#39;asis&#39;}</span></span>
<span id="cb47-2"><a href="rmarkdown-document.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="in">xfun::file_string(&#39;file.html&#39;)</span></span>
<span id="cb47-3"><a href="rmarkdown-document.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>需要注意的是，导入的 HTML 文件必须是 HTML 片段，而不能是一个完整的 HTML 文档。完整的 HTML 文件中有 <code>&lt;html&gt;</code> 标签，解析时会造成错误。比如下面就是一个无效的例子：</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb48-1"><a href="rmarkdown-document.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb48-2"><a href="rmarkdown-document.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;head&gt;</span>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb48-3"><a href="rmarkdown-document.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="rmarkdown-document.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb48-5"><a href="rmarkdown-document.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  父 HTML 文件。</span>
<span id="cb48-6"><a href="rmarkdown-document.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-7"><a href="rmarkdown-document.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- htmltools::includeHTML() 将插入下列 HTML 代码 --&gt;</span></span>
<span id="cb48-8"><a href="rmarkdown-document.html#cb48-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;html&gt;</span></span>
<span id="cb48-9"><a href="rmarkdown-document.html#cb48-9" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;head&gt;</span>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb48-10"><a href="rmarkdown-document.html#cb48-10" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;body&gt;</span></span>
<span id="cb48-11"><a href="rmarkdown-document.html#cb48-11" aria-hidden="true" tabindex="-1"></a>      子 HTML 文件。</span>
<span id="cb48-12"><a href="rmarkdown-document.html#cb48-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">&lt;/body&gt;</span></span>
<span id="cb48-13"><a href="rmarkdown-document.html#cb48-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/html&gt;</span></span>
<span id="cb48-14"><a href="rmarkdown-document.html#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- 上面的内容即插入的 HTML 代码，插入后新文档的解析会出错 --&gt;</span></span>
<span id="cb48-15"><a href="rmarkdown-document.html#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="rmarkdown-document.html#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb48-17"><a href="rmarkdown-document.html#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
</div>
<div id="html-fragments" class="section level4" number="3.1.4.6">
<h4><span class="header-section-number">3.1.4.6</span> 生成 HTML 片段</h4>
<p>HTML 片段是一个不完整的 HTML 文件，这种片段适合用于嵌入其它的网页或者内容管理系统（如博客）中。HTML 片段也不自带主题和代码高亮，而通过继承的方式使用其嵌入文件或系统的设置。这样的 HTML 片段，也非常适合用于包含在其它文件中（参见 <a href="#include-html"><strong>??</strong></a>）。</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb49-1"><a href="rmarkdown-document.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb49-2"><a href="rmarkdown-document.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_fragment</span></span>
<span id="cb49-3"><a href="rmarkdown-document.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>下面是一个 HTML 片段的例子：</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb50-1"><a href="rmarkdown-document.html#cb50-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-2"><a href="rmarkdown-document.html#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="rmarkdown-document.html#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="rmarkdown-document.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;p&gt;</span>HTML 片段可以有标题和代码区域，但是不包含任何 CSS 定义。<span class="kw">&lt;/p&gt;</span></span>
<span id="cb50-5"><a href="rmarkdown-document.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;pre</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;r&quot;</span><span class="kw">&gt;&lt;code&gt;</span>head(mtcars)<span class="kw">&lt;/code&gt;&lt;/pre&gt;</span></span>
<span id="cb50-6"><a href="rmarkdown-document.html#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;pre&gt;&lt;code&gt;</span>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb</span>
<span id="cb50-7"><a href="rmarkdown-document.html#cb50-7" aria-hidden="true" tabindex="-1"></a>## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4</span>
<span id="cb50-8"><a href="rmarkdown-document.html#cb50-8" aria-hidden="true" tabindex="-1"></a>## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4</span>
<span id="cb50-9"><a href="rmarkdown-document.html#cb50-9" aria-hidden="true" tabindex="-1"></a>## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1</span>
<span id="cb50-10"><a href="rmarkdown-document.html#cb50-10" aria-hidden="true" tabindex="-1"></a>## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1</span>
<span id="cb50-11"><a href="rmarkdown-document.html#cb50-11" aria-hidden="true" tabindex="-1"></a>## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2</span>
<span id="cb50-12"><a href="rmarkdown-document.html#cb50-12" aria-hidden="true" tabindex="-1"></a>## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1<span class="kw">&lt;/code&gt;&lt;/pre&gt;</span></span></code></pre></div>
<p>将这些内容保存为一个 HTML 文件，导入此处，则效果如下所示：</p>



<p>HTML 片段可以有标题和代码区域，但是不包含任何 CSS 定义。</p>
<pre class="r"><code>head(mtcars)</code></pre>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<p><em>HTML 片段的内容到此结束。</em></p>
</div>
<div id="html-favicon" class="section level4" number="3.1.4.7">
<h4><span class="header-section-number">3.1.4.7</span> 使用自定义的浏览器图标</h4>
<p>通过在 <code>in_header</code> 部位导入 HTML 内容，可以为 HTML 文档设定一个自定义的浏览器图标。</p>
<p>将下面的内容保存到一个名为 <code>header.html</code> 的文档中。</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb51-1"><a href="rmarkdown-document.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;shortcut icon&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;{path to favicon file}&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>然后通过 <code>includes</code> 导入文件的内容，则可以改变浏览当前文档时的浏览器图标。</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb52-1"><a href="rmarkdown-document.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb52-2"><a href="rmarkdown-document.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb52-3"><a href="rmarkdown-document.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">includes</span><span class="kw">:</span></span>
<span id="cb52-4"><a href="rmarkdown-document.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">in_header</span><span class="kw">:</span><span class="at"> header.html</span></span></code></pre></div>
</div>
<div id="html-shared-yaml" class="section level4" number="3.1.4.8">
<h4><span class="header-section-number">3.1.4.8</span> 共用 YAML 配置文件</h4>
<p>当前目录中的 <code>_output.yml</code> 文件是一个配置文件，其中的设置可以被目录下所有的 R Markdown 文档公用。需要注意的是，该文件中的内容不需要使用<code>---</code> 和 <code>output</code> 标签。</p>
<p>如下所示：</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb53-1"><a href="rmarkdown-document.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb53-2"><a href="rmarkdown-document.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">self_contained</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb53-3"><a href="rmarkdown-document.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> united</span></span>
<span id="cb53-4"><a href="rmarkdown-document.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> textmate</span></span></code></pre></div>
<p>而不应该写成下面这种样子：</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb54-1"><a href="rmarkdown-document.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb54-2"><a href="rmarkdown-document.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb54-3"><a href="rmarkdown-document.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb54-4"><a href="rmarkdown-document.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">self_contained</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb54-5"><a href="rmarkdown-document.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> united</span></span>
<span id="cb54-6"><a href="rmarkdown-document.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> textmate</span></span>
<span id="cb54-7"><a href="rmarkdown-document.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="html-code-download" class="section level4" number="3.1.4.9">
<h4><span class="header-section-number">3.1.4.9</span> 允许下载源文件</h4>
<p>当分享一个 R Markdown 生成的 HTML 文档给他人的时候，对方可能还需要提供 <code>.Rmd</code> 源文件。在头文件中配置 <code>code_download</code> 参数可以在 HTML 文档中嵌入源文件。</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb55-1"><a href="rmarkdown-document.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb55-2"><a href="rmarkdown-document.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb55-3"><a href="rmarkdown-document.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">code_download</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p>打开 <code>code_download</code> 选项后，页面中会出现一个下载按钮，点击下载按钮即可获得源文件。</p>
</div>
<div id="html-embed" class="section level4" number="3.1.4.10">
<h4><span class="header-section-number">3.1.4.10</span> 嵌入数据或其它文件</h4>
<p>嵌入 <code>.Rmd</code> 源文件可能还不足以重现 R Markdown 中结果，通常还会需要原始数据等其它内容。要将这些内容嵌入 HTML 文档中，也是很容易实现的。</p>
<p>这一功能通过 <strong>xfun</strong> 软件包<span class="citation">(<a href="#ref-R-xfun" role="doc-biblioref">Xie 2021c</a>)</span> 实现，依赖于 <code>htmltools</code> 和 <code>mime</code> 软件包。要使用这一功能，首先确保这两个软件包可用。</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="rmarkdown-document.html#cb56-1" aria-hidden="true" tabindex="-1"></a>xfun<span class="sc">::</span><span class="fu">pkg_load2</span>(<span class="fu">c</span>(<span class="st">&#39;htmltools&#39;</span>, <span class="st">&#39;mime&#39;</span>))</span></code></pre></div>
<p>现在，就可以随意嵌入各种文件了。</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb57-1"><a href="rmarkdown-document.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}</span></span>
<span id="cb57-2"><a href="rmarkdown-document.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="in"># 不但可以嵌入一个文件</span></span>
<span id="cb57-3"><a href="rmarkdown-document.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="in">xfun::embed_file(&#39;source.Rmd&#39;)</span></span>
<span id="cb57-4"><a href="rmarkdown-document.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="rmarkdown-document.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="in"># 还可以嵌入多个文件</span></span>
<span id="cb57-6"><a href="rmarkdown-document.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="in">xfun::embed_files(c(&#39;source.Rmd&#39;, &#39;data.csv&#39;))</span></span>
<span id="cb57-7"><a href="rmarkdown-document.html#cb57-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-8"><a href="rmarkdown-document.html#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="in"># 甚至一个目录也不在话下</span></span>
<span id="cb57-9"><a href="rmarkdown-document.html#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="in">xfun::embed_dir(&#39;data/&#39;, text = &#39;Download full data&#39;)</span></span>
<span id="cb57-10"><a href="rmarkdown-document.html#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>不仅如此，还可以编程技巧嵌入所需的文件。</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="rmarkdown-document.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 嵌入当前目录下所有的 Rmd 和 csv 文件</span></span>
<span id="cb58-2"><a href="rmarkdown-document.html#cb58-2" aria-hidden="true" tabindex="-1"></a>xfun<span class="sc">::</span><span class="fu">embed_files</span>(<span class="fu">list.files</span>(<span class="st">&#39;.&#39;</span>, <span class="st">&#39;[.](Rmd|csv)$&#39;</span>))</span></code></pre></div>
<p><em>说明</em>：当嵌入多个文件时，其工作原理是：首先将这些文件压缩成 Zip 格式，然后将 Zip 文件嵌入到 HTML 文档中。</p>
</div>
</div>
</div>
<div id="rmarkdown-pdf" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> PDF 文档</h2>
<p>这一部分讲述将 R Markdown 输出为 PDF 的功能。PDF 是便携式文档格式（<strong>P</strong>ortable <strong>D</strong>ocument <strong>F</strong>ormat）的缩写，这是一种常见的文档格式，
特别是在文件、学术论文中广泛使用。它具有文件体积小、保真度高和安全的特点。</p>
<p>R Markdown 并不能直接输出 PDF 文档，而是会输出 LaTeX 文件，LaTeX 文件经过处理后生成 PDF。因此，使用 R Markdown 输出 PDF 文件时，可以充分发挥 LaTeX 的优势。在需要的时候，可以直接使用 LaTeX 代码编写内容，应用 LaTeX 的包和模板，添加标题、脚注、子图等。</p>
<p>不过，LaTeX 技术对于大多数人可能都还比较陌生，而在生成 PDF 文档的过程中，很多问题都跟 LaTeX 的配置有关。这几乎是不可避免的，因此在开始正式的内容前，需要确保已经安装了 <strong>TinyTex</strong> 以及一些依赖的 LaTeX 组件。具体的安装步骤和疑难解答请参见前文（<a href="rmarkdown-base.html#install-tinytex">2.2.2</a>），此处不再赘述。</p>
<div id="pdf-rmd" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> 从 R Markdown 到 PDF 文档</h3>
<p>要输出 PDF 文档，只需要在 R Markdown 开头的 YAML 配置中指定
<code>pdf_document</code> 即可。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb59-1"><a href="rmarkdown-document.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb59-2"><a href="rmarkdown-document.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> pdf_document</span></span>
<span id="cb59-3"><a href="rmarkdown-document.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>只需要这样一个改动，就可以得到一份 PDF 文档。</p>
</div>
<div id="pdf-chinese" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> 在 PDF 文档中使用中文的注意事项</h3>
<p>如果这份 PDF 中仅含有英文，那么不需要做额外的设置。
但是对于中文用户而言，可能会出现错误。这是因为，PDF 所依赖的 LaTeX 系统对中文的支持与 HTML 不同，需要做一些合适的设置。包括导入中文语言支持的 LaTeX 模块 <strong>ctex</strong>，以及使用一个对 Unicode 支持更好的 <strong>xelatex</strong> 引擎。</p>
<p>下面就是一份中文 PDF 文档的示例。</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="rmarkdown-document.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/PDF-document-in-chinese.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb61"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb61-1"><a href="rmarkdown-document.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-2"><a href="rmarkdown-document.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;这是一个 R Markdown 生成的 PDF 文档&quot;</span></span>
<span id="cb61-3"><a href="rmarkdown-document.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;张三&quot;</span></span>
<span id="cb61-4"><a href="rmarkdown-document.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2021年5月1日&quot;</span></span>
<span id="cb61-5"><a href="rmarkdown-document.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb61-6"><a href="rmarkdown-document.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf_document:</span></span>
<span id="cb61-7"><a href="rmarkdown-document.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">    latex_engine: xelatex</span></span>
<span id="cb61-8"><a href="rmarkdown-document.html#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span><span class="co"> </span></span>
<span id="cb61-9"><a href="rmarkdown-document.html#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{ctex}</span></span>
<span id="cb61-10"><a href="rmarkdown-document.html#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-11"><a href="rmarkdown-document.html#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="rmarkdown-document.html#cb61-12" aria-hidden="true" tabindex="-1"></a>既然你在看这本书，想必你想制作的 PDF 文档难免会包括中文。</span>
<span id="cb61-13"><a href="rmarkdown-document.html#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="rmarkdown-document.html#cb61-14" aria-hidden="true" tabindex="-1"></a>要想让 PDF 更好的支持中文，需要做一些额外的设置。</span>
<span id="cb61-15"><a href="rmarkdown-document.html#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="rmarkdown-document.html#cb61-16" aria-hidden="true" tabindex="-1"></a>包括设置一个对 Unicode 支持更好的 <span class="in">`xelatex`</span> 引擎，以及在 PDF 文档开始的配置部分</span>
<span id="cb61-17"><a href="rmarkdown-document.html#cb61-17" aria-hidden="true" tabindex="-1"></a>使用中文语言支持软件包 <span class="in">`ctex`</span>。</span>
<span id="cb61-18"><a href="rmarkdown-document.html#cb61-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-19"><a href="rmarkdown-document.html#cb61-19" aria-hidden="true" tabindex="-1"></a>我们接下来将会分别介绍这些功能。</span></code></pre></div>
<p>将这份 R Markdown 编译后，将会生成一份 PDF 文档。</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="rmarkdown-document.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example_result</span>(<span class="st">&quot;examples/PDF-document-in-chinese.Rmd&quot;</span>)</span></code></pre></div>
<p><img src="examples/PDF-document-in-chinese.png" width="1275" style="display: block; margin: auto;" /></p>
</div>
<div id="pdf-general-setting" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> 与 HTML 文档中相通的一些设置</h3>
<p>下面的这些设置与前文介绍的 HTML 文档中相应配置的用法基本相同（参见 <a href="rmarkdown-document.html#rmarkdown-html">3.1</a>）。</p>
<div id="pdf-toc" class="section level4" number="3.2.3.1">
<h4><span class="header-section-number">3.2.3.1</span> 显示目录</h4>
<p>使用 <code>toc</code> 在 PDF 文档中加入目录，<code>toc_depth</code> 控制目录的深度。这点与 HTML 文档的用法一致<a href="references.html#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>。</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb63-1"><a href="rmarkdown-document.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb63-2"><a href="rmarkdown-document.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;五一劳动节加班三倍工资&quot;</span></span>
<span id="cb63-3"><a href="rmarkdown-document.html#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb63-4"><a href="rmarkdown-document.html#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2021年5月1日&quot;</span></span>
<span id="cb63-5"><a href="rmarkdown-document.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb63-6"><a href="rmarkdown-document.html#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="at">  pdf_document：</span></span>
<span id="cb63-7"><a href="rmarkdown-document.html#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb63-8"><a href="rmarkdown-document.html#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb63-9"><a href="rmarkdown-document.html#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>如果 <code>toc_depth</code> 没有指定，则默认索引到二级标题（在 HTML 文档中默认索引到三级标题）。</p>
<p>使用 <code>number_sections</code> 可以在标题前面加入编号。</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb64-1"><a href="rmarkdown-document.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb64-2"><a href="rmarkdown-document.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;五一劳动节加班三倍工资&quot;</span></span>
<span id="cb64-3"><a href="rmarkdown-document.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb64-4"><a href="rmarkdown-document.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2021年5月1日&quot;</span></span>
<span id="cb64-5"><a href="rmarkdown-document.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb64-6"><a href="rmarkdown-document.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="at">  pdf_document：</span></span>
<span id="cb64-7"><a href="rmarkdown-document.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb64-8"><a href="rmarkdown-document.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">toc_depth</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb64-9"><a href="rmarkdown-document.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">number_sections</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb64-10"><a href="rmarkdown-document.html#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-figure" class="section level4" number="3.2.3.2">
<h4><span class="header-section-number">3.2.3.2</span> 图片相关的配置</h4>
<ul>
<li><p><code>fig_width</code> 和 <code>fig_height</code> 用于控制图片默认的宽和高（默认为 6.5 x 4.5 英寸）。</p></li>
<li><p><code>fig_crop</code> 控制 <code>pdfcrop</code> 的效果，功能是去掉图片边缘的空白（默认为 <code>true</code>）。</p>
<p><code>pdfcrop</code> 是一个 LaTeX 组件，默认并没有被 <code>tinytex</code> 安装。推荐用户运行 <code>tinytex::tlmgr_install("pdfcrop")</code> 来安装它。同时，<code>pdfcrop</code> 依赖于系统中的存在的 <code>ghostscript</code>，因此还需要安装 <a href="https://www.ghostscript.com/"><code>ghostscript</code></a> 才能正常使用 <code>pdfcrop</code>。</p></li>
<li><p><code>fig_caption</code> 控制是否为图片添加图注（默认为 <code>true</code>）。</p></li>
<li><p><code>dev</code> 控制用于渲染图片的图像设备（默认为 <code>pdf</code>）。</p></li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb65-1"><a href="rmarkdown-document.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb65-2"><a href="rmarkdown-document.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;五一劳动节加班三倍工资&quot;</span></span>
<span id="cb65-3"><a href="rmarkdown-document.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb65-4"><a href="rmarkdown-document.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2021年5月1日&quot;</span></span>
<span id="cb65-5"><a href="rmarkdown-document.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb65-6"><a href="rmarkdown-document.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="at">  pdf_document：</span></span>
<span id="cb65-7"><a href="rmarkdown-document.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_width</span><span class="kw">:</span><span class="at"> </span><span class="dv">7</span></span>
<span id="cb65-8"><a href="rmarkdown-document.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_height</span><span class="kw">:</span><span class="at"> </span><span class="dv">6</span></span>
<span id="cb65-9"><a href="rmarkdown-document.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fig_caption</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb65-10"><a href="rmarkdown-document.html#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-df-print" class="section level4" number="3.2.3.3">
<h4><span class="header-section-number">3.2.3.3</span> 打印数据框</h4>
<p>通过配置 <code>df_print</code>，可以调整打印数据框的格式（表 <a href="rmarkdown-document.html#tab:df-print-pdf">3.3</a>）。</p>
<table>
<caption><span id="tab:df-print-pdf">表 3.3: </span> 输出 PDF 时 <code>df_print</code> 可选的值。</caption>
<colgroup>
<col width="21%" />
<col width="78%" />
</colgroup>
<thead>
<tr class="header">
<th>配置</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>default</td>
<td>调用 <code>print.data.frame</code> 泛型函数</td>
</tr>
<tr class="even">
<td>kable</td>
<td>使用 <code>knitr::kable()</code> 函数</td>
</tr>
<tr class="odd">
<td>tibble</td>
<td>使用 <code>tibble::print.tbl_df()</code> 函数</td>
</tr>
<tr class="even">
<td>一个自定义函数</td>
<td>使用自定义函数创建一个表格。参见 <a href="#custom-fun-dfprint"><strong>??</strong></a></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb66"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb66-1"><a href="rmarkdown-document.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb66-2"><a href="rmarkdown-document.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;五一劳动节加班三倍工资&quot;</span></span>
<span id="cb66-3"><a href="rmarkdown-document.html#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb66-4"><a href="rmarkdown-document.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2021年5月1日&quot;</span></span>
<span id="cb66-5"><a href="rmarkdown-document.html#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb66-6"><a href="rmarkdown-document.html#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="at">  pdf_document：</span></span>
<span id="cb66-7"><a href="rmarkdown-document.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">df_print</span><span class="kw">:</span><span class="at"> kable</span></span>
<span id="cb66-8"><a href="rmarkdown-document.html#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-code-highlight" class="section level4" number="3.2.3.4">
<h4><span class="header-section-number">3.2.3.4</span> 代码高亮</h4>
<p>与 HTML 文档相同，这里可用 <code>highlight</code> 参数配置代码高亮的样式（参见 <a href="#appearance-and-style"><strong>??</strong></a> 部分内容）。例如：</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb67-1"><a href="rmarkdown-document.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb67-2"><a href="rmarkdown-document.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;五一劳动节加班三倍工资&quot;</span></span>
<span id="cb67-3"><a href="rmarkdown-document.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb67-4"><a href="rmarkdown-document.html#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;2021年5月1日&quot;</span></span>
<span id="cb67-5"><a href="rmarkdown-document.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb67-6"><a href="rmarkdown-document.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="at">  pdf_document：</span></span>
<span id="cb67-7"><a href="rmarkdown-document.html#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">highlight</span><span class="kw">:</span><span class="at"> tango</span></span>
<span id="cb67-8"><a href="rmarkdown-document.html#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
</div>
<div id="pdf-latex" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> LaTeX 选项</h3>
<p>很多 LaTeX 的配置，可以通过头部 YAML 的设定传递给 PDF 文档。</p>
<div id="pdf-includes" class="section level4" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> 通用文档部件</h4>
<p>一个 LaTeX 文档的结构大概是这样子：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb68-1"><a href="rmarkdown-document.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="bu">\documentclass</span>{<span class="ex">article</span>}</span>
<span id="cb68-2"><a href="rmarkdown-document.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co">% 序言/preamble</span></span>
<span id="cb68-3"><a href="rmarkdown-document.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="kw">\begin</span>{<span class="ex">document</span>}</span>
<span id="cb68-4"><a href="rmarkdown-document.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 主体/body</span></span>
<span id="cb68-5"><a href="rmarkdown-document.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="kw">\end</span>{<span class="ex">document</span>}</span></code></pre></div>
<p>在这个文档中，首先通过 <code>\documentclass{}</code> 指定了文档的类，然后在序言部分（<code>preamble</code>）导入一些 LaTeX 的包（组件）和进行必要的设置，接下来在 <code>\begin{document}</code> 后开始文档的主体内容。
一个 R Markdown 文档基本上都是在配置主体部分（<code>body</code>）的内容。</p>
<p>如果需要在序言部分加入一些内容，则可以使用 <code>includes</code> 选项。该选项包括 3 个
部分：<code>in_header</code>，<code>before_body</code> 和 <code>after_body</code>。每一个都支持一个或多个文件路径。
<code>in_header</code> 指定文件的内容将会被添加到序言部分，<code>before_body</code> 和 <code>after_body</code> 指定文件的内容会分别被添加到文档主体的前面和后面。</p>
<p>举例来说，下面的一个小技巧可以将正文中的链接地址以脚注的形式显示在 PDF 文档中，
这对于打印出来的文本而言，避免了无法看到链接地址的尴尬。将这几行代码保存为 <code>tex</code> 文件，
导入到序言部分，就可以实现这一功能。</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode tex"><code class="sourceCode latex"><span id="cb69-1"><a href="rmarkdown-document.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">% 在添加脚注前先保存 \href 的值</span></span>
<span id="cb69-2"><a href="rmarkdown-document.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co">% \let\oldhref\href</span></span>
<span id="cb69-3"><a href="rmarkdown-document.html#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">\renewcommand</span>{<span class="ex">\href</span>}[2]{#2<span class="fu">\footnote</span>{<span class="fu">\url</span>{#1}}}</span></code></pre></div>
<p>如果保存的文件名为 <code>preamble.tex</code> 则可以通过下面的形式将其添加到所有的 PDF 页面中。</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb70-1"><a href="rmarkdown-document.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb70-2"><a href="rmarkdown-document.html#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb70-3"><a href="rmarkdown-document.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">includes</span><span class="kw">:</span></span>
<span id="cb70-4"><a href="rmarkdown-document.html#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">in_header</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;preamble.tex&quot;</span></span></code></pre></div>
<p>不过，Pandoc 默认的 LaTeX 模板中已经内嵌了这一用法，所以实际上可以直接设置 <code>links-as-notes</code> 为 <code>true</code> 即可。</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb71-1"><a href="rmarkdown-document.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb71-2"><a href="rmarkdown-document.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb71-3"><a href="rmarkdown-document.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">links-as-notes</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<p>在本书的 PDF 版本中，就使用了这种方法来添加页眉、页脚等内容。</p>
</div>
<div id="pdf-template" class="section level4" number="3.2.4.2">
<h4><span class="header-section-number">3.2.4.2</span> 选择 LaTeX 模板</h4>
<p>通过 <code>template</code> 可以指定输出 PDF 文档时采用的 LaTeX 模板。</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb72-1"><a href="rmarkdown-document.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb72-2"><a href="rmarkdown-document.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb72-3"><a href="rmarkdown-document.html#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb72-4"><a href="rmarkdown-document.html#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">template</span><span class="kw">:</span><span class="at"> quarterly-report.tex</span></span>
<span id="cb72-5"><a href="rmarkdown-document.html#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-template-setting" class="section level4" number="3.2.4.3">
<h4><span class="header-section-number">3.2.4.3</span> 配置 LaTeX 模板的参数</h4>
<p>每个 LaTeX 模板会有很多参数，用来指定文档的语言、字体、文字大小、页边距等内容。
表 <a href="rmarkdown-document.html#tab:latex-vars">3.4</a> 列示了常见的一些参数，完整的参数则可以在 <a href="https://pandoc.org/MANUAL.html#variables-for-latex">Pandoc 手册</a> 中查看。</p>
<table>
<caption><span id="tab:latex-vars">表 3.4: </span> 在 YAML 配置中可用的 LaTeX 变量</caption>
<colgroup>
<col width="16%" />
<col width="83%" />
</colgroup>
<thead>
<tr class="header">
<th>变量名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>lang</td>
<td>文档的语言代码</td>
</tr>
<tr class="even">
<td>fontsize</td>
<td>文字大小 （如 <code>10pt</code>，<code>11pt</code>，<code>12pt</code>）</td>
</tr>
<tr class="odd">
<td>documentclass</td>
<td>LaTeX 文档类型 （如 <code>article</code>）</td>
</tr>
<tr class="even">
<td>classoption</td>
<td>文档类型的选项（如 <code>oneside</code>）</td>
</tr>
<tr class="odd">
<td>geometry</td>
<td>页边距（如 <code>margin=1in</code>）</td>
</tr>
<tr class="even">
<td>mainfont, sansfont, monofont, mathfont</td>
<td>文档的字体（仅在使用 <code>xelatex</code> 和 <code>lualatex</code> 时可用）</td>
</tr>
<tr class="odd">
<td>linkcolor, urlcolor, citecolor</td>
<td>内部链接、外部链接和引文链接的颜色</td>
</tr>
</tbody>
</table>
<p>使用这些参数的时候，需要将其写在 YAML 头信息的最顶层，例如：</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb73-1"><a href="rmarkdown-document.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb73-2"><a href="rmarkdown-document.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;这是一个PDF&quot;</span></span>
<span id="cb73-3"><a href="rmarkdown-document.html#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> pdf_document</span></span>
<span id="cb73-4"><a href="rmarkdown-document.html#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fontsize</span><span class="kw">:</span><span class="at"> 11pt</span></span>
<span id="cb73-5"><a href="rmarkdown-document.html#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">geometry</span><span class="kw">:</span><span class="at"> margin=1in</span></span>
<span id="cb73-6"><a href="rmarkdown-document.html#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
</div>
<div id="pdf-latex-citation" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> 使用 LaTeX 包处理参考文献</h3>
<p>默认情况，文档中的引用使用 <code>pandoc-citeproc</code> 来处理，这种方法不限制输出文档的类型，适用性最广。
不过，在 LaTeX 系统中也有非常优秀的引用工具，例如 <code>natbib</code> 和 <code>biblatex</code>。
如果想使用它们，只需要在 <code>citation_package</code> 中指定即可<a href="references.html#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>。</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb74-1"><a href="rmarkdown-document.html#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb74-2"><a href="rmarkdown-document.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb74-3"><a href="rmarkdown-document.html#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb74-4"><a href="rmarkdown-document.html#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">citation_package</span><span class="kw">:</span><span class="at"> natbib</span></span>
<span id="cb74-5"><a href="rmarkdown-document.html#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-latex-engine" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> LaTeX 的渲染引擎</h3>
<p>PDF 文档默认通过 <code>pdflatex</code> 渲染。其它可用的引擎还包括 <code>pdflatex</code>，<code>xelatex</code>和<code>lualatex</code>等。
不同的引擎可通过 <code>latex_engine</code> 来选择。
一般情况下，使用 <code>xelatex</code> 或者 <code>lualatex</code> 的主要理由是它们对 Unicode 的支持更加优秀，以及它们更容易使用系统中已有的字体<a href="references.html#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>。</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb75-1"><a href="rmarkdown-document.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb75-2"><a href="rmarkdown-document.html#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb75-3"><a href="rmarkdown-document.html#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb75-4"><a href="rmarkdown-document.html#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">latex_engine</span><span class="kw">:</span><span class="at"> xelatex</span></span>
<span id="cb75-5"><a href="rmarkdown-document.html#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="pdf-keep-tex" class="section level3" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> 保留生成的 TeX 中间文件</h3>
<p>R Markdown 首先转化为 TeX 文件，然后才能转化为 PDF 文档。默认情况下，PDF 文档生成后，TeX 文档将会被删除。通过改变 <code>keep_tex</code> 的设置，可以保留生成的 TeX 文档（可用于向某些杂志投稿）。</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb76-1"><a href="rmarkdown-document.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb76-2"><a href="rmarkdown-document.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb76-3"><a href="rmarkdown-document.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf_document</span><span class="kw">:</span></span>
<span id="cb76-4"><a href="rmarkdown-document.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">keep_tex</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb76-5"><a href="rmarkdown-document.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
</div>
<div id="rmarkdown-ppt" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> PPT 幻灯片</h2>
<p>本章讲述使用 R Markdown 生成幻灯片（俗称“PPT”）的技巧。</p>
<p>幻灯片可以被看做一个精简的文档，它的基本单位是单独的一页，每页含有标题、内容和其它元素。R Markdown 文档可以直接输出为 HTML 或者 PDF 格式的幻灯片，并且可以通过额外的软件包丰富幻灯片的具体样式。这一部分将首先介绍 R Markdown 基础幻灯片的使用，然后介绍如何使用 <strong>xaringan</strong> 软件包创建更加具有科技感的幻灯片。</p>
<p>使用基础幻灯片不需要安装额外的包。</p>
<p>R Markdown 支持 4 种不同样式的幻灯片，分别是 <strong>ioslides</strong>，<strong>Slidy</strong>，<strong>Beamer</strong> 和 <strong>PowerPoint</strong>。
在 RStudio 中，可以通过菜单中的 “New File -&gt; R Markdown…” 打开如下一个窗口（图 <a href="rmarkdown-document.html#fig:rmd-presentation-popup">3.9</a>），然后选择 “OK” 后即可新建一个幻灯片。</p>
<p>以上介绍的 5 种幻灯片格式中（含 <strong>xaringan</strong>），<strong>ioslides</strong>、<strong>Slidy</strong> 和 <strong>xaringan</strong> 都是基于 HTML 技术实现的（文档扩展名为 <code>.html</code>），<strong>Beamer</strong> 是基于 LaTeX 实现的（文档扩展名为 <code>.pdf</code>），PowerPoint 则是基于微软 Office 的文档格式实现的（文档扩展名为 <code>.pptx</code>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rmd-presentation-popup"></span>
<img src="images/rmd-presentation-popup.png" alt="新建 R Markdown 时可选的幻灯片格式" width="529" />
<p class="caption">
图 3.9: 新建 R Markdown 时可选的幻灯片格式
</p>
</div>
<div id="ioslides-presentation" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> ioslides 幻灯片</h3>
<p>首先看 ioslides 幻灯片。新建的幻灯片，也是一个 R Markdown 文档，在它的头部 YAML 中，
<code>output: ioslides_presentation</code> 设定了其输出格式。</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="rmarkdown-document.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/ioslides-presentation.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb78-1"><a href="rmarkdown-document.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb78-2"><a href="rmarkdown-document.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;Ioslides Presentation&quot;</span></span>
<span id="cb78-3"><a href="rmarkdown-document.html#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;张三&quot;</span></span>
<span id="cb78-4"><a href="rmarkdown-document.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2021/4/28&quot;</span></span>
<span id="cb78-5"><a href="rmarkdown-document.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> ioslides_presentation</span></span>
<span id="cb78-6"><a href="rmarkdown-document.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb78-7"><a href="rmarkdown-document.html#cb78-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-8"><a href="rmarkdown-document.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb78-9"><a href="rmarkdown-document.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = FALSE)</span></span>
<span id="cb78-10"><a href="rmarkdown-document.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-11"><a href="rmarkdown-document.html#cb78-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-12"><a href="rmarkdown-document.html#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## R Markdown</span></span>
<span id="cb78-13"><a href="rmarkdown-document.html#cb78-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-14"><a href="rmarkdown-document.html#cb78-14" aria-hidden="true" tabindex="-1"></a>This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <span class="ot">&lt;http://rmarkdown.rstudio.com&gt;</span>.</span>
<span id="cb78-15"><a href="rmarkdown-document.html#cb78-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-16"><a href="rmarkdown-document.html#cb78-16" aria-hidden="true" tabindex="-1"></a>When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.</span>
<span id="cb78-17"><a href="rmarkdown-document.html#cb78-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-18"><a href="rmarkdown-document.html#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Bullets</span></span>
<span id="cb78-19"><a href="rmarkdown-document.html#cb78-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-20"><a href="rmarkdown-document.html#cb78-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 1</span>
<span id="cb78-21"><a href="rmarkdown-document.html#cb78-21" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 2</span>
<span id="cb78-22"><a href="rmarkdown-document.html#cb78-22" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 3</span>
<span id="cb78-23"><a href="rmarkdown-document.html#cb78-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-24"><a href="rmarkdown-document.html#cb78-24" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with R Output</span></span>
<span id="cb78-25"><a href="rmarkdown-document.html#cb78-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-26"><a href="rmarkdown-document.html#cb78-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cars, echo = TRUE}</span></span>
<span id="cb78-27"><a href="rmarkdown-document.html#cb78-27" aria-hidden="true" tabindex="-1"></a><span class="in">summary(cars)</span></span>
<span id="cb78-28"><a href="rmarkdown-document.html#cb78-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb78-29"><a href="rmarkdown-document.html#cb78-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-30"><a href="rmarkdown-document.html#cb78-30" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Plot</span></span>
<span id="cb78-31"><a href="rmarkdown-document.html#cb78-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-32"><a href="rmarkdown-document.html#cb78-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pressure}</span></span>
<span id="cb78-33"><a href="rmarkdown-document.html#cb78-33" aria-hidden="true" tabindex="-1"></a><span class="in">plot(pressure)</span></span>
<span id="cb78-34"><a href="rmarkdown-document.html#cb78-34" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>这个文档经过编译后，得到的幻灯片如图 <a href="rmarkdown-document.html#fig:ioslides-presentation-screenshot">3.10</a> 所示。
由此可见，在 R Markdown 幻灯片中，源文件中的 <code>##</code> 代表一张幻灯片的开头和标题，
<code>##</code> 后面的内容是这一张幻灯片中的内容。R Markdown 会自动将命令和输出的内容添加到幻灯片中。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ioslides-presentation-screenshot"></span>
<img src="examples/ioslides-presentation-screenshot.png" alt="新建文件编译后生成的 ioslides 幻灯片" width="552" />
<p class="caption">
图 3.10: 新建文件编译后生成的 ioslides 幻灯片
</p>
</div>
<p>除了 <code>##</code>，使用 <code>---</code> 也能开始一张新的幻灯片，并最终生成一个不带标题的幻灯片。</p>
<p>另外，还可以通过 “|” 来为幻灯片添加副标题。例如下面的例子：</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb79-1"><a href="rmarkdown-document.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 起床 | 今天准备干点什么呢</span></span></code></pre></div>
<div id="ioslides-shortcut" class="section level4" number="3.3.1.1">
<h4><span class="header-section-number">3.3.1.1</span> 使用快捷键控制显示模式</h4>
<p>ioslides 幻灯片支持以下快捷键更改播放时的模式：</p>
<ul>
<li><code>'f'</code>：全屏模式，幻灯片将会占满屏幕。</li>
<li><code>'w'</code>：宽屏模式，幻灯片将会以宽屏模式显示。</li>
<li><code>'o'</code>：预览模式，幻灯片将会缩小并同时显示多个。</li>
<li><code>'h'</code>：启用代码高亮模式，突出显示指定的几行代码。具体使用方法下面介绍。</li>
<li><code>'p'</code>：显示演讲者备注，演讲者备注需要以指定的方式添加。具体使用方法下面介绍。</li>
</ul>
<p>按下 <code>'Esc'</code> 键将会退出以上所有模式。</p>
</div>
<div id="ioslides-incremental" class="section level4" number="3.3.1.2">
<h4><span class="header-section-number">3.3.1.2</span> 依次显示列表中的项目</h4>
<p>使用 <code>incremental</code> 选项可以控制列表项目依次出现，相当于添加了简单的播放动画。</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="rmarkdown-document.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/ioslides-presentation-increment-bullets.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb81-1"><a href="rmarkdown-document.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb81-2"><a href="rmarkdown-document.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb81-3"><a href="rmarkdown-document.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="co">  ioslides_presentation</span></span>
<span id="cb81-4"><a href="rmarkdown-document.html#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb81-5"><a href="rmarkdown-document.html#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="rmarkdown-document.html#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="fu"># ioslides 幻灯片 {data-background=ioslides-presentation.png data-background-size=cover}</span></span>
<span id="cb81-7"><a href="rmarkdown-document.html#cb81-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-8"><a href="rmarkdown-document.html#cb81-8" aria-hidden="true" tabindex="-1"></a>一级标题产生了一个背景为灰色的幻灯片，我们为它加入了背景图片。</span>
<span id="cb81-9"><a href="rmarkdown-document.html#cb81-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-10"><a href="rmarkdown-document.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="fu">## 列表项的内容 | 这里加入了一个副标题</span></span>
<span id="cb81-11"><a href="rmarkdown-document.html#cb81-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-12"><a href="rmarkdown-document.html#cb81-12" aria-hidden="true" tabindex="-1"></a>默认情况下，整个幻灯片将会同时显示。</span>
<span id="cb81-13"><a href="rmarkdown-document.html#cb81-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-14"><a href="rmarkdown-document.html#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 1</span>
<span id="cb81-15"><a href="rmarkdown-document.html#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 2</span>
<span id="cb81-16"><a href="rmarkdown-document.html#cb81-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 3</span>
<span id="cb81-17"><a href="rmarkdown-document.html#cb81-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-18"><a href="rmarkdown-document.html#cb81-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-19"><a href="rmarkdown-document.html#cb81-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-20"><a href="rmarkdown-document.html#cb81-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## 列表项的内容 {.smaller}</span></span>
<span id="cb81-21"><a href="rmarkdown-document.html#cb81-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-22"><a href="rmarkdown-document.html#cb81-22" aria-hidden="true" tabindex="-1"></a>但是 <span class="in">`&gt;`</span> 可以作用于列表，这样以下内容将会在播放时依次出现（点击鼠标或者使用键盘）。</span>
<span id="cb81-23"><a href="rmarkdown-document.html#cb81-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-24"><a href="rmarkdown-document.html#cb81-24" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - Bullet 1</span></span>
<span id="cb81-25"><a href="rmarkdown-document.html#cb81-25" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - Bullet 2</span></span>
<span id="cb81-26"><a href="rmarkdown-document.html#cb81-26" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - Bullet 3</span></span>
<span id="cb81-27"><a href="rmarkdown-document.html#cb81-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-28"><a href="rmarkdown-document.html#cb81-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## 下面的内容将会依次显示 {.build}</span></span>
<span id="cb81-29"><a href="rmarkdown-document.html#cb81-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-30"><a href="rmarkdown-document.html#cb81-30" aria-hidden="true" tabindex="-1"></a>幻灯片标题后面的 <span class="in">`{.build}`</span> 将会为这张幻灯片添加一个效果。首先显示这一段话，然后才显示下面的列表。</span>
<span id="cb81-31"><a href="rmarkdown-document.html#cb81-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-32"><a href="rmarkdown-document.html#cb81-32" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>这个列表中的项目并不会依次显示</span>
<span id="cb81-33"><a href="rmarkdown-document.html#cb81-33" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>而是会作为一个整体出现</span>
<span id="cb81-34"><a href="rmarkdown-document.html#cb81-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-35"><a href="rmarkdown-document.html#cb81-35" aria-hidden="true" tabindex="-1"></a>接下来的列表，因为使用了 <span class="in">`&gt;`</span> 方法，其中的项目则可以依次出现。</span>
<span id="cb81-36"><a href="rmarkdown-document.html#cb81-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-37"><a href="rmarkdown-document.html#cb81-37" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 先出现这个</span></span>
<span id="cb81-38"><a href="rmarkdown-document.html#cb81-38" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 然后才是这个</span></span>
<span id="cb81-39"><a href="rmarkdown-document.html#cb81-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-40"><a href="rmarkdown-document.html#cb81-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## Future Steps {#future-steps .emphasized}</span></span>
<span id="cb81-41"><a href="rmarkdown-document.html#cb81-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-42"><a href="rmarkdown-document.html#cb81-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-43"><a href="rmarkdown-document.html#cb81-43" aria-hidden="true" tabindex="-1"></a>在 <span class="in">`style.css`</span> 中，添加下列定义。</span>
<span id="cb81-44"><a href="rmarkdown-document.html#cb81-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-45"><a href="rmarkdown-document.html#cb81-45" aria-hidden="true" tabindex="-1"></a><span class="in">```{css}</span></span>
<span id="cb81-46"><a href="rmarkdown-document.html#cb81-46" aria-hidden="true" tabindex="-1"></a><span class="in">#future-steps {</span></span>
<span id="cb81-47"><a href="rmarkdown-document.html#cb81-47" aria-hidden="true" tabindex="-1"></a><span class="in">  color: blue;</span></span>
<span id="cb81-48"><a href="rmarkdown-document.html#cb81-48" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb81-49"><a href="rmarkdown-document.html#cb81-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-50"><a href="rmarkdown-document.html#cb81-50" aria-hidden="true" tabindex="-1"></a><span class="in">.emphasized {</span></span>
<span id="cb81-51"><a href="rmarkdown-document.html#cb81-51" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 1.5em;</span></span>
<span id="cb81-52"><a href="rmarkdown-document.html#cb81-52" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb81-53"><a href="rmarkdown-document.html#cb81-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb81-54"><a href="rmarkdown-document.html#cb81-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-55"><a href="rmarkdown-document.html#cb81-55" aria-hidden="true" tabindex="-1"></a>这几个字特别重要。 </span>
<span id="cb81-56"><a href="rmarkdown-document.html#cb81-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-57"><a href="rmarkdown-document.html#cb81-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-58"><a href="rmarkdown-document.html#cb81-58" aria-hidden="true" tabindex="-1"></a><span class="fu">## 代码高亮</span></span>
<span id="cb81-59"><a href="rmarkdown-document.html#cb81-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-60"><a href="rmarkdown-document.html#cb81-60" aria-hidden="true" tabindex="-1"></a>大家看，这两步运算非常关键。</span>
<span id="cb81-61"><a href="rmarkdown-document.html#cb81-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-62"><a href="rmarkdown-document.html#cb81-62" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb81-63"><a href="rmarkdown-document.html#cb81-63" aria-hidden="true" tabindex="-1"></a><span class="in">cat(&#39;接下来进入计算过程&#39;)</span></span>
<span id="cb81-64"><a href="rmarkdown-document.html#cb81-64" aria-hidden="true" tabindex="-1"></a><span class="in">### &lt;b&gt;</span></span>
<span id="cb81-65"><a href="rmarkdown-document.html#cb81-65" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 10</span></span>
<span id="cb81-66"><a href="rmarkdown-document.html#cb81-66" aria-hidden="true" tabindex="-1"></a><span class="in">y &lt;- x * 2</span></span>
<span id="cb81-67"><a href="rmarkdown-document.html#cb81-67" aria-hidden="true" tabindex="-1"></a><span class="in">### &lt;/b&gt;</span></span>
<span id="cb81-68"><a href="rmarkdown-document.html#cb81-68" aria-hidden="true" tabindex="-1"></a><span class="in">cat(&#39;计算完毕&#39;)</span></span>
<span id="cb81-69"><a href="rmarkdown-document.html#cb81-69" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>为所有幻灯片添加这样的效果有时候显得有点过分，所以 R Markdown 还提供了针对个别幻灯片
添加依次呈现效果的方法，即在前面加上一个 <code>&gt;</code> 号。</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb82-1"><a href="rmarkdown-document.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 项目 1</span></span>
<span id="cb82-2"><a href="rmarkdown-document.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 项目 2</span></span></code></pre></div>
</div>
<div id="ioslides-widescreen" class="section level4" number="3.3.1.3">
<h4><span class="header-section-number">3.3.1.3</span> 幻灯片适配宽屏幕显示器</h4>
<p>在配置中使用 <code>widescreen</code> 可以将幻灯片样式改为宽屏。</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb83-1"><a href="rmarkdown-document.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb83-2"><a href="rmarkdown-document.html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb83-3"><a href="rmarkdown-document.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ioslides_presentation</span><span class="kw">:</span></span>
<span id="cb83-4"><a href="rmarkdown-document.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">widescreen</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb83-5"><a href="rmarkdown-document.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<!--- 
如果需要缩小部分文字，则可以使用下面的方法。

```markdown
## 这个标题将会小一点 {.smaller}
```

这种以大括号的形式在 R Markdown 标题上附加额外属性的方法是一种通用的方法。
其中的 `.smaller` 实际上是预定义的 CSS class。
-->
</div>
<div id="ioslides-transition" class="section level4" number="3.3.1.4">
<h4><span class="header-section-number">3.3.1.4</span> 幻灯片播放速度</h4>
<p>ioslides 幻灯片翻页时会有淡入淡出的效果，使用 <code>transition</code> 可以控制效果的时长。
<code>transition</code> 设置为 <code>"default"</code>，<code>"slower"</code>，<code>"faster"</code>，或者一个以秒为单位的数字（如<code>0.5</code>）均可。如下所示：</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb84-1"><a href="rmarkdown-document.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb84-2"><a href="rmarkdown-document.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb84-3"><a href="rmarkdown-document.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ioslides_presentation</span><span class="kw">:</span></span>
<span id="cb84-4"><a href="rmarkdown-document.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">transition</span><span class="kw">:</span><span class="at"> slower</span></span>
<span id="cb84-5"><a href="rmarkdown-document.html#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="ioslides-build" class="section level4" number="3.3.1.5">
<h4><span class="header-section-number">3.3.1.5</span> 依次显示幻灯片元素</h4>
<p>每一张幻灯片的标题都可以加上 <code>.build</code> 属性，这样幻灯片的内容在播放的时候将会一块块的依次显示出来。
这一点与 <code>incremental</code> 属性有些类似，不过后者针对的是列表中的项目，而前者针对的是
一段话，一整个列表。</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb85-1"><a href="rmarkdown-document.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 下面的内容将会依次显示 {.build}</span></span>
<span id="cb85-2"><a href="rmarkdown-document.html#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="rmarkdown-document.html#cb85-3" aria-hidden="true" tabindex="-1"></a>首先显示这一段话，然后才显示下面的列表。</span>
<span id="cb85-4"><a href="rmarkdown-document.html#cb85-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a href="rmarkdown-document.html#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>这个列表中的项目并不会依次显示</span>
<span id="cb85-6"><a href="rmarkdown-document.html#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>而是会作为一个整体出现</span>
<span id="cb85-7"><a href="rmarkdown-document.html#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="rmarkdown-document.html#cb85-8" aria-hidden="true" tabindex="-1"></a>接下来的列表，因为使用了 <span class="in">`&gt;`</span> 方法，其中的项目则可以依次出现。</span>
<span id="cb85-9"><a href="rmarkdown-document.html#cb85-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-10"><a href="rmarkdown-document.html#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 先出现这个</span></span>
<span id="cb85-11"><a href="rmarkdown-document.html#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; - 然后才是这个</span></span></code></pre></div>
</div>
<div id="ioslides-background" class="section level4" number="3.3.1.6">
<h4><span class="header-section-number">3.3.1.6</span> 设置幻灯片的背景图像</h4>
<p>幻灯片中可以使用 <code>data-background</code> 添加背景图片，并使用其它的相关属性来
配置背景图片的行为，如 <code>data-background-size</code>， <code>data-background-position</code>，
<code>data-background-repeat</code> 等等。</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb86-1"><a href="rmarkdown-document.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 添加背景图像 {data-background=foo.png data-background-size=cover}</span></span></code></pre></div>
<p>这些配置来自于 CSS 中图片的属性，<code>background</code>，<code>background-size</code>，<code>background-position</code>，
以及 <code>background-repeat</code> 等。用户可能需要对 CSS 有所了解，才能准确把握这些属性的用途。</p>
</div>
<div id="ioslides-style-css" class="section level4" number="3.3.1.7">
<h4><span class="header-section-number">3.3.1.7</span> 使用自定义 CSS</h4>
<p>因为 ioslides 幻灯片本质上是一个 HTML 文档，所以可以像 HTML 文档一样通过自定义 CSS 来设定幻灯片中不同元素的样式。</p>
<p>要在幻灯片中附加一个自定义样式表，可以使用 <code>css</code> 属性。</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb87-1"><a href="rmarkdown-document.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb87-2"><a href="rmarkdown-document.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb87-3"><a href="rmarkdown-document.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ioslides_presentation</span><span class="kw">:</span></span>
<span id="cb87-4"><a href="rmarkdown-document.html#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span><span class="at"> styles.css</span></span>
<span id="cb87-5"><a href="rmarkdown-document.html#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>为某一张幻灯片中添加样式的方式，也是通过大括号语法完成的。</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb88-1"><a href="rmarkdown-document.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## Future Steps {#future-steps .emphasized}</span></span>
<span id="cb88-2"><a href="rmarkdown-document.html#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="rmarkdown-document.html#cb88-3" aria-hidden="true" tabindex="-1"></a>这张幻灯片中的所有元素将会应用 CSS 定义的样式。</span></code></pre></div>
<p>在 <code>style.css</code> 中，添加下列定义。</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb89-1"><a href="rmarkdown-document.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#future-steps</span> {</span>
<span id="cb89-2"><a href="rmarkdown-document.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="cn">blue</span><span class="op">;</span></span>
<span id="cb89-3"><a href="rmarkdown-document.html#cb89-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-4"><a href="rmarkdown-document.html#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="rmarkdown-document.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">.emphasized</span> {</span>
<span id="cb89-6"><a href="rmarkdown-document.html#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-size</span>: <span class="dv">1.2</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb89-7"><a href="rmarkdown-document.html#cb89-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>这种方式并不会影响幻灯片的标题，而是会影响这一张幻灯片中其它内容。
最终，这张幻灯片中所有的文字都会显示为蓝色、120% 的大字号。</p>
</div>
<div id="ioslides-code-outline" class="section level4" number="3.3.1.8">
<h4><span class="header-section-number">3.3.1.8</span> 突出显示部分代码</h4>
<p>为了强调关键代码的作用，可以使用特定的注释来高亮它们。例如：</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="rmarkdown-document.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="do">### &lt;b&gt;</span></span>
<span id="cb90-2"><a href="rmarkdown-document.html#cb90-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb90-3"><a href="rmarkdown-document.html#cb90-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb90-4"><a href="rmarkdown-document.html#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="do">### &lt;/b&gt;</span></span></code></pre></div>
<p>在播放时，当按下键盘上的快捷键 <code>'h'</code> 时，高亮的代码将会突出显示，其它部分的代码则会变淡。</p>
</div>
<div id="ioslides-logo" class="section level4" number="3.3.1.9">
<h4><span class="header-section-number">3.3.1.9</span> 添加 LOGO</h4>
<p>使用 <code>logo</code> 可以为幻灯片添加一个 LOGO 图片。默认情况下，这个 LOGO 将会以 85 x 85
像素显示在标题幻灯片上，并且缩小后显示在后面每一张幻灯片的左下角。</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb91-1"><a href="rmarkdown-document.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb91-2"><a href="rmarkdown-document.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb91-3"><a href="rmarkdown-document.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">ioslides_presentation</span><span class="kw">:</span></span>
<span id="cb91-4"><a href="rmarkdown-document.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">logo</span><span class="kw">:</span><span class="at"> logo.png</span></span>
<span id="cb91-5"><a href="rmarkdown-document.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>使用自定义的 CSS 可以修改首页 LOGO 的显示效果。例如：</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb92-1"><a href="rmarkdown-document.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.gdbar</span> img {</span>
<span id="cb92-2"><a href="rmarkdown-document.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span>: <span class="dv">300</span><span class="dt">px</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb92-3"><a href="rmarkdown-document.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span>: <span class="dv">150</span><span class="dt">px</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb92-4"><a href="rmarkdown-document.html#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">margin</span>: <span class="dv">8</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb92-5"><a href="rmarkdown-document.html#cb92-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-6"><a href="rmarkdown-document.html#cb92-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-7"><a href="rmarkdown-document.html#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="fu">.gdbar</span> {</span>
<span id="cb92-8"><a href="rmarkdown-document.html#cb92-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span>: <span class="dv">400</span><span class="dt">px</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb92-9"><a href="rmarkdown-document.html#cb92-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span>: <span class="dv">170</span><span class="dt">px</span> <span class="at">!important</span><span class="op">;</span></span>
<span id="cb92-10"><a href="rmarkdown-document.html#cb92-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>左下角的 LOGO 显示样式同样可以使用 CSS 定义。例如：</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb93-1"><a href="rmarkdown-document.html#cb93-1" aria-hidden="true" tabindex="-1"></a>slides <span class="op">&gt;</span> slide<span class="in">:not(</span><span class="fu">.nobackground</span><span class="in">):before</span> {</span>
<span id="cb93-2"><a href="rmarkdown-document.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">width</span>: <span class="dv">150</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb93-3"><a href="rmarkdown-document.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">height</span>: <span class="dv">75</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb93-4"><a href="rmarkdown-document.html#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background-size</span>: <span class="dv">150</span><span class="dt">px</span> <span class="dv">75</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb93-5"><a href="rmarkdown-document.html#cb93-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="ioslides-layout" class="section level4" number="3.3.1.10">
<h4><span class="header-section-number">3.3.1.10</span> 幻灯片的布局</h4>
<p>如果想居中显示幻灯片的内容，可以在标题后面加入 <code>.flexbox</code> 和 <code>.vcenter</code> 的属性。</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb94-1"><a href="rmarkdown-document.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 统统居中显示 {.flexbox .vcenter}</span></span></code></pre></div>
<p>使用 CSS class 的方法为美化幻灯片非常灵活。但是在标题中应用样式不能精确到一张
幻灯片中的某个具体元素。因此要实现幻灯片的复杂布局，只能使用类似 HTML 的语法。</p>
<p>居中显示某一段文字，可以采用下面的语法。</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb95-1"><a href="rmarkdown-document.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;centered&quot;</span><span class="kw">&gt;</span></span>
<span id="cb95-2"><a href="rmarkdown-document.html#cb95-2" aria-hidden="true" tabindex="-1"></a>这部分文本将会居中显示。</span>
<span id="cb95-3"><a href="rmarkdown-document.html#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>如果要以左右两栏的形式展示某一张幻灯片中的内容，可以使用下面的语法<a href="references.html#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>。</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb96-1"><a href="rmarkdown-document.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;columns-2&quot;</span><span class="kw">&gt;</span></span>
<span id="cb96-2"><a href="rmarkdown-document.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  ![](image.png)</span>
<span id="cb96-3"><a href="rmarkdown-document.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="rmarkdown-document.html#cb96-4" aria-hidden="true" tabindex="-1"></a>  - 项目 1</span>
<span id="cb96-5"><a href="rmarkdown-document.html#cb96-5" aria-hidden="true" tabindex="-1"></a>  - 项目 2</span>
<span id="cb96-6"><a href="rmarkdown-document.html#cb96-6" aria-hidden="true" tabindex="-1"></a>  - 项目 3</span>
<span id="cb96-7"><a href="rmarkdown-document.html#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
</div>
<div id="ioslides-font-color" class="section level4" number="3.3.1.11">
<h4><span class="header-section-number">3.3.1.11</span> 文字颜色</h4>
<p>使用 HTML 语法还可以修改其它的属性，比如文字的颜色。只需要将颜色以 CSS 类的形式赋值给元素即可。例如：</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb97-1"><a href="rmarkdown-document.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;div</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;red2&quot;</span><span class="kw">&gt;</span></span>
<span id="cb97-2"><a href="rmarkdown-document.html#cb97-2" aria-hidden="true" tabindex="-1"></a>这部分文本将显示为红色。</span>
<span id="cb97-3"><a href="rmarkdown-document.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/div&gt;</span></span></code></pre></div>
<p>可用的颜色包括 <code>red</code>，<code>blue</code>，<code>green</code>，<code>yellow</code>，<code>grey</code>等，以及它们的变体如
<code>red2</code>，<code>blue3</code>，<code>green4</code>等等</p>
<!--- 不可用
#### 放映模式
----->
</div>
<div id="ioslides-print-ppt" class="section level4" number="3.3.1.12">
<h4><span class="header-section-number">3.3.1.12</span> 打印幻灯片</h4>
<p>打印幻灯片可以在浏览器中进行，目前保真度最高的浏览器可能是 Google Chrome。
此外，使用 Chrome 中 “另存为 PDF” 的功能，还可以将幻灯片保存为一份 PDF 文档。</p>
<p>在 R 语言终端，使用 <code>pagedown::chrome_print()</code> 函数也可以完成这一操作（便于自动化和批处理）。
不过需要事先安装 <code>pagedown</code> 软件包<span class="citation">(<a href="#ref-R-pagedown" role="doc-biblioref"><strong>R-pagedown?</strong></a>)</span>。</p>
</div>
<div id="ioslides-other-features" class="section level4" number="3.3.1.13">
<h4><span class="header-section-number">3.3.1.13</span> 其它功能</h4>
<p>ioslides 幻灯片中，通用的 R Markdown 语法通常可用，包括 HTML 文档输出中的配置，
图片的属性设置，数学公式，数据库的打印，中间文件的保留，外部文档的引入等等。</p>
</div>
</div>
<div id="slidy-presentation" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Slidy 幻灯片</h3>
<p><a href="https://www.w3.org/Talks/Tools/Slidy2/">Slidy</a> 是 HTML 幻灯片的另一个规范。
要通过 R Markdown 创建一个 Slidy 幻灯片，只需要将文档输出设为 <code>slidy_presentation</code> 即可。</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="rmarkdown-document.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/slidy-presentation.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb99"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb99-1"><a href="rmarkdown-document.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb99-2"><a href="rmarkdown-document.html#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;Slidy Presentation&quot;</span></span>
<span id="cb99-3"><a href="rmarkdown-document.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;张三&quot;</span></span>
<span id="cb99-4"><a href="rmarkdown-document.html#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2021/4/28&quot;</span></span>
<span id="cb99-5"><a href="rmarkdown-document.html#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb99-6"><a href="rmarkdown-document.html#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co">  slidy_presentation:</span></span>
<span id="cb99-7"><a href="rmarkdown-document.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="co">    font_adjustment: +1</span></span>
<span id="cb99-8"><a href="rmarkdown-document.html#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="co">    footer: &quot;Copyright (c) 2021, Cosname&quot;</span></span>
<span id="cb99-9"><a href="rmarkdown-document.html#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="co">    duration: 45</span></span>
<span id="cb99-10"><a href="rmarkdown-document.html#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb99-11"><a href="rmarkdown-document.html#cb99-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-12"><a href="rmarkdown-document.html#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb99-13"><a href="rmarkdown-document.html#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = FALSE)</span></span>
<span id="cb99-14"><a href="rmarkdown-document.html#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb99-15"><a href="rmarkdown-document.html#cb99-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-16"><a href="rmarkdown-document.html#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## R Markdown {.smaller}</span></span>
<span id="cb99-17"><a href="rmarkdown-document.html#cb99-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-18"><a href="rmarkdown-document.html#cb99-18" aria-hidden="true" tabindex="-1"></a>This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <span class="ot">&lt;http://rmarkdown.rstudio.com&gt;</span>.</span>
<span id="cb99-19"><a href="rmarkdown-document.html#cb99-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-20"><a href="rmarkdown-document.html#cb99-20" aria-hidden="true" tabindex="-1"></a>When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.</span>
<span id="cb99-21"><a href="rmarkdown-document.html#cb99-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-22"><a href="rmarkdown-document.html#cb99-22" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Bullets {.bigger}</span></span>
<span id="cb99-23"><a href="rmarkdown-document.html#cb99-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-24"><a href="rmarkdown-document.html#cb99-24" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 1</span>
<span id="cb99-25"><a href="rmarkdown-document.html#cb99-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 2</span>
<span id="cb99-26"><a href="rmarkdown-document.html#cb99-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 3</span>
<span id="cb99-27"><a href="rmarkdown-document.html#cb99-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-28"><a href="rmarkdown-document.html#cb99-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with R Output</span></span>
<span id="cb99-29"><a href="rmarkdown-document.html#cb99-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-30"><a href="rmarkdown-document.html#cb99-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cars, echo = TRUE}</span></span>
<span id="cb99-31"><a href="rmarkdown-document.html#cb99-31" aria-hidden="true" tabindex="-1"></a><span class="in">summary(cars)</span></span>
<span id="cb99-32"><a href="rmarkdown-document.html#cb99-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb99-33"><a href="rmarkdown-document.html#cb99-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-34"><a href="rmarkdown-document.html#cb99-34" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Plot</span></span>
<span id="cb99-35"><a href="rmarkdown-document.html#cb99-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-36"><a href="rmarkdown-document.html#cb99-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pressure}</span></span>
<span id="cb99-37"><a href="rmarkdown-document.html#cb99-37" aria-hidden="true" tabindex="-1"></a><span class="in">plot(pressure)</span></span>
<span id="cb99-38"><a href="rmarkdown-document.html#cb99-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Slidy 幻灯片的内容设置基本与 ioslides 幻灯片相似，不过其默认样式与之有异。
一份 Slidy 幻灯片大体是这样的（图 <a href="rmarkdown-document.html#fig:slidy-presentation-screen-shot">3.11</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:slidy-presentation-screen-shot"></span>
<img src="examples/slidy-presentation-screenshot.png" alt="Slidy 幻灯片" width="480" />
<p class="caption">
图 3.11: Slidy 幻灯片
</p>
</div>
<div id="slidy-shortcut" class="section level4" number="3.3.2.1">
<h4><span class="header-section-number">3.3.2.1</span> 使用快捷键控制显示模式</h4>
<p>Slidy 中也可以通过快捷键控制显示模式，不过其按键定义与 ioslides 不同。</p>
<ul>
<li><code>'c'</code>：显示幻灯片目录。Slidy 会自动生成目录，默认可以通过点击页脚左下角的 “Contents” 访问。</li>
<li><code>'f'</code>：是否显示页脚的开关。</li>
<li><code>'a'</code>：显示全部幻灯片的开关。</li>
<li><code>'s'</code>：缩小字体大小。</li>
<li><code>'b'</code>：放大字体大小。</li>
</ul>
<!--- Text Size 部分的功能已经不可用 --->
</div>
<div id="slidy-footer" class="section level4" number="3.3.2.2">
<h4><span class="header-section-number">3.3.2.2</span> 设置页脚内容</h4>
<p>在 YAML 配置中使用 <code>footer</code> 可以为幻灯片设置页脚显示的内容。</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb100-1"><a href="rmarkdown-document.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb100-2"><a href="rmarkdown-document.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb100-3"><a href="rmarkdown-document.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">slidy_presentation</span><span class="kw">:</span></span>
<span id="cb100-4"><a href="rmarkdown-document.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">footer</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Copyright (c) 2021, Cosname&quot;</span></span>
<span id="cb100-5"><a href="rmarkdown-document.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>使用 <code>duration</code> 还可以方便的在页脚添加一个计时器（单位为分钟）。</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb101-1"><a href="rmarkdown-document.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb101-2"><a href="rmarkdown-document.html#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb101-3"><a href="rmarkdown-document.html#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">slidy_presentation</span><span class="kw">:</span></span>
<span id="cb101-4"><a href="rmarkdown-document.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">duration</span><span class="kw">:</span><span class="at"> </span><span class="dv">45</span></span>
<span id="cb101-5"><a href="rmarkdown-document.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="slidy-other-features" class="section level4" number="3.3.2.3">
<h4><span class="header-section-number">3.3.2.3</span> 其它功能</h4>
<p>Slidy 幻灯片继承了 HTML 文档中的多数功能（<a href="rmarkdown-document.html#rmarkdown-html">3.1</a>），以及 ioslides 中的列表内容依次显示等功能（参见 <a href="rmarkdown-document.html#ioslides-presentation">3.3.1</a>）。</p>
</div>
</div>
<div id="beamer-presentation" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Beamer 幻灯片</h3>
<p><a href="https://www.overleaf.com/learn/latex/beamer">Beamer</a> 是一个功能强大且灵活的 LaTeX 类，用于创建美观的幻灯片。</p>
<p>要从 R Markdown 创建 Beamer 幻灯片，只需要在 YAML 头文件中将输出格式设定为 <code>beamer_presentation</code> 即可。可以使用一级标题 <code>#</code> 和二级标题 <code>##</code> 新建幻灯片
（使用 <code>---</code> 也可以创建一张新的没有标题的幻灯片）。例如：</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="rmarkdown-document.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/beamer-presentation.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb103-1"><a href="rmarkdown-document.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb103-2"><a href="rmarkdown-document.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;Beamer Presentation&quot;</span></span>
<span id="cb103-3"><a href="rmarkdown-document.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;张三&quot;</span></span>
<span id="cb103-4"><a href="rmarkdown-document.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2021/4/28&quot;</span></span>
<span id="cb103-5"><a href="rmarkdown-document.html#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb103-6"><a href="rmarkdown-document.html#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="co">  beamer_presentation:</span></span>
<span id="cb103-7"><a href="rmarkdown-document.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co">    latex_engine: xelatex</span></span>
<span id="cb103-8"><a href="rmarkdown-document.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="an">header-includes:</span></span>
<span id="cb103-9"><a href="rmarkdown-document.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">  - \usepackage{ctex}</span></span>
<span id="cb103-10"><a href="rmarkdown-document.html#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb103-11"><a href="rmarkdown-document.html#cb103-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-12"><a href="rmarkdown-document.html#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb103-13"><a href="rmarkdown-document.html#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = FALSE)</span></span>
<span id="cb103-14"><a href="rmarkdown-document.html#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb103-15"><a href="rmarkdown-document.html#cb103-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-16"><a href="rmarkdown-document.html#cb103-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## Beamer 幻灯片中的中文支持</span></span>
<span id="cb103-17"><a href="rmarkdown-document.html#cb103-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-18"><a href="rmarkdown-document.html#cb103-18" aria-hidden="true" tabindex="-1"></a>要使用中文，需要做适当的配置，包括应用 <span class="in">`ctex`</span> 包（支持中文的 LaTeX 包）和使用 <span class="in">`xelatex`</span> 引擎。</span>
<span id="cb103-19"><a href="rmarkdown-document.html#cb103-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-20"><a href="rmarkdown-document.html#cb103-20" aria-hidden="true" tabindex="-1"></a>与 HTML 格式的幻灯片相比，这可能是制作 Beamer 演示文稿时唯一需要额外做出配置的地方了。</span>
<span id="cb103-21"><a href="rmarkdown-document.html#cb103-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-22"><a href="rmarkdown-document.html#cb103-22" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Bullets</span></span>
<span id="cb103-23"><a href="rmarkdown-document.html#cb103-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-24"><a href="rmarkdown-document.html#cb103-24" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 1</span>
<span id="cb103-25"><a href="rmarkdown-document.html#cb103-25" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 2</span>
<span id="cb103-26"><a href="rmarkdown-document.html#cb103-26" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 3</span>
<span id="cb103-27"><a href="rmarkdown-document.html#cb103-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-28"><a href="rmarkdown-document.html#cb103-28" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with R Output</span></span>
<span id="cb103-29"><a href="rmarkdown-document.html#cb103-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-30"><a href="rmarkdown-document.html#cb103-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cars, echo = TRUE}</span></span>
<span id="cb103-31"><a href="rmarkdown-document.html#cb103-31" aria-hidden="true" tabindex="-1"></a><span class="in">summary(cars)</span></span>
<span id="cb103-32"><a href="rmarkdown-document.html#cb103-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb103-33"><a href="rmarkdown-document.html#cb103-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-34"><a href="rmarkdown-document.html#cb103-34" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Plot</span></span>
<span id="cb103-35"><a href="rmarkdown-document.html#cb103-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-36"><a href="rmarkdown-document.html#cb103-36" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pressure}</span></span>
<span id="cb103-37"><a href="rmarkdown-document.html#cb103-37" aria-hidden="true" tabindex="-1"></a><span class="in">plot(pressure)</span></span>
<span id="cb103-38"><a href="rmarkdown-document.html#cb103-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>Beamer 幻灯片编译后的文件是一个 PDF 文档，大概像下面这个样子（图 <a href="rmarkdown-document.html#fig:beamer-presentation-screenshot">3.12</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:beamer-presentation-screenshot"></span>
<img src="examples/beamer-presentation-screenshot.png" alt="Beamer 幻灯片示例" width="561" />
<p class="caption">
图 3.12: Beamer 幻灯片示例
</p>
</div>
<div id="beamer-chinese" class="section level4" number="3.3.3.1">
<h4><span class="header-section-number">3.3.3.1</span> Beamer 幻灯片的中文支持</h4>
<p>如果要生成中文的 Beamer 幻灯片，参考 <a href="rmarkdown-document.html#pdf-chinese">3.2.2</a> 中的设置。</p>
</div>
<div id="beamer-theme" class="section level4" number="3.3.3.2">
<h4><span class="header-section-number">3.3.3.2</span> Beamer 幻灯片的主题</h4>
<p>Beamer 支持多个幻灯片主题，在 R Markdown 中使用 <code>theme</code>，<code>colortheme</code> 和 <code>fonttheme</code> 设定。
例如：</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb104-1"><a href="rmarkdown-document.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb104-2"><a href="rmarkdown-document.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb104-3"><a href="rmarkdown-document.html#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">beamer_presentation</span><span class="kw">:</span></span>
<span id="cb104-4"><a href="rmarkdown-document.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;AnnArbor&quot;</span></span>
<span id="cb104-5"><a href="rmarkdown-document.html#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">colortheme</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;dolphin&quot;</span></span>
<span id="cb104-6"><a href="rmarkdown-document.html#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">fonttheme</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;structurebold&quot;</span></span>
<span id="cb104-7"><a href="rmarkdown-document.html#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>这样，上面的幻灯片就会变成下面这个样子（图 <a href="rmarkdown-document.html#fig:beamer-presentation-theme">3.13</a>）。
这个主题为标题幻灯片添加了页眉和页脚，显示作者、主题、日期和页码等信息。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:beamer-presentation-theme"></span>
<img src="examples/beamer-presentation-theme.png" alt="应用主题后的 Beamer 幻灯片" width="756" />
<p class="caption">
图 3.13: 应用主题后的 Beamer 幻灯片
</p>
</div>
<p>Beamer 支持数十个主题和颜色样式，在 <a href="https://hartwork.org/beamer-theme-matrix/">这里</a> 可以查看可用的选项。</p>
<p><span class="citation">(<a href="#ref-TODO" role="doc-biblioref"><strong>TODO?</strong></a>)</span>: (此部分可以扩展)</p>
</div>
<div id="beamer-boundary" class="section level4" number="3.3.3.3">
<h4><span class="header-section-number">3.3.3.3</span> Beamer 幻灯片的边界</h4>
<p><code>slide_level</code> 参数用来指定一张幻灯片开始的位置。默认情况下，二级标题会被识别为一张幻灯片的开始，但是可以将它改为其它的大纲等级。</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb105-1"><a href="rmarkdown-document.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb105-2"><a href="rmarkdown-document.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb105-3"><a href="rmarkdown-document.html#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">beamer_presentation</span><span class="kw">:</span></span>
<span id="cb105-4"><a href="rmarkdown-document.html#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">slide_level</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span></span>
<span id="cb105-5"><a href="rmarkdown-document.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="beamer-other-features" class="section level4" number="3.3.3.4">
<h4><span class="header-section-number">3.3.3.4</span> Beamer 幻灯片的其它功能</h4>
<p>Beamer 幻灯片从 HTML 文档中继承了目录内容、图片属性、样式、数据框打印、组件、
模板、Pandoc 参数和分享等功能（参加 <a href="rmarkdown-document.html#rmarkdown-html">3.1</a>），从 PDF 文档和
ioslides 幻灯片中继承了列表动画、保留 TeX 文件等功能（参见 <a href="rmarkdown-document.html#rmarkdown-pdf">3.2</a>, <a href="rmarkdown-document.html#ioslides-presentation">3.3.1</a>）。</p>
</div>
</div>
<div id="powerpoint-presentation" class="section level3" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> PowerPoint 幻灯片</h3>
<p>要制作 <strong>PowerPoint</strong> 幻灯片，只需要将输出格式设置为 <code>powerpoint_presentation</code> 即可。
这需要满足 <strong>rmarkdown</strong> 版本 ≥ v1.9，Pandoc 版本 ≥ 2.0.5 的条件<a href="references.html#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>。</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="rmarkdown-document.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">import_example</span>(<span class="st">&quot;examples/powerpoint-presentation.Rmd&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb107"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb107-1"><a href="rmarkdown-document.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb107-2"><a href="rmarkdown-document.html#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;PowerPoint Presentation&quot;</span></span>
<span id="cb107-3"><a href="rmarkdown-document.html#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> &quot;张三&quot;</span></span>
<span id="cb107-4"><a href="rmarkdown-document.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> &quot;2021/4/28&quot;</span></span>
<span id="cb107-5"><a href="rmarkdown-document.html#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> powerpoint_presentation</span></span>
<span id="cb107-6"><a href="rmarkdown-document.html#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb107-7"><a href="rmarkdown-document.html#cb107-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-8"><a href="rmarkdown-document.html#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb107-9"><a href="rmarkdown-document.html#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = FALSE)</span></span>
<span id="cb107-10"><a href="rmarkdown-document.html#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb107-11"><a href="rmarkdown-document.html#cb107-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-12"><a href="rmarkdown-document.html#cb107-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## R Markdown</span></span>
<span id="cb107-13"><a href="rmarkdown-document.html#cb107-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-14"><a href="rmarkdown-document.html#cb107-14" aria-hidden="true" tabindex="-1"></a>This is an R Markdown presentation. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <span class="ot">&lt;http://rmarkdown.rstudio.com&gt;</span>.</span>
<span id="cb107-15"><a href="rmarkdown-document.html#cb107-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-16"><a href="rmarkdown-document.html#cb107-16" aria-hidden="true" tabindex="-1"></a>When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document.</span>
<span id="cb107-17"><a href="rmarkdown-document.html#cb107-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-18"><a href="rmarkdown-document.html#cb107-18" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Bullets</span></span>
<span id="cb107-19"><a href="rmarkdown-document.html#cb107-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-20"><a href="rmarkdown-document.html#cb107-20" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 1</span>
<span id="cb107-21"><a href="rmarkdown-document.html#cb107-21" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 2</span>
<span id="cb107-22"><a href="rmarkdown-document.html#cb107-22" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Bullet 3</span>
<span id="cb107-23"><a href="rmarkdown-document.html#cb107-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-24"><a href="rmarkdown-document.html#cb107-24" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with R Output</span></span>
<span id="cb107-25"><a href="rmarkdown-document.html#cb107-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-26"><a href="rmarkdown-document.html#cb107-26" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cars, echo = TRUE}</span></span>
<span id="cb107-27"><a href="rmarkdown-document.html#cb107-27" aria-hidden="true" tabindex="-1"></a><span class="in">summary(cars)</span></span>
<span id="cb107-28"><a href="rmarkdown-document.html#cb107-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb107-29"><a href="rmarkdown-document.html#cb107-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-30"><a href="rmarkdown-document.html#cb107-30" aria-hidden="true" tabindex="-1"></a><span class="fu">## Slide with Plot</span></span>
<span id="cb107-31"><a href="rmarkdown-document.html#cb107-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-32"><a href="rmarkdown-document.html#cb107-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r pressure}</span></span>
<span id="cb107-33"><a href="rmarkdown-document.html#cb107-33" aria-hidden="true" tabindex="-1"></a><span class="in">plot(pressure)</span></span>
<span id="cb107-34"><a href="rmarkdown-document.html#cb107-34" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>R Markdown 生成的 PowerPoint 幻灯片大概长这个样子（图 <a href="rmarkdown-document.html#fig:powerpoint-presentation-screenshot">3.14</a>）：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:powerpoint-presentation-screenshot"></span>
<img src="examples/powerpoint-presentation-screenshot.png" alt="PowerPoint 幻灯片" width="563" />
<p class="caption">
图 3.14: PowerPoint 幻灯片
</p>
</div>
<p>PowerPoint 幻灯片采用的幻灯片标记与 Beamer 相同，默认为 3 级标题。使用 <code>slide_level</code> 可以控制新建一张幻灯片所需要的大纲等级。此外，使用 <code>---</code> 可以新建一张没有标题的幻灯片。另外，R Markdown 中包括的图片和表格都会自动的被放到一张新的幻灯片中。也就是说，除了幻灯片的标题、图片/表格的标注之外，其它所有元素都不能与二者共存。这一点与其它格式幻灯片的行为有明显不同。</p>
<p>一般情况下，PowerPoint 幻灯片中的图片会被自动缩放到适合幻灯片的大小。如果自动缩放无效，那么对于静态图片可以使用 <code>width</code> 和 <code>height</code> 来分别设置，例如：<code>![caption](foo.png){width=40%}</code>。对于 R 语言生成的动态图形，则可以使用代码块的参数 <code>fig.width</code> 和 <code>fig.height</code> 来定义宽和高。</p>
<p>PowerPoint 幻灯片中可以使用的 Markdown 标记（参见 <a href="#markdown-syntax"><strong>??</strong></a>）包括粗体、斜体，脚注，列表，LaTeX 数学表达式，
图片，表格等。</p>
<div id="powerpoint-layout" class="section level4" number="3.3.4.1">
<h4><span class="header-section-number">3.3.4.1</span> 两栏布局</h4>
<p>正如 Beamer 幻灯片的高级应用需要借助于 LaTeX 语法一样，
PowerPoint 幻灯片的高级应用需要借助于对 Pandoc 的深入了解。
使用 Pandoc 的语法，可以设置一个多栏的布局（请参见 Pandoc 的用户手册）：</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb108-1"><a href="rmarkdown-document.html#cb108-1" aria-hidden="true" tabindex="-1"></a>:::::: {.columns}</span>
<span id="cb108-2"><a href="rmarkdown-document.html#cb108-2" aria-hidden="true" tabindex="-1"></a>::: {.column}</span>
<span id="cb108-3"><a href="rmarkdown-document.html#cb108-3" aria-hidden="true" tabindex="-1"></a>左侧栏目的内容</span>
<span id="cb108-4"><a href="rmarkdown-document.html#cb108-4" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb108-5"><a href="rmarkdown-document.html#cb108-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-6"><a href="rmarkdown-document.html#cb108-6" aria-hidden="true" tabindex="-1"></a>::: {.column}</span>
<span id="cb108-7"><a href="rmarkdown-document.html#cb108-7" aria-hidden="true" tabindex="-1"></a>右侧栏目的内容</span>
<span id="cb108-8"><a href="rmarkdown-document.html#cb108-8" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb108-9"><a href="rmarkdown-document.html#cb108-9" aria-hidden="true" tabindex="-1"></a>::::::</span></code></pre></div>
</div>
<div id="powerpoint-reference-doc" class="section level4" number="3.3.4.2">
<h4><span class="header-section-number">3.3.4.2</span> 自定义模板</h4>
<p>PowerPoint 幻灯片的模板可以用 <code>reference_doc</code> 来设置。
模板中的样式将会被应用到 R Markdown 生成的 PowerPoint 幻灯片中。</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb109-1"><a href="rmarkdown-document.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb109-2"><a href="rmarkdown-document.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;使用自己喜欢的 PowerPoint 模板&quot;</span></span>
<span id="cb109-3"><a href="rmarkdown-document.html#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb109-4"><a href="rmarkdown-document.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">powerpoint_presentation</span><span class="kw">:</span></span>
<span id="cb109-5"><a href="rmarkdown-document.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">reference_doc</span><span class="kw">:</span><span class="at"> my-styles.pptx</span></span>
<span id="cb109-6"><a href="rmarkdown-document.html#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
</div>
<div id="powerpoint-other-features" class="section level4" number="3.3.4.3">
<h4><span class="header-section-number">3.3.4.3</span> 其它功能</h4>
<p>PowerPoint 幻灯片从 HTML 文档中继承了目录内容、图片属性、样式、数据框打印、组件、
模板、Pandoc 参数和分享等功能（参加 <a href="rmarkdown-document.html#rmarkdown-html">3.1</a>）。
目前并不支持播放列表项目时候的动画效果。</p>
</div>
</div>
<div id="ppt-xaringan" class="section level3" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> Xaringan 幻灯片</h3>
<p>虽然 R Markdown 提供的基础幻灯片已经能够实现了基本的幻灯片功能，而且没有额外的学习成本，
但是，善于制作精良幻灯片的“忍者”通常使用一个额外的包来创建幻灯片，这个包的名字叫做 <code>xaringan</code>。</p>
<p><code>xaringan</code> 这个名字来源于火影忍者中的写轮眼 “Sharingan” （图 <a href="rmarkdown-document.html#fig:sharingan-icon">3.15</a>）<a href="references.html#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>。写轮眼有两大能力：</p>
<ul>
<li><p>洞察眼</p></li>
<li><p>催眠眼</p></li>
</ul>
<p>其实做演示就是将自己的洞见传递给听众；好的演讲通常有催眠效果，因为它可以深度震撼人心<a href="references.html#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a>。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:sharingan-icon"></span>
<img src="images/xaringan-hex.png" alt="幻灯忍者：写轮眼" width="180" />
<p class="caption">
图 3.15: 幻灯忍者：写轮眼
</p>
</div>
<p>与其它工具相比，<code>xaringan</code> 创建的幻灯片样式更加精美，功能更加丰富，且具有高度的可定制性（图 <a href="rmarkdown-document.html#fig:xaringan-screenshot">3.16</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-screenshot"></span>
<img src="images/xaringan-scrennshot.png" alt="`xaringan` 幻灯片的实例" width="602" />
<p class="caption">
图 3.16: <code>xaringan</code> 幻灯片的实例
</p>
</div>
<!-- 这一小节的下列内容事实上是由庄亮亮完成的 -->
<div id="xaringan-basic" class="section level4" number="3.3.5.1">
<h4><span class="header-section-number">3.3.5.1</span> Xaringan 的安装和入门</h4>
<p>要创建“写轮眼”幻灯片，需要先安装 <strong>xaringan</strong> 软件包<span class="citation">(<a href="#ref-R-xaringan" role="doc-biblioref">Xie 2021b</a>)</span>）。</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="rmarkdown-document.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">&quot;xaringan&quot;</span>))</span>
<span id="cb110-2"><a href="rmarkdown-document.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">&quot;xaringan&quot;</span>)</span></code></pre></div>
<p>安装完成之后，在 RStudio 中新建 R Markdown 文件，并在左侧选择 “From Template”，然后选择 “Ninja Presentation (Simplified Chinese)”。填写必要信息之后，即可创建一个新的“写轮眼”幻灯片（图 <a href="rmarkdown-document.html#fig:xaringan-new">3.17</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-new"></span>
<img src="images/xaringan-new.png" alt="创建一个新文档" width="500" />
<p class="caption">
图 3.17: 创建一个新文档
</p>
</div>
<p>然后点击 Knit 按钮编译文档，或者点击 RStudio 插件 “Infinite Moon Reader” 在 RStudio 里实时预览幻灯片（每次保存文档的时候，它会自动重新编译）。</p>
<blockquote>
<p><strong>原理：</strong> xaringan 将 R Markdown 的查克拉注入了 remark.js。浏览器中的幻灯片是 remark.js 渲染出来的，而它的 Markdown 源文档是从 R Markdown 生成的（实际上主要是 knitr）。</p>
</blockquote>
</div>
<div id="xaringan-autoplay" class="section level4" number="3.3.5.2">
<h4><span class="header-section-number">3.3.5.2</span> Xaringan 幻灯片的自动播放</h4>
<ol style="list-style-type: decimal">
<li><strong>播放设置</strong></li>
</ol>
<p><code>nature</code> 下面的 <code>autoplay</code> 选项可以用来自动播放幻灯片，它的取值是毫秒，例如：每 30 秒播放一张片子：</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb111-1"><a href="rmarkdown-document.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co">  </span></span>
<span id="cb111-2"><a href="rmarkdown-document.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  xaringan::moon_reader:  </span>
<span id="cb111-3"><a href="rmarkdown-document.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  nature:  </span>
<span id="cb111-4"><a href="rmarkdown-document.html#cb111-4" aria-hidden="true" tabindex="-1"></a>    autoplay: 30000  </span></code></pre></div>
<p><code>nature</code> 下面的 <code>countdown</code> 选项可以为每一页幻灯片添加一个（倒数）计时器，取值同样为毫秒，例如每一页片子都用 60 秒倒计时：</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb112-1"><a href="rmarkdown-document.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co">  </span></span>
<span id="cb112-2"><a href="rmarkdown-document.html#cb112-2" aria-hidden="true" tabindex="-1"></a>  xaringan::moon_reader:  </span>
<span id="cb112-3"><a href="rmarkdown-document.html#cb112-3" aria-hidden="true" tabindex="-1"></a>    nature:  </span>
<span id="cb112-4"><a href="rmarkdown-document.html#cb112-4" aria-hidden="true" tabindex="-1"></a>      countdown: 60000  </span></code></pre></div>
</div>
<div id="xaringan-shortcut" class="section level4" number="3.3.5.3">
<h4><span class="header-section-number">3.3.5.3</span> Xaringan 幻灯片的快捷键</h4>
<ul>
<li>点击按键 <code>h</code> 或者 <code>?</code> 之后可以看到所有快捷键示意图（图 <a href="rmarkdown-document.html#fig:xaringan-help">3.18</a>）</li>
</ul>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="rmarkdown-document.html#cb113-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;images/xaringan-help.png&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-help"></span>
<img src="images/xaringan-help.png" alt="展示所有快捷键" width="500" />
<p class="caption">
图 3.18: 展示所有快捷键
</p>
</div>
<ul>
<li><code>p</code> 进入演讲者模式（可以看见自己写的注释，比如：提醒自己要讲的笑话，图 <a href="rmarkdown-document.html#fig:xaringan-review">3.19</a>）。</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-review"></span>
<img src="images/xaringan-review.png" alt="进入演讲者模式" width="367" />
<p class="caption">
图 3.19: 进入演讲者模式
</p>
</div>
<ul>
<li>点击按键 <code>c</code> 可以复制幻灯片到新窗口。演讲时可以在自己面前的屏幕上显示演讲者模式，把新窗口中正常的幻灯片拖到大屏幕投影上给观众看（见图 <a href="rmarkdown-document.html#fig:xaringan-new-screan">3.20</a>）。</li>
</ul>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-new-screan"></span>
<img src="images/xaringan-new-screan.png" alt="复制幻灯片到新窗口" width="500" />
<p class="caption">
图 3.20: 复制幻灯片到新窗口
</p>
</div>
<!-- 这里介绍了两个 xaringan 相关的包，但是对 xaringan 自身的介绍尚不完整 -->
</div>
</div>
<div id="xaringan-extension" class="section level3" number="3.3.6">
<h3><span class="header-section-number">3.3.6</span> Xaringan 幻灯片的扩展包</h3>
<div id="xaringanthemer" class="section level4" number="3.3.6.1">
<h4><span class="header-section-number">3.3.6.1</span> 配置 Xaringan 幻灯片的主题</h4>
<p>Aden-Buie 写了一个叫做 <strong>xaringanthemer</strong> 包<span class="citation">(<a href="#ref-R-xaringanthemer" role="doc-biblioref"><strong>R-xaringanthemer?</strong></a>)</span>的包，可以更改写轮眼幻灯片的主题，使用起来也非常方便，接下来看教程。</p>
<p>可以从 CRAN 或者 Github安装 <strong>xaringanthemer</strong> 包。</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb114-1"><a href="rmarkdown-document.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># 通过 CRAN 安装</span></span>
<span id="cb114-2"><a href="rmarkdown-document.html#cb114-2" aria-hidden="true" tabindex="-1"></a>install.packages(&quot;xaringanthemer&quot;)  </span>
<span id="cb114-3"><a href="rmarkdown-document.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="rmarkdown-document.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="fu"># 通过 Github 安装</span></span>
<span id="cb114-5"><a href="rmarkdown-document.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu"># install.packages(&quot;remotes&quot;)  </span></span>
<span id="cb114-6"><a href="rmarkdown-document.html#cb114-6" aria-hidden="true" tabindex="-1"></a>remotes::install_github(&quot;gadenbuie/xaringanthemer&quot;) </span></code></pre></div>
<ol style="list-style-type: decimal">
<li>创建完新文档后，将 <code>xaringan-themer.css</code> 文件添加到 xaringan 幻灯片的 YAML 中。</li>
</ol>
<div class="sourceCode" id="cb115"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb115-1"><a href="rmarkdown-document.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co">  </span></span>
<span id="cb115-2"><a href="rmarkdown-document.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  xaringan::moon_reader:  </span>
<span id="cb115-3"><a href="rmarkdown-document.html#cb115-3" aria-hidden="true" tabindex="-1"></a>    css: xaringan-themer.css  </span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>然后，在 chunck 中加载 <strong>xaringanthemer</strong> 并 <a href="https://pkg.garrickadenbuie.com/xaringanthemer/articles/xaringanthemer.html#themes">设置主题</a> 即可。下面给出一个简单的例子（图 <a href="rmarkdown-document.html#fig:xaringan-themer-sample-view">3.21</a>）， 展示了设置主题后的界面预览。当然该包还给出了很多其他主题，下面给出一些主题模板预览。</li>
</ol>
<div class="sourceCode" id="cb116"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb116-1"><a href="rmarkdown-document.html#cb116-1" aria-hidden="true" tabindex="-1"></a>library(xaringanthemer)  </span>
<span id="cb116-2"><a href="rmarkdown-document.html#cb116-2" aria-hidden="true" tabindex="-1"></a>style_mono_accent(  </span>
<span id="cb116-3"><a href="rmarkdown-document.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  base_color = &quot;#1c5253&quot;,  </span>
<span id="cb116-4"><a href="rmarkdown-document.html#cb116-4" aria-hidden="true" tabindex="-1"></a>  header_font_google = google_font(&quot;Josefin Sans&quot;),  </span>
<span id="cb116-5"><a href="rmarkdown-document.html#cb116-5" aria-hidden="true" tabindex="-1"></a>  text_font_google   = google_font(&quot;Montserrat&quot;, &quot;300&quot;, &quot;300i&quot;),  </span>
<span id="cb116-6"><a href="rmarkdown-document.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  code_font_google   = google_font(&quot;Fira Mono&quot;)  </span>
<span id="cb116-7"><a href="rmarkdown-document.html#cb116-7" aria-hidden="true" tabindex="-1"></a>)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-sample-view"></span>
<img src="images/xaringan-themer-sample-view.png" alt="主题设置后的界面预览" width="500" />
<p class="caption">
图 3.21: 主题设置后的界面预览
</p>
</div>
<blockquote>
<p><strong>注意</strong>：在 chunck 头部中设置 <code>include=FALSE, warning=FALSE</code> 可以隐藏代码。</p>
</blockquote>
</div>
<div id="xaringanthemer-ggplot" class="section level4" number="3.3.6.2">
<h4><span class="header-section-number">3.3.6.2</span> Xaringan 幻灯片自动匹配 ggplot 主题</h4>
<p><strong>xaringanthemer</strong> 包提供了 <code>theme_xaringan()</code> 函数，可用于修改 <code>ggplot2</code> 生成图片的主题，使图片与幻灯片主题中所配置的颜色和字体保持一致。</p>
<p>另外，<strong>xaringanthemer</strong> 建立在 <strong>showtext</strong> 包 <span class="citation">(<a href="#ref-R-showtext" role="doc-biblioref"><strong>R-showtext?</strong></a>)</span> 的基础上，可以使用更多的字体（包括系统提供的字体和网上的字体）。有关更多详细信息，可以在 <code>?scale_xaringan</code> 和 <code>vignette(“ggplot2-themes”)</code>中找到（图 <a href="rmarkdown-document.html#fig:xaringan-themer-ggplot">3.22</a>）。</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb117-1"><a href="rmarkdown-document.html#cb117-1" aria-hidden="true" tabindex="-1"></a>library(ggplot2)  </span>
<span id="cb117-2"><a href="rmarkdown-document.html#cb117-2" aria-hidden="true" tabindex="-1"></a>ggplot(diamonds) +  </span>
<span id="cb117-3"><a href="rmarkdown-document.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  aes(cut, fill = cut) +  </span>
<span id="cb117-4"><a href="rmarkdown-document.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  geom_bar(show.legend = FALSE) +  </span>
<span id="cb117-5"><a href="rmarkdown-document.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  labs(  </span>
<span id="cb117-6"><a href="rmarkdown-document.html#cb117-6" aria-hidden="true" tabindex="-1"></a>    x = &quot;切割工艺质量&quot;,  </span>
<span id="cb117-7"><a href="rmarkdown-document.html#cb117-7" aria-hidden="true" tabindex="-1"></a>    y = &quot;产品数量&quot;,  </span>
<span id="cb117-8"><a href="rmarkdown-document.html#cb117-8" aria-hidden="true" tabindex="-1"></a>    title = &quot;钻石切割工艺质量与产品数量&quot;) +  </span>
<span id="cb117-9"><a href="rmarkdown-document.html#cb117-9" aria-hidden="true" tabindex="-1"></a>  theme_xaringan(background_color = &quot;#FFFFFF&quot;) +  </span>
<span id="cb117-10"><a href="rmarkdown-document.html#cb117-10" aria-hidden="true" tabindex="-1"></a>  scale_xaringan_fill_discrete()  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-ggplot"></span>
<img src="images/xaringan-themer-ggplot.png" alt="前面例子对应的 ggplot 配色" width="500" />
<p class="caption">
图 3.22: 前面例子对应的 ggplot 配色
</p>
</div>
</div>
<div id="xaringan-autocomplete" class="section level4" number="3.3.6.3">
<h4><span class="header-section-number">3.3.6.3</span> Xaringanthemer 的自动补全功能</h4>
<p><strong>xaringanthemer</strong> 包对 Tab 键十分友好，该功能可以在查找每个主题中调整模板的函数。对应的 gif 演示可见<a href="https://pkg.garrickadenbuie.com/xaringanthemer/articles/xaringanthemer.html">官网教程</a>。</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="rmarkdown-document.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (knitr<span class="sc">::</span><span class="fu">is_html_output</span>()){</span>
<span id="cb118-2"><a href="rmarkdown-document.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;https://raw.githubusercontent.com/gadenbuie/xaringanthemer/assets/example-rstudio-completion.gif&quot;</span>)</span>
<span id="cb118-3"><a href="rmarkdown-document.html#cb118-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringanthemr-autocomplet"></span>
<img src="https://raw.githubusercontent.com/gadenbuie/xaringanthemer/assets/example-rstudio-completion.gif" alt="xaringanthemer 支持自动补全功能"  />
<p class="caption">
图 3.23: xaringanthemer 支持自动补全功能
</p>
</div>
</div>
<div id="xaringanthemer-other-themes" class="section level4" number="3.3.6.4">
<h4><span class="header-section-number">3.3.6.4</span> Xaringanthemer 提供的可选主题</h4>
<p>该包提供各式各样的主题模板，可以根据喜好选择自己想要的主题，在正文开头加入以下代码，就会得到相应的模板了！这里给出 6 个模板函数以及对应的界面预览图，更多模板可见<a href="https://pkg.garrickadenbuie.com/xaringanthemer/articles/themes.html" class="uri">https://pkg.garrickadenbuie.com/xaringanthemer/articles/themes.html</a>。</p>
<blockquote>
<p>记得在使用以下函数前，先加载 <strong>xaringanthemer</strong> 包。</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><code>style_mono_light()</code></li>
</ol>
<div class="sourceCode" id="cb119"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb119-1"><a href="rmarkdown-document.html#cb119-1" aria-hidden="true" tabindex="-1"></a>style_mono_light(base_color = &quot;#23395b&quot;)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo1"></span>
<img src="images/xaringan-themer-demo1.png" alt="Moon Light 模板" width="681" />
<p class="caption">
图 3.24: Moon Light 模板
</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li><code>style_mono_dark()</code></li>
</ol>
<div class="sourceCode" id="cb120"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb120-1"><a href="rmarkdown-document.html#cb120-1" aria-hidden="true" tabindex="-1"></a>style_mono_dark(base_color = &quot;#cbf7ed&quot;)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo2"></span>
<img src="images/xaringan-themer-demo2.png" alt="Mono Dark 模板" width="681" />
<p class="caption">
图 3.25: Mono Dark 模板
</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li><code>style_mono_accent()</code></li>
</ol>
<div class="sourceCode" id="cb121"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb121-1"><a href="rmarkdown-document.html#cb121-1" aria-hidden="true" tabindex="-1"></a>style_mono_accent(base_color = &quot;#43418A&quot;)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo3"></span>
<img src="images/xaringan-themer-demo3.png" alt="Mono Accent 模板" width="681" />
<p class="caption">
图 3.26: Mono Accent 模板
</p>
</div>
<ol start="4" style="list-style-type: decimal">
<li><code>style_mono_accent_inverse()</code></li>
</ol>
<div class="sourceCode" id="cb122"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb122-1"><a href="rmarkdown-document.html#cb122-1" aria-hidden="true" tabindex="-1"></a>style_mono_accent(base_color = &quot;#43418A&quot;)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo4"></span>
<img src="images/xaringan-themer-demo4.png" alt="Mono Accent Inverse 模板" width="681" />
<p class="caption">
图 3.27: Mono Accent Inverse 模板
</p>
</div>
<ol start="5" style="list-style-type: decimal">
<li><code>style_duo()</code></li>
</ol>
<div class="sourceCode" id="cb123"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb123-1"><a href="rmarkdown-document.html#cb123-1" aria-hidden="true" tabindex="-1"></a>style_duo(primary_color = &quot;#1F4257&quot;, secondary_color = &quot;#F97B64&quot;)  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo5"></span>
<img src="images/xaringan-themer-demo5.png" alt="Duo 模板" width="1022" />
<p class="caption">
图 3.28: Duo 模板
</p>
</div>
<ol start="6" style="list-style-type: decimal">
<li><code>style_solarized_light()</code></li>
</ol>
<div class="sourceCode" id="cb124"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb124-1"><a href="rmarkdown-document.html#cb124-1" aria-hidden="true" tabindex="-1"></a>style_solarized_light()  </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-themer-demo6"></span>
<img src="images/xaringan-themer-demo6.png" alt="Solarized Light 模板" width="681" />
<p class="caption">
图 3.29: Solarized Light 模板
</p>
</div>
</div>
<div id="xaringanextra" class="section level4" number="3.3.6.5">
<h4><span class="header-section-number">3.3.6.5</span> 扩展 xaringan 幻灯片的功能</h4>
<p><strong>xaringanExtra</strong> 包<span class="citation">(<a href="#ref-R-xaringanExtra" role="doc-biblioref"><strong>R-xaringanExtra?</strong></a>)</span> 扩展了 Xaringan 幻灯片的功能，涵盖了很多写轮眼的并不具备的常用功能，具体如下所示：</p>
<ul>
<li><p>并列方式展示演示文稿</p></li>
<li><p>在线编辑演示文稿</p></li>
<li><p>分享幻灯片样式</p></li>
<li><p>通过广播向观众实时播放幻灯片</p></li>
<li><p>在演示幻灯片上进行涂鸦</p></li>
<li><p>幻灯片切换时有声音提示</p></li>
<li><p>加入幻灯片切换动画</p></li>
<li><p>将选项卡面板加入幻灯片中</p></li>
<li><p>给幻灯片添加全局 logo</p></li>
<li><p>添加搜索框</p></li>
<li><p>使用 Tachyons CSS 实用程序工具包</p></li>
<li><p>添加网络摄像头进行实时视频</p></li>
<li><p>使用剪贴板添加一键式代码复制</p></li>
<li><p>从幻灯片开始就播放 GIF</p></li>
<li><p>调整幻灯片的大小以填充浏览器窗口</p></li>
<li><p>添加额外的 CSS 样式</p></li>
</ul>
<p>这里仅仅列出了一些平时使用比较多的功能，在项目的 <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/README?id=xaringanextra">官方网站</a> 另外列出了该软件包更多的特性。</p>
<p>可以从 GitHub 安装最新版本的 <code>xaringanExtra</code>。</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb125-1"><a href="rmarkdown-document.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># install.packages(&quot;remotes&quot;)  </span></span>
<span id="cb125-2"><a href="rmarkdown-document.html#cb125-2" aria-hidden="true" tabindex="-1"></a>remotes::install_github(&quot;gadenbuie/xaringanExtra&quot;)  </span></code></pre></div>
</div>
<div id="xaringan-tile-view" class="section level4" number="3.3.6.6">
<h4><span class="header-section-number">3.3.6.6</span> 并列方式展示 Xaringan 幻灯片</h4>
<p><strong>使用方法</strong>：将以下代码块添加到幻灯片 R Markdown 文件中，之后对该 R Markdown 文件进行重新渲染。</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb126-1"><a href="rmarkdown-document.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-tile-view, echo=FALSE}  </span></span>
<span id="cb126-2"><a href="rmarkdown-document.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_tile_view()  </span></span>
<span id="cb126-3"><a href="rmarkdown-document.html#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>渲染后在幻灯片的放映界面中按 <code>O</code> 键（ Overview 的第一个字母）即可得到以下界面，再按 <code>O</code> 键即可回到默认形式。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-extra-1"></span>
<img src="images/xaringan-extra-1.png" alt="并列方式展示演示文稿" width="500" />
<p class="caption">
图 3.30: 并列方式展示演示文稿
</p>
</div>
<blockquote>
<p>该功能类似 PowerPoint 中的幻灯片浏览模式。黄色的框表示当前所在的位置，可以通过鼠标直接切换到想要的位置。这个功能非常方便实用，而且操作简单，只要加入前面的代码就可以了。</p>
</blockquote>
</div>
<div id="xaringan-can-edit" class="section level4" number="3.3.6.7">
<h4><span class="header-section-number">3.3.6.7</span> 在线编辑 Xaringan 幻灯片</h4>
<p>这个功能无敌！可以在放映的幻灯片上直接书写内容，实时更新。主要是使用 <code>.can-edit [...]</code> 实现。</p>
<p><strong>使用方法</strong>：只需将下面代码加入创建的 rmd 文档中：</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb127-1"><a href="rmarkdown-document.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-editable, echo = FALSE}  </span></span>
<span id="cb127-2"><a href="rmarkdown-document.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_editable(expires = 1)  </span></span>
<span id="cb127-3"><a href="rmarkdown-document.html#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>使用 <code>.can-edit[]</code> 使幻灯片组件可编辑。</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb128-1"><a href="rmarkdown-document.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## .can-edit[可以在此修改幻灯片的标题]  </span></span></code></pre></div>
<p>每当将幻灯片重新加载到浏览器中时，<code>.can-edit</code> 类的可编辑字段将被重置。如果要存储已编辑并使它们在浏览器会话之间持久存在，请为每个可编辑字段提供一个 <code>.key-&lt;NAME&gt;</code> 类。例如：</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb129-1"><a href="rmarkdown-document.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## .can-edit.key-firstSlideTitle[可以在此修改幻灯片标题并将修改后的标题保存到当前会话中]  </span></span></code></pre></div>
<p>对于更复杂的 HTML 元素，最好仅使一部分文本可编辑，例如</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb130-1"><a href="rmarkdown-document.html#cb130-1" aria-hidden="true" tabindex="-1"></a>你好 .can-edit<span class="co">[</span><span class="ot">张三</span><span class="co">]</span>，欢迎光临！ </span></code></pre></div>
<p>或者使用占位符文本。</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb131-1"><a href="rmarkdown-document.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 我所钟爱的东西 </span></span>
<span id="cb131-2"><a href="rmarkdown-document.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-3"><a href="rmarkdown-document.html#cb131-3" aria-hidden="true" tabindex="-1"></a>.can-edit.key-likes[  </span>
<span id="cb131-4"><a href="rmarkdown-document.html#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>好东西甲  </span>
<span id="cb131-5"><a href="rmarkdown-document.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>好东西乙  </span>
<span id="cb131-6"><a href="rmarkdown-document.html#cb131-6" aria-hidden="true" tabindex="-1"></a>]  </span></code></pre></div>
<p>官方给出了 gif 的<a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/editable">演示</a>。在教学的时候非常合适，可以增加与学生，观众的互动。</p>
</div>
<div id="xaringan-scribble" class="section level4" number="3.3.6.8">
<h4><span class="header-section-number">3.3.6.8</span> 在 Xaringan 幻灯片上涂鸦</h4>
<p><strong>使用方法</strong>：只需在 rmd 文件中加入下面代码，重新编译即可得到这个效果。</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb132-1"><a href="rmarkdown-document.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-scribble, echo=FALSE}  </span></span>
<span id="cb132-2"><a href="rmarkdown-document.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_scribble()  </span></span>
<span id="cb132-3"><a href="rmarkdown-document.html#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>单击铅笔图标或按 <code>S</code> 键进行绘图。按 <code>S</code> 或启动绘图模式切换涂鸦工具箱。也可以使用橡皮擦来删除线条或单击“清除（trash）”按钮清除当前幻灯片上的所有涂鸦。</p>
<blockquote>
<p><strong>注意</strong>，当更改幻灯片时，图纸将保持在每张幻灯片上。在绘图模式下不能更改幻灯片。事实上，可以使用 <code>←</code> 和<code>→</code> 键来撤消或重做您的图纸。</p>
</blockquote>
<p>如果想将幻灯片与涂鸦一起保存，最好的方法是从浏览器中打印演示文稿，官方给出了 gif <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/scribble">演示</a>。</p>
</div>
<div id="xaringan-slide-tone" class="section level4" number="3.3.6.9">
<h4><span class="header-section-number">3.3.6.9</span> 切换时 Xaringan 幻灯片时播放声音提示</h4>
<p><strong>使用方法</strong>：只需在 R Markdown 文件中加入下面代码，重新编译即可得到这个效果。当然，官方也给出了 gif <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/slide-tone">演示</a>。</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb133-1"><a href="rmarkdown-document.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-slide-tone, echo=FALSE}    </span></span>
<span id="cb133-2"><a href="rmarkdown-document.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_slide_tone()  </span></span>
<span id="cb133-3"><a href="rmarkdown-document.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
</div>
<div id="xaringan-animate" class="section level4" number="3.3.6.10">
<h4><span class="header-section-number">3.3.6.10</span> Xaringan 幻灯片加入动画</h4>
<p><strong>使用方法</strong>：在 R Markdown 文件中加入下面代码</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb134-1"><a href="rmarkdown-document.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-animate-css, echo=FALSE}   </span></span>
<span id="cb134-2"><a href="rmarkdown-document.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_animate_css()  </span></span>
<span id="cb134-3"><a href="rmarkdown-document.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>然后将 <code>animated</code> 类和所需动画添加到对应的幻灯片中。下面给出一个代码的例子：</p>
<blockquote>
<p>注意：退出动画只应用于退出时的幻灯片。</p>
</blockquote>
<div class="sourceCode" id="cb135"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb135-1"><a href="rmarkdown-document.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co">---  </span></span>
<span id="cb135-2"><a href="rmarkdown-document.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="an">class:</span><span class="co"> animated slideInRight fadeOutLeft  </span></span>
<span id="cb135-3"><a href="rmarkdown-document.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb135-4"><a href="rmarkdown-document.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 这张幻灯片将会……  </span></span>
<span id="cb135-5"><a href="rmarkdown-document.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb135-6"><a href="rmarkdown-document.html#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="co">- 一开始从屏幕右侧出现  </span></span>
<span id="cb135-7"><a href="rmarkdown-document.html#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="co">- 并将会从屏幕左侧消失</span></span></code></pre></div>
<p>这时，该张幻灯片将从右边滑入。如果想使所有幻灯片使用同一个转化形式，可以使用：<code>use_animate_all()</code>，代码如下（建议加到正文前部）。除此之外，官方给出了 gif <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/animate-css">演示</a>。</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb136-1"><a href="rmarkdown-document.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-animate-all, echo=FALSE}   </span></span>
<span id="cb136-2"><a href="rmarkdown-document.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_animate_all(&quot;slide_left&quot;)  </span></span>
<span id="cb136-3"><a href="rmarkdown-document.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
</div>
<div id="xaringan-panelset" class="section level4" number="3.3.6.11">
<h4><span class="header-section-number">3.3.6.11</span> 在 Xaringan 幻灯片使用选项卡</h4>
<p><strong>使用方法</strong>：在 R Markdown 文件中加入下面代码</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb137-1"><a href="rmarkdown-document.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-panelset, echo=FALSE}    </span></span>
<span id="cb137-2"><a href="rmarkdown-document.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_panelset()  </span></span>
<span id="cb137-3"><a href="rmarkdown-document.html#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>然后，创建一个包含若干个 <code>.panel[]</code> 的 <code>.panelset [...]</code>。每个 <code>.panel []</code> 应该具有 <code>.panel-name []</code> 和想写的内容，例如：</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb138-1"><a href="rmarkdown-document.html#cb138-1" aria-hidden="true" tabindex="-1"></a>.panel<span class="co">[</span><span class="ot">.panel-name[NAME</span><span class="co">]</span>  </span>
<span id="cb138-2"><a href="rmarkdown-document.html#cb138-2" aria-hidden="true" tabindex="-1"></a>在此输入你的内容 </span>
<span id="cb138-3"><a href="rmarkdown-document.html#cb138-3" aria-hidden="true" tabindex="-1"></a>]  </span></code></pre></div>
<p>下面是演示幻灯片中使用的例子。</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb139-1"><a href="rmarkdown-document.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">---  </span></span>
<span id="cb139-2"><a href="rmarkdown-document.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 我是庄闪闪  </span></span>
<span id="cb139-3"><a href="rmarkdown-document.html#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb139-4"><a href="rmarkdown-document.html#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co">.panelset[  </span></span>
<span id="cb139-5"><a href="rmarkdown-document.html#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="co">.panel[.panel-name[R Code]  </span></span>
<span id="cb139-6"><a href="rmarkdown-document.html#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb139-7"><a href="rmarkdown-document.html#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="co">欢迎关注[庄闪闪的R语言手册]呀！  </span></span>
<span id="cb139-8"><a href="rmarkdown-document.html#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="co">```{r panel-chunk,fig.align=&#39;center&#39;,out.width=&quot;60%&quot;}    </span></span>
<span id="cb139-9"><a href="rmarkdown-document.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="co">library(ggplot2)  </span></span>
<span id="cb139-10"><a href="rmarkdown-document.html#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="co">(g &lt;- ggplot(mpg) + aes(hwy, cty, color = class) + geom_point())  </span></span>
<span id="cb139-11"><a href="rmarkdown-document.html#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="co">```  </span></span>
<span id="cb139-12"><a href="rmarkdown-document.html#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="co">]  </span></span>
<span id="cb139-13"><a href="rmarkdown-document.html#cb139-13" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb139-14"><a href="rmarkdown-document.html#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="co">.panel[.panel-name[Plot]  </span></span>
<span id="cb139-15"><a href="rmarkdown-document.html#cb139-15" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb139-16"><a href="rmarkdown-document.html#cb139-16" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;center&gt;&lt;img src=&quot;https://octodex.github.com/images/labtocat.png&quot; height=&quot;300&quot; /&gt;&lt;/center&gt;  </span></span>
<span id="cb139-17"><a href="rmarkdown-document.html#cb139-17" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb139-18"><a href="rmarkdown-document.html#cb139-18" aria-hidden="true" tabindex="-1"></a><span class="co">]  </span></span>
<span id="cb139-19"><a href="rmarkdown-document.html#cb139-19" aria-hidden="true" tabindex="-1"></a><span class="co">]  </span></span></code></pre></div>
<p>图 <a href="rmarkdown-document.html#fig:xaringan-extra-2">3.31</a> 给出了上面代码的结果。官网给出了 gif <a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/panelset">演示</a>。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-extra-2"></span>
<img src="images/xaringan-extra-2.png" alt="将选项卡面板加入幻灯片中" width="500" />
<p class="caption">
图 3.31: 将选项卡面板加入幻灯片中
</p>
</div>
<p>要定制面板的外观，可以使用直接在幻灯片的 R 块中调用 <code>style_panelset_tabs()</code>。将下面代码加到前面的代码块下，这时代码块的颜色发生了变化。</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb140-1"><a href="rmarkdown-document.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=FALSE}      </span></span>
<span id="cb140-2"><a href="rmarkdown-document.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::style_panelset_tabs(foreground = &quot;honeydew&quot;, background = &quot;seagreen&quot;)  </span></span>
<span id="cb140-3"><a href="rmarkdown-document.html#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
</div>
<div id="xaringan-logo" class="section level4" number="3.3.6.12">
<h4><span class="header-section-number">3.3.6.12</span> 给 Xaringan 幻灯片添加 LOGO</h4>
<p><strong>使用方法</strong>：在 R Markdown 文件中加入下面代码</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb141-1"><a href="rmarkdown-document.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-logo, echo=FALSE}      </span></span>
<span id="cb141-2"><a href="rmarkdown-document.html#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_logo(  </span></span>
<span id="cb141-3"><a href="rmarkdown-document.html#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="in">  image_url = &quot;https://gitee.com/zhuang_liang_liang0825/other/raw/master/%E6%B8%A9%E5%B7%9E%E5%A4%A7%E5%AD%A6logo.png&quot;  </span></span>
<span id="cb141-4"><a href="rmarkdown-document.html#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="in">)  </span></span>
<span id="cb141-5"><a href="rmarkdown-document.html#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>这时，所有幻灯片右上角都加上了对应的 LOGO 啦！如果想在某几张不显示 LOGO，可以使用 <code>hide_logo</code> 隐藏特定幻灯片的徽标，具体例子如下（图 <a href="rmarkdown-document.html#fig:xaringan-extra-3">3.32</a>）：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-extra-3"></span>
<img src="images/xaringan-extra-3.png" alt="给幻灯片添加全局 logo" width="500" />
<p class="caption">
图 3.32: 给幻灯片添加全局 logo
</p>
</div>
</div>
<div id="xaringan-webcam" class="section level4" number="3.3.6.13">
<h4><span class="header-section-number">3.3.6.13</span> 播放 Xaringan 幻灯片时使用摄像头</h4>
<p><strong>使用方法</strong>：在 R Markdown 文件中加入下面代码，然后重新渲染。</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb142-1"><a href="rmarkdown-document.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-webcam, include = FALSE}     </span></span>
<span id="cb142-2"><a href="rmarkdown-document.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_webcam()  </span></span>
<span id="cb142-3"><a href="rmarkdown-document.html#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>之后点击 <code>w</code> 键（记得用浏览器打开哦！）就会得到以下界面（图 <a href="rmarkdown-document.html#fig:xaringan-extra-4">3.33</a>）。这里镜头的位置可以任意拖动。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:xaringan-extra-4"></span>
<img src="images/xaringan-extra-4.png" alt="添加网络摄像头进行实时视频" width="500" />
<p class="caption">
图 3.33: 添加网络摄像头进行实时视频
</p>
</div>
<blockquote>
<p>当通过视频会议进行陈述时，包括演讲者的视频，或者在录制一节课或讲座时，这个功能真的非常好用！</p>
</blockquote>
</div>
<div id="xaringan-fit-screen" class="section level4" number="3.3.6.14">
<h4><span class="header-section-number">3.3.6.14</span> 调整 Xaringan 幻灯片的大小</h4>
<p><strong>使用方法</strong>：在 R Markdown 文件中加入下面代码，然后重新渲染。</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb143-1"><a href="rmarkdown-document.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r xaringan-fit-screen, echo=FALSE}    </span></span>
<span id="cb143-2"><a href="rmarkdown-document.html#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="in">xaringanExtra::use_fit_screen()  </span></span>
<span id="cb143-3"><a href="rmarkdown-document.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span>  </span></code></pre></div>
<p>使用快捷键 <code>Alt / Option + F</code> 使幻灯片适合屏幕，并忽略幻灯片比例（重新加载幻灯片以恢复正常）。官网给出了 gif 的<a href="https://pkg.garrickadenbuie.com/xaringanExtra/#/fit-to-screen">演示</a>。</p>
</div>
</div>
</div>
<div id="rmarkdown-word" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Word 文档</h2>
<p>要从 R Markdown 生成 Word 文档，可以使用输出格式 <code>word_document</code>。如果希望在文档中包含交叉引用，可以考虑输出格式 <code>bookdown::word_document2</code>，详细说明可见<a href="https://bookdown.org/yihui/rmarkdown-cookbook/cross-ref.html#cross-ref">这</a>。</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb144-1"><a href="rmarkdown-document.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb144-2"><a href="rmarkdown-document.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb144-3"><a href="rmarkdown-document.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">word_document</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb144-4"><a href="rmarkdown-document.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="at">  bookdown:</span><span class="fu">:word_document2</span><span class="kw">:</span><span class="at"> default</span><span class="co">  # for cross-references</span></span>
<span id="cb144-5"><a href="rmarkdown-document.html#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>关于 Word 输出的最常见问题有：</p>
<ol style="list-style-type: decimal">
<li><p>如何将自定义 Word 模板应用于文档？</p></li>
<li><p>如何在原始 R markdown 文件中纳入 Word 中所做的更改？</p></li>
<li><p>如何更改单个文档元素的样式？</p></li>
</ol>
<p>本章将一一解答以上问题。</p>
<div id="word-template" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> 创建 word 模板</h3>
<p>在 Rstudio 中打开一个新的 R 脚本并选择 Ducument 中的 Word（图 <a href="rmarkdown-document.html#fig:word-new1">3.34</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:word-new1"></span>
<img src="images/word-new1.png" alt="新建 R Markdown 时可选的 word 格式" width="525" />
<p class="caption">
图 3.34: 新建 R Markdown 时可选的 word 格式
</p>
</div>
<p>这时对应 R Markdown 文档中的 YAML 头所包含的内容为：</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb145-1"><a href="rmarkdown-document.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb145-2"><a href="rmarkdown-document.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;标题&quot;</span></span>
<span id="cb145-3"><a href="rmarkdown-document.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;张三&quot;</span></span>
<span id="cb145-4"><a href="rmarkdown-document.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;6/26/2021&quot;</span></span>
<span id="cb145-5"><a href="rmarkdown-document.html#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> word_document</span></span>
<span id="cb145-6"><a href="rmarkdown-document.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>之后就可以在这个模板下，将正文部分进行修改，并通过 <strong>Knit</strong> 进行编译。之后会跳出编译好的结果，通过系统默认应用打开。这就是基于 word 模板的工作流程。</p>
</div>
<div id="word-custom-template" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> 自定义 Word 模板</h3>
<p>可以将 Word 模板 文档中定义的样式应用到从 R Markdown 生成的新 Word 文档。 这种模板文档也称为“参考样式文档”。</p>
<blockquote>
<p><strong>关键之处</strong>：必须先通过 Pandoc 创建此模板文档，再更改其中的样式定义。 然后将此模板的路径传递给 <code>word_document</code> 的 <code>reference_docx</code> 选项，例如：</p>
</blockquote>
<div class="sourceCode" id="cb146"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb146-1"><a href="rmarkdown-document.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb146-2"><a href="rmarkdown-document.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb146-3"><a href="rmarkdown-document.html#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">word_document</span><span class="kw">:</span></span>
<span id="cb146-4"><a href="rmarkdown-document.html#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">reference_docx</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;template.docx&quot;</span></span>
<span id="cb146-5"><a href="rmarkdown-document.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p><code>template.docx</code> 文档必须从 Pandoc 生成。 可以从具有 <code>word_document</code> 输出格式的任意 R Markdown 文档创建此模板（该文档的实际内容无关紧要，但它应该包含想要设置样式的元素类型）。 然后打开<code>.docx</code> 文件，并编辑样式。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:word-template-1"></span>
<img src="images/word-template-1.png" alt="查找特定文档元素的样式。"  />
<p class="caption">
图 3.35: 查找特定文档元素的样式。
</p>
</div>
<p>图 <a href="rmarkdown-document.html#fig:word-template-1">3.35</a> 说明了可以通过 Word 中的“主页”选项卡打开“样式”窗口。当将光标移动到文档中的特定元素时，样式列表中的项目将被突出显示。如果想修改任何类型元素的样式，可以单击突出显示项的下拉菜单，将看到如图 <a href="rmarkdown-document.html#fig:word-template-2">3.36</a> 的对话框。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:word-template-2"></span>
<img src="images/word-template-2.png" alt=" 修改 Word 文档中元素的样式。"  />
<p class="caption">
图 3.36:  修改 Word 文档中元素的样式。
</p>
</div>
<p>修改完样式后，可以保存文档（使用一个不会被意外覆盖的文件名），并将其作为以后 Word 文档的模板。 当 Pandoc 使用该参考模板，并渲染出新的 Word 文档时，它会读取模板中的样式并将它们应用到新文档中。</p>
<blockquote>
<p>如果想了解更多关于如何创建自定义样式 Word 模板的详细教程的话。可以观看一段短视频 <a href="https://vimeo.com/110804387" class="uri">https://vimeo.com/110804387</a>，或者阅读这篇文章 <a href="https://rmarkdown.rstudio.com/articles_docx.html" class="uri">https://rmarkdown.rstudio.com/articles_docx.html</a>。</p>
</blockquote>
<p>有时，查找元素的样式名称并不简单，可能有多种样式应用于同一个元素，并且只会在样式列表中看到其中一个突出显示。这时，可能需要通过猜测或在线搜索才能确定要修改的实际样式。例如：需要点击“管理样式”按钮 （图<a href="rmarkdown-document.html#fig:word-template-1">3.35</a> 中样式列表底部从左到右的第三个按钮）。之后找到对应的样式并进行修改，例如，添加边框 （见图 <a href="rmarkdown-document.html#fig:word-table">3.37</a>）。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:word-table"></span>
<img src="images/word-table.png" alt="修改 Word 文档中的表格样式。"  />
<p class="caption">
图 3.37: 修改 Word 文档中的表格样式。
</p>
</div>
</div>
<div id="word-rmd" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> R Markdown 和 Word 之间的双向工作流程</h3>
<p>虽然从 R Markdown 生成 Word 文档很容易，但当其他人编辑 Word 文档并且必须手动将更改移植回原始 R Markdown 时，事情会变得特别痛苦。幸运的是，Noam Ross 为这个问题提供了一个非常不错的解决方案。 <strong>redoc</strong> 包 (<a href="https://github.com/noamross/redoc" class="uri">https://github.com/noamross/redoc</a>) 允许生成和修改一个 Word 文档，并将修改后的 Word 文档转换回 R Markdown。</p>
<blockquote>
<p>注意，截至撰写本文时（2020 年 6 月），<strong>redoc</strong> 包仍处于测试阶段，并且作者已暂停开发。如果想尝试一下，可以从 GitHub 安装这个包：</p>
</blockquote>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="rmarkdown-document.html#cb147-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;noamross/redoc&quot;</span>)</span></code></pre></div>
<p>安装包后，在输出格式中加入 <code>redoc::redoc</code>:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb148-1"><a href="rmarkdown-document.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb148-2"><a href="rmarkdown-document.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> redoc::redoc</span></span>
<span id="cb148-3"><a href="rmarkdown-document.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>这种输出格式会生成一个 Word 文档，实际上存储的是原始 Rmd 文档，因此可以将 Word 文档转换回 Rmd。 Word 中的跟踪更改将转换为使用 CriticMarkup 语法 (<a href="http://criticmarkup.com" class="uri">http://criticmarkup.com</a>) 编写的文本。 例如，<code>{++ important ++}</code> 表示在文本中插入“重要”一词。</p>
<p>可以通过 <code>redoc::dedoc()</code> 函数将 <code>redoc::redoc</code> 生成的 Word 文档转换为 Rmd，例如 <code>redoc::dedoc("file.docx")</code> 会生成 <code>file.Rmd</code>。 在此过程中，可以通过“track_changes”参数决定如何处理 Word 中的跟踪更改，例如，可以接受或拒绝更改，或将跟踪更改转换为 CriticMarkup。 建议使用 <code>track_changes = 'criticmarkup'</code> 以避免跟踪更改的永久丢失。</p>
<p>在编辑 Word 文档时，应该编辑_不是_由 R Markdown 中的代码块或内联 R 表达式自动生成的部分。 例如，如果表是由代码块中的 <code>knitr::kable()</code> 自动生成的，则不能编辑它，因为当通过 <code>dedoc()</code> 将 Word 转换为 Rmd 时，此类更改将丢失。为避免意外编辑代码块的自动结果，可以在 <code>redoc::redoc</code> 格式中将选项 <code>highlight_outputs</code> 设置为 <code>true</code>，这意味着自动输出的内容将在 Word 中突出显示（带有背景颜色）。 换句话说，就是告诉的合作者，他们不应触碰 Word 文档中这些突出显示的部分。</p>
<blockquote>
<p><strong>注意</strong>： <strong>redoc</strong> 包仍处于测试阶段，目前还不清楚它的未来，所以这里的介绍较为简短。如有疑问，建议阅读 GitHub 上的文档。</p>
</blockquote>
</div>
<div id="word-style" class="section level3" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> 个人风格元素</h3>
<p>由于 Markdown 的简单性，可以将一些全局样式应用到 Word 文档中（参见 <a href="rmarkdown-document.html#word-template">3.4.1</a> 部分），但是对单个元素进行样式设置并不简单，例如：更改单词的颜色、段落居中。</p>
<p>为了在 R 中处理 Office 文档更加容易，David Gohel 于 2018 年开始开发 <strong>officedown</strong> 包 <span class="citation">(<a href="#ref-R-officedown" role="doc-biblioref">Gohel and Ross 2021</a>)</span>，目的是在 R Markdown 中加入一些 <strong>officer</strong> <span class="citation">(<a href="#ref-R-officer" role="doc-biblioref">Gohel 2021</a>)</span> 特性。</p>
<blockquote>
<p>在撰写本文时，该软件包原始版本已在 CRAN 上发布，但仍处于测试阶段。</p>
</blockquote>
<p>可以从 CRAN 或 GitHub 安装它：</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="rmarkdown-document.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 通过 CRAN 来安装</span></span>
<span id="cb149-2"><a href="rmarkdown-document.html#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;officedown&quot;</span>)</span>
<span id="cb149-3"><a href="rmarkdown-document.html#cb149-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-4"><a href="rmarkdown-document.html#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者通过 GitHub 安装</span></span>
<span id="cb149-5"><a href="rmarkdown-document.html#cb149-5" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;davidgohel/officedown&quot;</span>)</span></code></pre></div>
<p>安装包后，在 R Markdown 文档中通过以下代码加载它：</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb150-1"><a href="rmarkdown-document.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, setup, include=FALSE}</span></span>
<span id="cb150-2"><a href="rmarkdown-document.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="in">library(&quot;officedown&quot;)</span></span>
<span id="cb150-3"><a href="rmarkdown-document.html#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><strong>officedown</strong> 包中输出格式为 <code>rdocx_document</code>，默认情况下，是基于 <code>rmarkdown::word_document</code> 并具有其他一些功能，例如：样式表和绘图。该包还允许通过 <strong>officer</strong> 包设置特定 Word 元素的样式。 例如，可以通过 <code>officer::fp_text()</code> 函数 创建样式，并通过内联 R 表达式 <code>ftext()</code> 将样式应用于一段文本：</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb151-1"><a href="rmarkdown-document.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb151-2"><a href="rmarkdown-document.html#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 带有officedown的样式文本</span></span>
<span id="cb151-3"><a href="rmarkdown-document.html#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb151-4"><a href="rmarkdown-document.html#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="co">  officedown::rdocx_document: default</span></span>
<span id="cb151-5"><a href="rmarkdown-document.html#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb151-6"><a href="rmarkdown-document.html#cb151-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-7"><a href="rmarkdown-document.html#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb151-8"><a href="rmarkdown-document.html#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="in">library(officedown)</span></span>
<span id="cb151-9"><a href="rmarkdown-document.html#cb151-9" aria-hidden="true" tabindex="-1"></a><span class="in">library(officer)</span></span>
<span id="cb151-10"><a href="rmarkdown-document.html#cb151-10" aria-hidden="true" tabindex="-1"></a><span class="in">ft &lt;- fp_text(color = &#39;red&#39;, bold = TRUE)</span></span>
<span id="cb151-11"><a href="rmarkdown-document.html#cb151-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb151-12"><a href="rmarkdown-document.html#cb151-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-13"><a href="rmarkdown-document.html#cb151-13" aria-hidden="true" tabindex="-1"></a><span class="fu"># 检验</span></span>
<span id="cb151-14"><a href="rmarkdown-document.html#cb151-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-15"><a href="rmarkdown-document.html#cb151-15" aria-hidden="true" tabindex="-1"></a>**officedown** 包是</span>
<span id="cb151-16"><a href="rmarkdown-document.html#cb151-16" aria-hidden="true" tabindex="-1"></a><span class="in">`r ftext(&#39;awesome&#39;, ft)`</span>!</span></code></pre></div>
<p>除了 <strong>officer</strong> 中的功能，<strong>officedown</strong> 还允许使用一些特殊的 HTML 注释来执行 <strong>officer</strong> 任务。 例如，函数 <code>officer::block_pour_docx()</code> 可用于将外部 Word 文档 导入当前文档，或者可以使用 R Markdown 中的 HTML 注释：</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb152-1"><a href="rmarkdown-document.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!---BLOCK_POUR_DOCX{file: &#39;my-file.docx&#39;}---&gt;</span></span></code></pre></div>
<p>这相当于内联 R 表达式：</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb153-1"><a href="rmarkdown-document.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="in">`r block_pour_docx(file = &#39;my-file.docx&#39;)`</span></span></code></pre></div>
<p>通过使用 <strong>officedown</strong> 和 <strong>officer</strong> 包还可以进行其他操作：</p>
<ul>
<li><p>插入分页符；</p></li>
<li><p>将内容放在多列布局中；</p></li>
<li><p>更改段落设置；</p></li>
<li><p>插入目录；</p></li>
<li><p>更改页面方向（横向或纵向）。</p></li>
</ul>
<p>如果想了解更多有关 <strong>officedown</strong> 的信息，可以通过以下文档 <a href="https://davidgohel.github.io/officedown/" class="uri">https://davidgohel.github.io/officedown/</a> 查阅信息。</p>
</div>
</div>
<div id="rmarkdown-new" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> 创建新的文档格式</h2>
<p>作为实现 R Markdown 技术最重要的软件包之一，<strong>rmarkdown</strong> 软件包中已经包括了很多
文档和演示文稿的输出格式。这些文档格式的背后，本质上仍然是一些 R 语言的函数。当
在 YAML 区块中指定输出格式的时候，实际上是在调用相应的函数并将函数的参数传递给它。</p>
<p>因此，也可以通过自定义一个新的函数来创建新的文档格式。新文档格式的函数通常需要
整合到新的 R Markdown 文档模板中去（参见第 <a href="#document-templates"><strong>??</strong></a> 章）。这是因为
文档模板是通过 R 语言软件包创建的，原本就可以加入新的函数。于是，通过 R 语言的软件包，
就实现了文档格式和模板的分发。这也是现有的 R Markdown 文档格式、模板的一贯做法<a href="references.html#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a>。</p>
<div id="new-existing" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> 从现有文档格式衍生新格式</h3>
<p>创建新的文档格式最简单的办法就是基于现有的文档格式衍生出新的文档格式。<strong>rmarkdown</strong>
内嵌的文档格式都是高度可定制的，包含众多可用参数。只需要为这些参数赋值，就可以创建
出一个新的文档格式出来。</p>
<p>下面的例子创建了一个新的文档格式函数 <code>quarterly_report</code> 以进行季度报告。
这个函数是基于 <strong>rmarkdown</strong> 的内嵌函数 <code>html_document</code> 工作的。</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="rmarkdown-document.html#cb154-1" aria-hidden="true" tabindex="-1"></a>quarterly_report <span class="ot">=</span> <span class="cf">function</span>(<span class="at">toc =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb154-2"><a href="rmarkdown-document.html#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 查找软件包的安装位置</span></span>
<span id="cb154-3"><a href="rmarkdown-document.html#cb154-3" aria-hidden="true" tabindex="-1"></a>  pkg_resource <span class="ot">=</span> <span class="cf">function</span>(...) {</span>
<span id="cb154-4"><a href="rmarkdown-document.html#cb154-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">system.file</span>(..., <span class="at">package =</span> <span class="st">&quot;mypackage&quot;</span>)</span>
<span id="cb154-5"><a href="rmarkdown-document.html#cb154-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb154-6"><a href="rmarkdown-document.html#cb154-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-7"><a href="rmarkdown-document.html#cb154-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 在软件包的子目录中找到新文档格式依赖的文档模板</span></span>
<span id="cb154-8"><a href="rmarkdown-document.html#cb154-8" aria-hidden="true" tabindex="-1"></a>  css    <span class="ot">=</span> <span class="fu">pkg_resource</span>(<span class="st">&quot;reports/styles.css&quot;</span>)</span>
<span id="cb154-9"><a href="rmarkdown-document.html#cb154-9" aria-hidden="true" tabindex="-1"></a>  header <span class="ot">=</span> <span class="fu">pkg_resource</span>(<span class="st">&quot;reports/quarterly/header.html&quot;</span>)</span>
<span id="cb154-10"><a href="rmarkdown-document.html#cb154-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-11"><a href="rmarkdown-document.html#cb154-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 调用 html_document 函数并指定其参数</span></span>
<span id="cb154-12"><a href="rmarkdown-document.html#cb154-12" aria-hidden="true" tabindex="-1"></a>  rmarkdown<span class="sc">::</span><span class="fu">html_document</span>(</span>
<span id="cb154-13"><a href="rmarkdown-document.html#cb154-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">toc =</span> toc, <span class="at">fig_width =</span> <span class="fl">6.5</span>, <span class="at">fig_height =</span> <span class="dv">4</span>,</span>
<span id="cb154-14"><a href="rmarkdown-document.html#cb154-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="cn">NULL</span>, <span class="at">css =</span> css,</span>
<span id="cb154-15"><a href="rmarkdown-document.html#cb154-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">includes =</span> rmarkdown<span class="sc">::</span><span class="fu">includes</span>(<span class="at">before_body =</span> header)</span>
<span id="cb154-16"><a href="rmarkdown-document.html#cb154-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb154-17"><a href="rmarkdown-document.html#cb154-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>这个新的输出格式实现了下列几项功能：</p>
<ol style="list-style-type: decimal">
<li><p>提供了一个参数 <code>toc</code> 来决定是否显示文档目录（参数最后被传递给了 <code>html_document</code>）；</p></li>
<li><p>指定了图片默认的长度和高度（这可以避免文档中的图片出现大小参差不齐的现象）；</p></li>
<li><p>指定了一个新的 CSS 样式表，同时也禁用了默认的 Bootstrap 主题样式表；</p></li>
<li><p>在每一份文档中都添加了一个标准的头文件。</p></li>
</ol>
<p>值得一提的是，第 3 项和第 4 项功能依赖于软件包提供的外部文件。也就是说，
在 <code>quarterly_report</code> 函数中，分别获取了 <code>"mypackage"</code> 的软件包中携带的 CSS 文件和
一个 HTML 文档，然后分别将 CSS 定义传递给了 <code>html_document</code> 函数的 <code>css</code> 和 <code>includes</code>
参数。在这里，后者使用了一个 <code>rmarkdown::includes()</code> 函数，从而将这个 HTML 文档（片段）
作为文档 <code>before_body</code> 的内容嵌入到使用该格式的文档中去。</p>
</div>
<div id="new-new" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> 完全的自定义输出格式</h3>
<p>在基于现有格式衍生新输出格式之外，也可以从底层出发创建出一个完全的新格式。
为此需要了解文档格式的底层工作原理，简单来说 R Markdown 的输出格式
由下列几个部分构成：</p>
<ol style="list-style-type: decimal">
<li><p>一系列的参数来确保 <strong>knitr</strong> 将 Rmd 文件正确的编译为 Markdown 格式的文档；</p></li>
<li><p>另外的一些参数来指导 Pandoc 将 Markdown 文档转换为其它输出格式（如 HTML）；</p></li>
<li><p>其它的一些标记或过滤器（通常用于处理输出格式的支持文件）。</p></li>
</ol>
<p>可以使用 <strong>rmarkdown</strong> 软件包中的函数 <code>output_format()</code> 来创建一个新的输出格式。
下面是一个例子：</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="rmarkdown-document.html#cb155-1" aria-hidden="true" tabindex="-1"></a>simple_html_format <span class="ot">=</span> <span class="cf">function</span>() {</span>
<span id="cb155-2"><a href="rmarkdown-document.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 这里使用了完整的引用方式来使用 output_format、knitr_options 和</span></span>
<span id="cb155-3"><a href="rmarkdown-document.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pandoc_options 等 3 个函数。</span></span>
<span id="cb155-4"><a href="rmarkdown-document.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  rmarkdown<span class="sc">::</span><span class="fu">output_format</span>(</span>
<span id="cb155-5"><a href="rmarkdown-document.html#cb155-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">knitr =</span> rmarkdown<span class="sc">::</span><span class="fu">knitr_options</span>(<span class="at">opts_chunk =</span> <span class="fu">list</span>(<span class="at">dev =</span> <span class="st">&#39;png&#39;</span>)),</span>
<span id="cb155-6"><a href="rmarkdown-document.html#cb155-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pandoc =</span> rmarkdown<span class="sc">::</span><span class="fu">pandoc_options</span>(<span class="at">to =</span> <span class="st">&quot;html&quot;</span>),</span>
<span id="cb155-7"><a href="rmarkdown-document.html#cb155-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">clean_supporting =</span> <span class="cn">FALSE</span></span>
<span id="cb155-8"><a href="rmarkdown-document.html#cb155-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb155-9"><a href="rmarkdown-document.html#cb155-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>在这个函数中，<strong>knitr</strong> 和 Pandoc 的参数分别由两个参数指定，其内容可以相当的复杂
（参见 <code>?rmarkdown::knitr_options</code> 和 <code>?rmarkdown::pandoc_options</code> 了解更多）。
而 <code>clean_supporting</code> 则控制是否清理文档编译过程中使用的临时文件。</p>
<p><code>output_format()</code> 函数中还有一个 <code>base_format</code> 参数用来指定一个原有的输出格式，
并在此基础上进行配置（相当于衍生格式）。</p>
<p>如果有其它的一些支持文件无法通过 <code>includes</code> 参数指定，那么还需要使用 <code>output_format()</code>
中的其它参数来帮助处理这些文件（例如，使用 <code>intermediates_generator</code> 来讲它们拷贝
到文档的输出目录中去）。</p>
<p>学习创建一个新的文档输出格式最好的方法可能是阅读原有格式的源代码。从 <strong>rmarkdown</strong>
的 <code>html_document</code> 和 <code>pdf_document</code> 开始是个不错的主意，其源代码的位置在
<a href="https://github.com/rstudio/rmarkdown/tree/master/R。如果新格式需要用到" class="uri">https://github.com/rstudio/rmarkdown/tree/master/R。如果新格式需要用到</a> Pandoc
模板，则请参见 <a href="#template-pandoc"><strong>??</strong></a> 及 Pandoc 的使用手册。</p>
</div>
<div id="new-using" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> 使用新的文档输出格式</h3>
<p>新的文档格式在创建完成后，需要安装到用户的本地环境中去（参见 <a href="#template-share"><strong>??</strong></a>）。
这样新的输出格式便可以通过 YAML 区块来应用。加入一个
名为 <strong>mypackage</strong> 的软件包中的 <code>quarterly_report</code> （假设该软件包已经安装成功），那么：</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb156-1"><a href="rmarkdown-document.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb156-2"><a href="rmarkdown-document.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;文档标题&quot;</span></span>
<span id="cb156-3"><a href="rmarkdown-document.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb156-4"><a href="rmarkdown-document.html#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="co">  mypackage::quarterly_report:</span></span>
<span id="cb156-5"><a href="rmarkdown-document.html#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb156-6"><a href="rmarkdown-document.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span></code></pre></div>
<p>这里面就设置了新的输出格式，并且将 <code>toc</code> 参数传递给了 <code>quarterly_report()</code> 函数。</p>

</div>
</div>
</div>
<h3>参考文献</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-officer" class="csl-entry">
Gohel, David. 2021. <em>Officer: Manipulation of Microsoft Word and PowerPoint Documents</em>. <a href="https://CRAN.R-project.org/package=officer">https://CRAN.R-project.org/package=officer</a>.
</div>
<div id="ref-R-officedown" class="csl-entry">
Gohel, David, and Noam Ross. 2021. <em>Officedown: Enhanced r Markdown Format for Word and PowerPoint</em>. <a href="https://CRAN.R-project.org/package=officedown">https://CRAN.R-project.org/package=officedown</a>.
</div>
<div id="ref-R-knitr" class="csl-entry">
Xie, Yihui. 2021a. <em>Knitr: A General-Purpose Package for Dynamic Report Generation in r</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-R-xaringan" class="csl-entry">
———. 2021b. <em>Xaringan: Presentation Ninja</em>. <a href="https://github.com/yihui/xaringan">https://github.com/yihui/xaringan</a>.
</div>
<div id="ref-R-xfun" class="csl-entry">
———. 2021c. <em>Xfun: Supporting Functions for Packages Maintained by Yihui Xie</em>. <a href="https://github.com/yihui/xfun">https://github.com/yihui/xfun</a>.
</div>
</div>
<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://rmarkdown-guide.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown-base.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rmarkdown-working.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cosname/rmarkdown-guide/edit/master/03-document.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
