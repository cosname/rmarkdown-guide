<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南</title>
  <meta name="description" content="第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南" />
  <meta name="github-repo" content="cosname/rmarkdown-guide" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南" />
  
  <meta name="twitter:description" content="第 5 章 使用 R Markdown 创建动态交互文档 | R Markdown 指南" />
  

<meta name="author" content="高春辉" />
<meta name="author" content="王祎帆" />
<meta name="author" content="闫求识" />
<meta name="author" content="庄亮亮" />
<meta name="author" content="杨晓龙" />


<meta name="date" content="2022-06-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rmarkdown-working.html"/>
<link rel="next" href="rmarkdown-operation.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Markdown 中文指南</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>前言</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#为什么要写这样一本书"><i class="fa fa-check"></i><b>0.1</b> 为什么要写这样一本书？</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#本书是怎么写出来的"><i class="fa fa-check"></i><b>0.2</b> 本书是怎么写出来的？</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#本书的创作理念是什么"><i class="fa fa-check"></i><b>0.3</b> 本书的创作理念是什么？</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#本书主要有哪些内容"><i class="fa fa-check"></i><b>0.4</b> 本书主要有哪些内容？</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#阅读本书时的注意事项"><i class="fa fa-check"></i><b>0.5</b> 阅读本书时的注意事项</a></li>
</ul></li>
<li class="part"><span><b>I 初识 R Markdown</b></span></li>
<li class="chapter" data-level="1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html"><i class="fa fa-check"></i><b>1</b> R Markdown概述</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#rmarkdown-source"><i class="fa fa-check"></i><b>1.1</b> R Markdown 的渊源</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#r-markdown-literate-programming"><i class="fa fa-check"></i><b>1.1.1</b> R Markdown 与文学化编程</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#rmarkdown-example"><i class="fa fa-check"></i><b>1.2</b> 以案例形式初识 R Markdown</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-report"><i class="fa fa-check"></i><b>1.2.1</b> 数据分析报告</a></li>
<li class="chapter" data-level="1.2.2" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-note"><i class="fa fa-check"></i><b>1.2.2</b> 交互笔记本</a></li>
<li class="chapter" data-level="1.2.3" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-cv"><i class="fa fa-check"></i><b>1.2.3</b> 个人简历</a></li>
<li class="chapter" data-level="1.2.4" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-resume"><i class="fa fa-check"></i><b>1.2.4</b> 网站</a></li>
<li class="chapter" data-level="1.2.5" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-ppt"><i class="fa fa-check"></i><b>1.2.5</b> 幻灯片</a></li>
<li class="chapter" data-level="1.2.6" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-forms"><i class="fa fa-check"></i><b>1.2.6</b> 交互报表</a></li>
<li class="chapter" data-level="1.2.7" data-path="rmarkdown-intro.html"><a href="rmarkdown-intro.html#example-dynamic"><i class="fa fa-check"></i><b>1.2.7</b> 动态文档</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html"><i class="fa fa-check"></i><b>2</b> R Markdown 的基础知识</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rstudio-config"><i class="fa fa-check"></i><b>2.1</b> R Studio 相关的配置</a></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-install"><i class="fa fa-check"></i><b>2.2</b> R Markdown 的安装</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-rmd"><i class="fa fa-check"></i><b>2.2.1</b> 安装 R Markdown</a></li>
<li class="chapter" data-level="2.2.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-tinytex"><i class="fa fa-check"></i><b>2.2.2</b> 安装 Tinytex</a></li>
<li class="chapter" data-level="2.2.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-git"><i class="fa fa-check"></i><b>2.2.3</b> 安装 Git (*)</a></li>
<li class="chapter" data-level="2.2.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#install-graph"><i class="fa fa-check"></i><b>2.2.4</b> 安装 RStudio 图形化编辑器</a></li>
<li class="chapter" data-level="2.2.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#create-rmd"><i class="fa fa-check"></i><b>2.2.5</b> 创建第一个 R Markdown 文档</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-compile"><i class="fa fa-check"></i><b>2.3</b> R Markdown 的编译过程</a></li>
<li class="chapter" data-level="2.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#rmarkdown-element"><i class="fa fa-check"></i><b>2.4</b> R Markdown 的基本元素</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#yaml"><i class="fa fa-check"></i><b>2.4.1</b> YAML 头部</a></li>
<li class="chapter" data-level="2.4.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#markdown"><i class="fa fa-check"></i><b>2.4.2</b> Markdown 语法</a></li>
<li class="chapter" data-level="2.4.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#block-inline"><i class="fa fa-check"></i><b>2.4.3</b> 代码区块和行内代码</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#page-layout"><i class="fa fa-check"></i><b>2.5</b> 页面设置和布局</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#output-width"><i class="fa fa-check"></i><b>2.5.1</b> 控制输出宽度</a></li>
<li class="chapter" data-level="2.5.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#line-break"><i class="fa fa-check"></i><b>2.5.2</b> 换行符号</a></li>
<li class="chapter" data-level="2.5.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#page-break"><i class="fa fa-check"></i><b>2.5.3</b> 分页符和分割线</a></li>
<li class="chapter" data-level="2.5.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#catalog"><i class="fa fa-check"></i><b>2.5.4</b> 目录</a></li>
<li class="chapter" data-level="2.5.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#chapter-number"><i class="fa fa-check"></i><b>2.5.5</b> 章节编号</a></li>
<li class="chapter" data-level="2.5.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#plottable-index"><i class="fa fa-check"></i><b>2.5.6</b> 图表的索引</a></li>
<li class="chapter" data-level="2.5.7" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#reference-index"><i class="fa fa-check"></i><b>2.5.7</b> 参考文献</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#document-element"><i class="fa fa-check"></i><b>2.6</b> R Markdown 的文档元素</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-plot"><i class="fa fa-check"></i><b>2.6.1</b> 图片</a></li>
<li class="chapter" data-level="2.6.2" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-table"><i class="fa fa-check"></i><b>2.6.2</b> 表格</a></li>
<li class="chapter" data-level="2.6.3" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-equation"><i class="fa fa-check"></i><b>2.6.3</b> 公式</a></li>
<li class="chapter" data-level="2.6.4" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-quote"><i class="fa fa-check"></i><b>2.6.4</b> 引用</a></li>
<li class="chapter" data-level="2.6.5" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-textcol"><i class="fa fa-check"></i><b>2.6.5</b> 字体颜色</a></li>
<li class="chapter" data-level="2.6.6" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-dynamic"><i class="fa fa-check"></i><b>2.6.6</b> 动态交互元件</a></li>
<li class="chapter" data-level="2.6.7" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-video"><i class="fa fa-check"></i><b>2.6.7</b> 音频和视频</a></li>
<li class="chapter" data-level="2.6.8" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-flow"><i class="fa fa-check"></i><b>2.6.8</b> 流程图</a></li>
<li class="chapter" data-level="2.6.9" data-path="rmarkdown-base.html"><a href="rmarkdown-base.html#element-gantt"><i class="fa fa-check"></i><b>2.6.9</b> 甘特图</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II 基于 R Markdown 的应用</b></span></li>
<li class="chapter" data-level="3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html"><i class="fa fa-check"></i><b>3</b> 使用 R Markdown 创建常用文档</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-html"><i class="fa fa-check"></i><b>3.1</b> HTML 文档</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-title"><i class="fa fa-check"></i><b>3.1.1</b> 目录和标题</a></li>
<li class="chapter" data-level="3.1.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-theme"><i class="fa fa-check"></i><b>3.1.2</b> 主题和样式</a></li>
<li class="chapter" data-level="3.1.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-pic"><i class="fa fa-check"></i><b>3.1.3</b> 图片和数据框</a></li>
<li class="chapter" data-level="3.1.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#html-module"><i class="fa fa-check"></i><b>3.1.4</b> 组件和内容</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-pdf"><i class="fa fa-check"></i><b>3.2</b> PDF 文档</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-rmd"><i class="fa fa-check"></i><b>3.2.1</b> 从 R Markdown 到 PDF 文档</a></li>
<li class="chapter" data-level="3.2.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-chinese"><i class="fa fa-check"></i><b>3.2.2</b> 在 PDF 文档中使用中文的注意事项</a></li>
<li class="chapter" data-level="3.2.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-general-setting"><i class="fa fa-check"></i><b>3.2.3</b> 与 HTML 文档中相通的一些设置</a></li>
<li class="chapter" data-level="3.2.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex"><i class="fa fa-check"></i><b>3.2.4</b> LaTeX 选项</a></li>
<li class="chapter" data-level="3.2.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex-citation"><i class="fa fa-check"></i><b>3.2.5</b> 使用 LaTeX 包处理参考文献</a></li>
<li class="chapter" data-level="3.2.6" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-latex-engine"><i class="fa fa-check"></i><b>3.2.6</b> LaTeX 的渲染引擎</a></li>
<li class="chapter" data-level="3.2.7" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#pdf-keep-tex"><i class="fa fa-check"></i><b>3.2.7</b> 保留生成的 TeX 中间文件</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-ppt"><i class="fa fa-check"></i><b>3.3</b> PPT 幻灯片</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#ioslides-presentation"><i class="fa fa-check"></i><b>3.3.1</b> ioslides 幻灯片</a></li>
<li class="chapter" data-level="3.3.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#slidy-presentation"><i class="fa fa-check"></i><b>3.3.2</b> Slidy 幻灯片</a></li>
<li class="chapter" data-level="3.3.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#beamer-presentation"><i class="fa fa-check"></i><b>3.3.3</b> Beamer 幻灯片</a></li>
<li class="chapter" data-level="3.3.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#powerpoint-presentation"><i class="fa fa-check"></i><b>3.3.4</b> PowerPoint 幻灯片</a></li>
<li class="chapter" data-level="3.3.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#ppt-xaringan"><i class="fa fa-check"></i><b>3.3.5</b> Xaringan 幻灯片</a></li>
<li class="chapter" data-level="3.3.6" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#xaringan-extension"><i class="fa fa-check"></i><b>3.3.6</b> Xaringan 幻灯片的扩展包</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-word"><i class="fa fa-check"></i><b>3.4</b> Word 文档</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-template"><i class="fa fa-check"></i><b>3.4.1</b> 创建 word 模板</a></li>
<li class="chapter" data-level="3.4.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-custom-template"><i class="fa fa-check"></i><b>3.4.2</b> 自定义 Word 模板</a></li>
<li class="chapter" data-level="3.4.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-rmd"><i class="fa fa-check"></i><b>3.4.3</b> R Markdown 和 Word 之间的双向工作流程</a></li>
<li class="chapter" data-level="3.4.4" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#word-style"><i class="fa fa-check"></i><b>3.4.4</b> 个人风格元素</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#rmarkdown-new"><i class="fa fa-check"></i><b>3.5</b> 创建新的文档格式</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-existing"><i class="fa fa-check"></i><b>3.5.1</b> 从现有文档格式衍生新格式</a></li>
<li class="chapter" data-level="3.5.2" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-new"><i class="fa fa-check"></i><b>3.5.2</b> 完全的自定义输出格式</a></li>
<li class="chapter" data-level="3.5.3" data-path="rmarkdown-document.html"><a href="rmarkdown-document.html#new-using"><i class="fa fa-check"></i><b>3.5.3</b> 使用新的文档输出格式</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html"><i class="fa fa-check"></i><b>4</b> 基于 R Markdown 工作与学习</a>
<ul>
<li class="chapter" data-level="4.1" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-email"><i class="fa fa-check"></i><b>4.1</b> 发邮件：<code>blastula</code></a></li>
<li class="chapter" data-level="4.2" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-package"><i class="fa fa-check"></i><b>4.2</b> 制作 R 包：<code>fusen</code></a></li>
<li class="chapter" data-level="4.3" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-cv"><i class="fa fa-check"></i><b>4.3</b> 制作简历：<code>datadrivencv</code></a></li>
<li class="chapter" data-level="4.4" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-bookdown"><i class="fa fa-check"></i><b>4.4</b> 写书和记学习笔记：<code>bookdown</code></a></li>
<li class="chapter" data-level="4.5" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-blogdown"><i class="fa fa-check"></i><b>4.5</b> 制作网站：<code>blogdown</code></a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#blogdown-intro"><i class="fa fa-check"></i><b>4.5.1</b> blogdown 简介</a></li>
<li class="chapter" data-level="4.5.2" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#blogdown-steps"><i class="fa fa-check"></i><b>4.5.2</b> 具体操作</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#rmarkdown-paper"><i class="fa fa-check"></i><b>4.6</b> 制作科技论文的支撑材料</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#建议文件结构"><i class="fa fa-check"></i><b>4.6.1</b> 建议文件结构</a></li>
<li class="chapter" data-level="4.6.2" data-path="rmarkdown-working.html"><a href="rmarkdown-working.html#分析报告的正文"><i class="fa fa-check"></i><b>4.6.2</b> 分析报告的正文</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III R Markdown 进阶操作</b></span></li>
<li class="chapter" data-level="5" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html"><i class="fa fa-check"></i><b>5</b> 使用 R Markdown 创建动态交互文档</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmarkdown-shiny"><i class="fa fa-check"></i><b>5.1</b> Web 交互界面：Shiny 小程序</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-start"><i class="fa fa-check"></i><b>5.1.1</b> 入门指南</a></li>
<li class="chapter" data-level="5.1.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-deploy"><i class="fa fa-check"></i><b>5.1.2</b> Shiny 部署</a></li>
<li class="chapter" data-level="5.1.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-app"><i class="fa fa-check"></i><b>5.1.3</b> 嵌入 Shiny 应用程序</a></li>
<li class="chapter" data-level="5.1.4" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-widget"><i class="fa fa-check"></i><b>5.1.4</b> Shiny 小部件</a></li>
<li class="chapter" data-level="5.1.5" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-link"><i class="fa fa-check"></i><b>5.1.5</b> Shiny 文档间的链接</a></li>
<li class="chapter" data-level="5.1.6" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#shiny-render"><i class="fa fa-check"></i><b>5.1.6</b> Shiny 文档的渲染</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmarkdown-dashboards"><i class="fa fa-check"></i><b>5.2</b> 交互式仪表盘：Dashboards</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-intro"><i class="fa fa-check"></i><b>5.2.1</b> Dashboards 入门</a></li>
<li class="chapter" data-level="5.2.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-layout"><i class="fa fa-check"></i><b>5.2.2</b> Dashboards 排版</a></li>
<li class="chapter" data-level="5.2.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-module"><i class="fa fa-check"></i><b>5.2.3</b> Dashboards 组件</a></li>
<li class="chapter" data-level="5.2.4" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#dashboards-shiny"><i class="fa fa-check"></i><b>5.2.4</b> Dashboards 与 Shiny</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#package-rmd"><i class="fa fa-check"></i><b>5.3</b> 在 R package 中使用 R Markdown</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmd-vignettes"><i class="fa fa-check"></i><b>5.3.1</b> 写软件包的文档</a></li>
<li class="chapter" data-level="5.3.2" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#package-template"><i class="fa fa-check"></i><b>5.3.2</b> R 包中的 R Markdown 模板</a></li>
<li class="chapter" data-level="5.3.3" data-path="rmarkdown-interaction.html"><a href="rmarkdown-interaction.html#rmd-auto"><i class="fa fa-check"></i><b>5.3.3</b> 定义一个自动化报告函数</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html"><i class="fa fa-check"></i><b>6</b> R Markdown 的操作技巧</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#table-advanced"><i class="fa fa-check"></i><b>6.1</b> 表格操作进阶</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#table-complex"><i class="fa fa-check"></i><b>6.1.1</b> 利用函数 <code>knitr::kable()</code> 生成复杂的表格</a></li>
<li class="chapter" data-level="6.1.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#kable-extra"><i class="fa fa-check"></i><b>6.1.2</b> 利用 <strong>kableExtra</strong> 美化表格</a></li>
<li class="chapter" data-level="6.1.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#else-table"><i class="fa fa-check"></i><b>6.1.3</b> 其它生成表格的包及功能介绍</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-options"><i class="fa fa-check"></i><b>6.2</b> 块选项</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-variable"><i class="fa fa-check"></i><b>6.2.1</b> 在块选项中使用变量</a></li>
<li class="chapter" data-level="6.2.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-error"><i class="fa fa-check"></i><b>6.2.2</b> 如何在遇到 error 的时候继续编译</a></li>
<li class="chapter" data-level="6.2.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-output"><i class="fa fa-check"></i><b>6.2.3</b> 控制输出</a></li>
<li class="chapter" data-level="6.2.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-reformat"><i class="fa fa-check"></i><b>6.2.4</b> 重新格式化源代码</a></li>
<li class="chapter" data-level="6.2.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-leading"><i class="fa fa-check"></i><b>6.2.5</b> 调整文本输出中的前导符号</a></li>
<li class="chapter" data-level="6.2.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-property"><i class="fa fa-check"></i><b>6.2.6</b> 为文本输出块添加属性 (*)</a></li>
<li class="chapter" data-level="6.2.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-multiplot"><i class="fa fa-check"></i><b>6.2.7</b> 同一张图的多种图像输出格式</a></li>
<li class="chapter" data-level="6.2.8" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-process"><i class="fa fa-check"></i><b>6.2.8</b> 图像的后期加工 (*)</a></li>
<li class="chapter" data-level="6.2.9" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-highquality"><i class="fa fa-check"></i><b>6.2.9</b> 输出高质量的图像 (*)</a></li>
<li class="chapter" data-level="6.2.10" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-step-plot"><i class="fa fa-check"></i><b>6.2.10</b> 带有低级绘图功能的逐步绘图 (*)</a></li>
<li class="chapter" data-level="6.2.11" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-print"><i class="fa fa-check"></i><b>6.2.11</b> 在代码块中自定义对象的打印格式 (*)</a></li>
<li class="chapter" data-level="6.2.12" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#option-hook"><i class="fa fa-check"></i><b>6.2.12</b> 选项钩子 (*)</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#other-language"><i class="fa fa-check"></i><b>6.3</b> 与其他语言的结合</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#register-language"><i class="fa fa-check"></i><b>6.3.1</b> 注册自定义语言引擎 (*)</a></li>
<li class="chapter" data-level="6.3.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#python-rmd"><i class="fa fa-check"></i><b>6.3.2</b> 运行 Python 代码并与 Python 交互</a></li>
<li class="chapter" data-level="6.3.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-asis"><i class="fa fa-check"></i><b>6.3.3</b> 通过 <code>asis</code> 引擎有条件地执行内容</a></li>
<li class="chapter" data-level="6.3.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-shell"><i class="fa fa-check"></i><b>6.3.4</b> 执行 Shell 脚本</a></li>
<li class="chapter" data-level="6.3.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cat-file"><i class="fa fa-check"></i><b>6.3.5</b> 通过 cat 引擎将块内容写入文件</a></li>
<li class="chapter" data-level="6.3.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#sas-rmd"><i class="fa fa-check"></i><b>6.3.6</b> 运行 SAS 代码</a></li>
<li class="chapter" data-level="6.3.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#stata-rmd"><i class="fa fa-check"></i><b>6.3.7</b> 运行 Stata 代码</a></li>
<li class="chapter" data-level="6.3.8" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#asymptote-plot"><i class="fa fa-check"></i><b>6.3.8</b> 用渐近线 Asymptote 创建图形</a></li>
<li class="chapter" data-level="6.3.9" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#sass-scss"><i class="fa fa-check"></i><b>6.3.9</b> 使用 Sass/SCSS 构建 HTML 页面</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#output-hook"><i class="fa fa-check"></i><b>6.4</b> 输出钩子 (*)</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#edit-source"><i class="fa fa-check"></i><b>6.4.1</b> 编辑源代码</a></li>
<li class="chapter" data-level="6.4.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#source-index"><i class="fa fa-check"></i><b>6.4.2</b> 向源代码中添加行号</a></li>
<li class="chapter" data-level="6.4.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#scrollable-output"><i class="fa fa-check"></i><b>6.4.3</b> 可滚动的文本输出</a></li>
<li class="chapter" data-level="6.4.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#truncated-output"><i class="fa fa-check"></i><b>6.4.4</b> 截断文本输出</a></li>
<li class="chapter" data-level="6.4.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#html5-plot"><i class="fa fa-check"></i><b>6.4.5</b> 以 HTML5 格式输出图像</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cache"><i class="fa fa-check"></i><b>6.5</b> 缓存 (*)</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#chunk-cache"><i class="fa fa-check"></i><b>6.5.1</b> 缓存耗时的代码块</a></li>
<li class="chapter" data-level="6.5.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cache-path"><i class="fa fa-check"></i><b>6.5.2</b> 为多种输出格式缓存代码块</a></li>
<li class="chapter" data-level="6.5.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cache-lazy"><i class="fa fa-check"></i><b>6.5.3</b> 缓存大型的对象</a></li>
<li class="chapter" data-level="6.5.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#cache-rds"><i class="fa fa-check"></i><b>6.5.4</b> 一个更透明的缓存机制</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#other-trick"><i class="fa fa-check"></i><b>6.6</b> 其它使用 knitr 的小技巧 (*)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#reuse-chunk"><i class="fa fa-check"></i><b>6.6.1</b> 重复使用代码块</a></li>
<li class="chapter" data-level="6.6.2" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#use-creat"><i class="fa fa-check"></i><b>6.6.2</b> 在创建对象之前使用它 (*)</a></li>
<li class="chapter" data-level="6.6.3" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#compile-exit"><i class="fa fa-check"></i><b>6.6.3</b> 提前退出编译</a></li>
<li class="chapter" data-level="6.6.4" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#plot-show-else"><i class="fa fa-check"></i><b>6.6.4</b> 生成一个图像并在其他地方显示</a></li>
<li class="chapter" data-level="6.6.5" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#modify-before"><i class="fa fa-check"></i><b>6.6.5</b> 修改之前代码块中的图像</a></li>
<li class="chapter" data-level="6.6.6" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#reuse-option"><i class="fa fa-check"></i><b>6.6.6</b> 保存一组块选项并重复使用它们 (*)</a></li>
<li class="chapter" data-level="6.6.7" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#knit-expand"><i class="fa fa-check"></i><b>6.6.7</b> 使用 <code>knitr::knit_expand()</code> 来生成 Rmd 源代码</a></li>
<li class="chapter" data-level="6.6.8" data-path="rmarkdown-operation.html"><a href="rmarkdown-operation.html#repeat-label"><i class="fa fa-check"></i><b>6.6.8</b> 允许代码块中的标签重复 (*)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html"><i class="fa fa-check"></i><b>7</b> 使用 R Markdown 开展项目工作</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#project-manage"><i class="fa fa-check"></i><b>7.1</b> 使用 R Markdown 在工作中管理项目</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#external-r"><i class="fa fa-check"></i><b>7.1.1</b> 来自外部的 R 脚本</a></li>
<li class="chapter" data-level="7.1.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#external-read"><i class="fa fa-check"></i><b>7.1.2</b> 将外部脚本读取到一个块中</a></li>
<li class="chapter" data-level="7.1.3" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#external-multi"><i class="fa fa-check"></i><b>7.1.3</b> 从外部脚本读取多个代码块 (*)</a></li>
<li class="chapter" data-level="7.1.4" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#child-document"><i class="fa fa-check"></i><b>7.1.4</b> 子文档 (*)</a></li>
<li class="chapter" data-level="7.1.5" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#keep-plot"><i class="fa fa-check"></i><b>7.1.5</b> 保留图像文件</a></li>
<li class="chapter" data-level="7.1.6" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#chunk-directory"><i class="fa fa-check"></i><b>7.1.6</b> R 代码块的工作目录</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#work-flow"><i class="fa fa-check"></i><b>7.2</b> 使用 R Markdown 实现工作流</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#rstudio-shortcut"><i class="fa fa-check"></i><b>7.2.1</b> 使用 RStudio 键盘快捷键</a></li>
<li class="chapter" data-level="7.2.2" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#spell-check"><i class="fa fa-check"></i><b>7.2.2</b> R Markdown 的拼写检查</a></li>
<li class="chapter" data-level="7.2.3" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#render-rmd"><i class="fa fa-check"></i><b>7.2.3</b> 用 <code>rmarkdown::render()</code> 呈现 R Markdown</a></li>
<li class="chapter" data-level="7.2.4" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#parameterized-reports"><i class="fa fa-check"></i><b>7.2.4</b> 参数化的报告</a></li>
<li class="chapter" data-level="7.2.5" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#customize-button"><i class="fa fa-check"></i><b>7.2.5</b> 自定义 <code>Knit</code> 按钮 (*)</a></li>
<li class="chapter" data-level="7.2.6" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#google-drive"><i class="fa fa-check"></i><b>7.2.6</b> 通过 Google Drive 对 Rmd 文档进行协作</a></li>
<li class="chapter" data-level="7.2.7" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#workflowr-web"><i class="fa fa-check"></i><b>7.2.7</b> 用 <code>workflowr</code> 将 R Markdown 项目组织到一个研究网站上</a></li>
<li class="chapter" data-level="7.2.8" data-path="rmarkdown-project.html"><a href="rmarkdown-project.html#github-actions"><i class="fa fa-check"></i><b>7.2.8</b> 使用 GitHub Actions 实现自动化部署</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">本书由 bookdown 强力驱动</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Markdown 指南</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rmarkdown-interaction" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">第 5 章</span> 使用 R Markdown 创建动态交互文档<a href="rmarkdown-interaction.html#rmarkdown-interaction" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="rmarkdown-shiny" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Web 交互界面：Shiny 小程序<a href="rmarkdown-interaction.html#rmarkdown-shiny" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Shiny 小程序是由 R 驱动的交互式 Web 应用程序。基于 Shiny 的 Web 应用程序（Shiny App）用途十分广泛，功能也很强大，实现的方式也多种多样。本书主要介绍与 R Markdown 文档应用相关的一部分知识，欲了解更多请参见 <a href="https://shiny.rstudio.com/">Shiny 官网</a>。</p>
<p>Shiny 包是由 R 驱动的交互式 Web 应用程序。如果读者想从 R Markdown 文档中调用 Shiny 代码，只需在 YAML 元数据中添加 <code>runtime: shiny</code> 即可。由于 Shiny 构建 Web 应用程序功能十分强大，本书只介绍部分的 Shiny 知识。在阅读本章之前，如果不了解该包，可以先通过以下网站 <a href="https://shiny.rstudio.com" class="uri">https://shiny.rstudio.com</a> 进行大致了解。</p>
<div id="shiny-start" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> 入门指南<a href="rmarkdown-interaction.html#shiny-start" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在 YAML 元数据中加入 <code>runtime: shiny</code>，可以将任何基于 html 的 R Markdown 文档变成 Shiny 文档，例如：</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb181-1"><a href="rmarkdown-interaction.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb181-2"><a href="rmarkdown-interaction.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Shiny Document&quot;</span></span>
<span id="cb181-3"><a href="rmarkdown-interaction.html#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> html_document</span></span>
<span id="cb181-4"><a href="rmarkdown-interaction.html#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="fu">runtime</span><span class="kw">:</span><span class="at"> shiny</span></span>
<span id="cb181-5"><a href="rmarkdown-interaction.html#cb181-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>注意，R Markdown 文档的输出格式必须是 HTML 格式。也就是说，文档最后生成的是一个 Web 页面（<code>*.html</code> 文件）。</p>
<blockquote>
<p><strong>注意：</strong> 非 <code>html</code> 格式，如 <code>pdf_document</code> 和 <code>word_document</code> 将不能与 Shiny 同时运行。另外，一些演示格式也是 HTML 格式，比如<code>ioslides_presentation</code> 和 <code>slidy_presentation</code>，它们是可以与 Shiny 相结合的。</p>
</blockquote>
<p>当然，也可以通过 RStudio 构建一个新的 Shiny 文档。步骤如下：File -&gt; new File -&gt; R Markdown 并选择 Shiny，具体见图 <a href="rmarkdown-interaction.html#fig:shiny-new-document">5.1</a>。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shiny-new-document"></span>
<img src="images/shiny-new-document.png" alt=" 在 RStudio 中创建一个新的 Shiny 文档。"  />
<p class="caption">
图 5.1:  在 RStudio 中创建一个新的 Shiny 文档。
</p>
</div>
<p>如果读者想在 RStudio 中运行 Shiny 文档，需要单击工具栏上的 “Run Document” 按钮（当 RStudio 检测到这是 Shiny 文档时，它会自动将 Knit 按钮替换为 Run Document）。如果读者没有使用 RStudio，或者想在 R 控制台运行文档进行故障排除，可以调用函数 <code>rmarkdown::run()</code> 并将文件名传递给它。</p>
<p>可以在文档中嵌入 Shiny 的输入和输出。如果输入发生变化时，输出将自动更新。例如，创建一个名称为 <code>rows</code> 的数字输入（ <code>numericInput</code> ），然后在输出中通过 <code>input$rows</code> 引用其值：</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb182-1"><a href="rmarkdown-interaction.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE}</span></span>
<span id="cb182-2"><a href="rmarkdown-interaction.html#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="in">numericInput(&quot;rows&quot;, &quot;How many cars?&quot;, 5)</span></span>
<span id="cb182-3"><a href="rmarkdown-interaction.html#cb182-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-4"><a href="rmarkdown-interaction.html#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="in">renderTable({</span></span>
<span id="cb182-5"><a href="rmarkdown-interaction.html#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="in">  head(cars, input$rows)</span></span>
<span id="cb182-6"><a href="rmarkdown-interaction.html#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb182-7"><a href="rmarkdown-interaction.html#cb182-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shiny-table"></span>
<img src="images/shiny-table.png" alt="增加 Shiny 文档中表中的行数。"  />
<p class="caption">
图 5.2: 增加 Shiny 文档中表中的行数。
</p>
</div>
<p>在上面的示例中，输出代码包含在 <code>renderTable()</code> 中。 Shiny 中还有许多其他渲染功能，可用于图片、结果输出等。 下面使用 <code>renderPlot()</code> 输出可交互柱状图：</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb183-1"><a href="rmarkdown-interaction.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE} </span></span>
<span id="cb183-2"><a href="rmarkdown-interaction.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="in">sliderInput(&quot;bins&quot;, &quot;Number of bins:&quot;, 30, min = 1, max = 50)</span></span>
<span id="cb183-3"><a href="rmarkdown-interaction.html#cb183-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-4"><a href="rmarkdown-interaction.html#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="in">renderPlot({</span></span>
<span id="cb183-5"><a href="rmarkdown-interaction.html#cb183-5" aria-hidden="true" tabindex="-1"></a><span class="in">  x    = faithful[, 2]  # Old Faithful Geyser data</span></span>
<span id="cb183-6"><a href="rmarkdown-interaction.html#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="in">  bins = seq(min(x), max(x), length.out = input$bins + 1)</span></span>
<span id="cb183-7"><a href="rmarkdown-interaction.html#cb183-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-8"><a href="rmarkdown-interaction.html#cb183-8" aria-hidden="true" tabindex="-1"></a><span class="in">  # 用指定的格子大小绘制可交互的直方图</span></span>
<span id="cb183-9"><a href="rmarkdown-interaction.html#cb183-9" aria-hidden="true" tabindex="-1"></a><span class="in">  hist(x, breaks = bins, col = &#39;darkgray&#39;, border = &#39;white&#39;)</span></span>
<span id="cb183-10"><a href="rmarkdown-interaction.html#cb183-10" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb183-11"><a href="rmarkdown-interaction.html#cb183-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shiny-plot"></span>
<img src="images/shiny-plot.png" alt=" Shiny 文档输出可交互的直方图。"  />
<p class="caption">
图 5.3:  Shiny 文档输出可交互的直方图。
</p>
</div>
</div>
<div id="shiny-deploy" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Shiny 部署<a href="rmarkdown-interaction.html#shiny-deploy" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>如果在本地运行一个 Shiny 文档时，默认情况下它会使用本地 R 会话，并且只有运行的人能与该文档进行交互。如果希望与没有安装 R 的用户共享文档，或者不希望在本地运行文档，则必须将文档部署到服务器上，并共享文档的 URL。那么其他人只需要一个 web 浏览器就可以访问文档。</p>
<p>有两种方法可以部署 Shiny 文档。1. 使用 RStudio 提供的托管服务；2. 搭载到自己的服务器上。</p>
<!-- 第一种方法从技术上来说比较容易，但是有时可能不被允许使用外部托管服务，因此读者必须在自己的服务器上安装必需的软件（Shiny Server 或 RStudio Connect）\index{Shiny Server}\index{RStudio Connect}才能部署 Shiny 文档。 -->
<div id="shinyapps.io" class="section level4 hasAnchor" number="5.1.2.1">
<h4><span class="header-section-number">5.1.2.1</span> ShinyApps.io<a href="rmarkdown-interaction.html#shinyapps.io" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>读者可以把 Shiny 文档发布到 ShinyApps (<a href="https://shinyapps.io" class="uri">https://shinyapps.io</a>) 进行托管。</p>
<p>需要满足以下两个条件：</p>
<ol style="list-style-type: decimal">
<li><p>在 ShinyApps 上注册账号。</p></li>
<li><p>安装了最新版本的 <strong>rsconnect</strong> 包。安装方式如下：</p></li>
</ol>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="rmarkdown-interaction.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rsconnect&quot;</span>)</span></code></pre></div>
<p>然后，对需要部署的 Shiny 文档所对应的工作目录中执行以下语句：</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="rmarkdown-interaction.html#cb185-1" aria-hidden="true" tabindex="-1"></a>rsconnect<span class="sc">::</span><span class="fu">deployApp</span>()</span></code></pre></div>
<p>如果使用的是 RStudio，在运行 Shiny 文档时，也可以使用窗口右上角的 <code>Publish</code> 按钮(图 <a href="rmarkdown-interaction.html#fig:shiny-deploy">5.4</a>)。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shiny-deploy"></span>
<img src="images/shiny-deploy.png" alt="部署 Shiny 文档到 ShinyApps.io. 上。"  />
<p class="caption">
图 5.4: 部署 Shiny 文档到 ShinyApps.io. 上。
</p>
</div>
<p>如果目录中有一个名为 <code>index.Rmd</code> 的文件，它将用作该目录的默认文档。如果想访问 Rmd 文档，则应在 URL 中指定 Rmd 文件的显式路径。</p>
<p>例如，部署到 ShinyApps 的 <code>index.Rmd</code> 的 URL 可以采用以下形式 <code>https://example.shinyapps.io/appName/</code>，而 <code>test.Rmd</code> 的 URL 可以采用以下形式 <code>https://example.shinyapps.io/appName/test.Rmd</code>。</p>
</div>
<div id="shiny-server-rstudio-connect" class="section level4 hasAnchor" number="5.1.2.2">
<h4><span class="header-section-number">5.1.2.2</span> Shiny Server / RStudio Connect<a href="rmarkdown-interaction.html#shiny-server-rstudio-connect" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>除此之外，Shiny Server （<a href="https://www.rstudio.com/products/shiny/shiny-server/" class="uri">https://www.rstudio.com/products/shiny/shiny-server/</a>） 和 RStudio Connect（<a href="https://www.rstudio.com/products/connect/" class="uri">https://www.rstudio.com/products/connect/</a>） 都可以发布 Shiny 文档，但是读者需要熟悉有关 Linux 的知识。由于该内容较为复杂与丰富，超出本书读者的需求，所以在此不做过多介绍。</p>
</div>
</div>
<div id="shiny-app" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> 嵌入 Shiny 应用程序<a href="rmarkdown-interaction.html#shiny-app" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>除了在 R Markdown 中嵌入单个 Shiny 的输入和输出外，还可以在文档中嵌入一个独立的 Shiny 应用程序。有两种方法可以做到这一点：</p>
<ol style="list-style-type: decimal">
<li><p>使用 <code>shinyApp()</code> 函数内部定义应用程序;</p></li>
<li><p>使用 <code>shinyAppDir()</code> 函数引用外部应用程序。</p></li>
</ol>
<blockquote>
<p><strong>注意</strong>：这两个函数在 <strong>shiny</strong> 包中，当在 YAML 元数据指定 <code>runtime: shiny</code> 时，它们会被自动加载。因此，读者不必调用 <code>library(shiny)</code> 来加载 shiny。</p>
</blockquote>
<div id="shiny-embed-inline" class="section level4 hasAnchor" number="5.1.3.1">
<h4><span class="header-section-number">5.1.3.1</span> 内部定义应用程序<a href="rmarkdown-interaction.html#shiny-embed-inline" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>下面例子将 Shiny 应用程序写在了 Rmarkdown 内部中：</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb186-1"><a href="rmarkdown-interaction.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo=FALSE} </span></span>
<span id="cb186-2"><a href="rmarkdown-interaction.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="in">shinyApp(</span></span>
<span id="cb186-3"><a href="rmarkdown-interaction.html#cb186-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-4"><a href="rmarkdown-interaction.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="in">  ui = fluidPage(</span></span>
<span id="cb186-5"><a href="rmarkdown-interaction.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="in">    selectInput(&quot;region&quot;, &quot;Region:&quot;,</span></span>
<span id="cb186-6"><a href="rmarkdown-interaction.html#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="in">                choices = colnames(WorldPhones)),</span></span>
<span id="cb186-7"><a href="rmarkdown-interaction.html#cb186-7" aria-hidden="true" tabindex="-1"></a><span class="in">    plotOutput(&quot;phonePlot&quot;)</span></span>
<span id="cb186-8"><a href="rmarkdown-interaction.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="in">  ),</span></span>
<span id="cb186-9"><a href="rmarkdown-interaction.html#cb186-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-10"><a href="rmarkdown-interaction.html#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="in">  server = function(input, output) {</span></span>
<span id="cb186-11"><a href="rmarkdown-interaction.html#cb186-11" aria-hidden="true" tabindex="-1"></a><span class="in">    output$phonePlot = renderPlot({</span></span>
<span id="cb186-12"><a href="rmarkdown-interaction.html#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="in">      barplot(WorldPhones[,input$region]*1000,</span></span>
<span id="cb186-13"><a href="rmarkdown-interaction.html#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="in">              ylab = &quot;Number of Telephones&quot;, xlab = &quot;Year&quot;)</span></span>
<span id="cb186-14"><a href="rmarkdown-interaction.html#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="in">    })</span></span>
<span id="cb186-15"><a href="rmarkdown-interaction.html#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb186-16"><a href="rmarkdown-interaction.html#cb186-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-17"><a href="rmarkdown-interaction.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="in">  options = list(height = 500)</span></span>
<span id="cb186-18"><a href="rmarkdown-interaction.html#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb186-19"><a href="rmarkdown-interaction.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<blockquote>
<p><strong>注意</strong>：使用 <code>height</code> 参数来确定嵌入式应用程序应该占用多少高度。</p>
</blockquote>
</div>
<div id="外联应用程序" class="section level4 hasAnchor" number="5.1.3.2">
<h4><span class="header-section-number">5.1.3.2</span> 外联应用程序<a href="rmarkdown-interaction.html#外联应用程序" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>下面例子展示嵌入了一个定义在另一个目录中的 Shiny 应用程序。</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb187-1"><a href="rmarkdown-interaction.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE} </span></span>
<span id="cb187-2"><a href="rmarkdown-interaction.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="in">shinyAppDir(</span></span>
<span id="cb187-3"><a href="rmarkdown-interaction.html#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="in">  system.file(&quot;examples/06_tabsets&quot;, package=&quot;shiny&quot;),</span></span>
<span id="cb187-4"><a href="rmarkdown-interaction.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="in">  options = list(width = &quot;100%&quot;, height = 700)</span></span>
<span id="cb187-5"><a href="rmarkdown-interaction.html#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb187-6"><a href="rmarkdown-interaction.html#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<blockquote>
<p><strong>注意</strong>：在上面的所有代码块中，都使用了 <code>echo = FALSE</code> 的选项。这是防止代码块中的 R 代码与 Shiny 组件一起呈现到输出文档中。</p>
</blockquote>
</div>
</div>
<div id="shiny-widget" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Shiny 小部件<a href="rmarkdown-interaction.html#shiny-widget" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Shiny 小部件让使用者能够使用一个函数调用创建包含在 R Markdown 文档中的可重复使用的 Shiny 组件。还可以直接从控制台调用 Shiny 小部件(在创作过程中很有用)，并在 RStudio Viewer 窗格或外部 Web 浏览器中显示它们的输出。</p>
<div id="shinyapp-函数" class="section level4 hasAnchor" number="5.1.4.1">
<h4><span class="header-section-number">5.1.4.1</span> <code>shinyApp()</code> 函数<a href="rmarkdown-interaction.html#shinyapp-函数" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Shiny 窗口小部件的核心是使用 <code>shinyApp()</code> 函数创建的微型应用程序。使用者无需像传统的 Shiny 应用程序那样，既要创建用户界面（UI），又要创建服务器端（Server）。而是将 UI 和 Server 定义作为参数传递给 <code>shinyApp()</code> 函数。 本书会在第 <a href="rmarkdown-interaction.html#shiny-embed-inline">5.1.3.1</a> 节中给出了一个示例。</p>
<p>接下来，先给出最简单的 Shiny 小部件类型———返回 <code>shinyApp()</code> 的 R 函数。</p>
</div>
<div id="例子k-means-聚类" class="section level4 hasAnchor" number="5.1.4.2">
<h4><span class="header-section-number">5.1.4.2</span> 例子：k-means 聚类<a href="rmarkdown-interaction.html#例子k-means-聚类" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>rmdexamples</strong> 包 (<a href="https://github.com/rstudio/rmdexamples" class="uri">https://github.com/rstudio/rmdexamples</a>) 包含以上形式实现的 Shiny 小部件示例。 <code>kmeans_cluster()</code> 函数接受单个数据集（<code>dataset</code>）参数，并返回一个小部件来显示 k-Means 聚类的结果。读者可以在 R Markdown 文档中使用它：</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb188-1"><a href="rmarkdown-interaction.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE} </span></span>
<span id="cb188-2"><a href="rmarkdown-interaction.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="in">library(rmdexamples)</span></span>
<span id="cb188-3"><a href="rmarkdown-interaction.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="in">kmeans_cluster(iris)</span></span>
<span id="cb188-4"><a href="rmarkdown-interaction.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>图 <a href="rmarkdown-interaction.html#fig:shiny-widget-kmeans">5.5</a> 展示了在运行文档时小部件的样子。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shiny-widget-kmeans"></span>
<img src="images/shiny-widget-kmeans.png" alt=" 在数据集上应用 k-Means 聚类的 Shiny 小部件。"  />
<p class="caption">
图 5.5:  在数据集上应用 k-Means 聚类的 Shiny 小部件。
</p>
</div>
<p>下面是 <code>kmeans_cluster()</code> 函数的源代码：</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="rmarkdown-interaction.html#cb189-1" aria-hidden="true" tabindex="-1"></a>kmeans_cluster <span class="ot">=</span> <span class="cf">function</span>(dataset) {</span>
<span id="cb189-2"><a href="rmarkdown-interaction.html#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="rmarkdown-interaction.html#cb189-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(shiny)  </span>
<span id="cb189-4"><a href="rmarkdown-interaction.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">=</span> <span class="fu">names</span>(dataset)</span>
<span id="cb189-5"><a href="rmarkdown-interaction.html#cb189-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-6"><a href="rmarkdown-interaction.html#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">shinyApp</span>(</span>
<span id="cb189-7"><a href="rmarkdown-interaction.html#cb189-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb189-8"><a href="rmarkdown-interaction.html#cb189-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fluidRow</span>(<span class="at">style =</span> <span class="st">&quot;padding-bottom: 20px;&quot;</span>,</span>
<span id="cb189-9"><a href="rmarkdown-interaction.html#cb189-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">column</span>(<span class="dv">4</span>, <span class="fu">selectInput</span>(<span class="st">&#39;xcol&#39;</span>, <span class="st">&#39;X Variable&#39;</span>, vars)),</span>
<span id="cb189-10"><a href="rmarkdown-interaction.html#cb189-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">column</span>(<span class="dv">4</span>, <span class="fu">selectInput</span>(<span class="st">&#39;ycol&#39;</span>, <span class="st">&#39;Y Variable&#39;</span>, vars,</span>
<span id="cb189-11"><a href="rmarkdown-interaction.html#cb189-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">selected =</span> vars[<span class="dv">2</span>])),</span>
<span id="cb189-12"><a href="rmarkdown-interaction.html#cb189-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">column</span>(<span class="dv">4</span>, <span class="fu">numericInput</span>(<span class="st">&#39;clusters&#39;</span>, <span class="st">&#39;Cluster count&#39;</span>, <span class="dv">3</span>,</span>
<span id="cb189-13"><a href="rmarkdown-interaction.html#cb189-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">9</span>))</span>
<span id="cb189-14"><a href="rmarkdown-interaction.html#cb189-14" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb189-15"><a href="rmarkdown-interaction.html#cb189-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fluidRow</span>(</span>
<span id="cb189-16"><a href="rmarkdown-interaction.html#cb189-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="st">&#39;kmeans&#39;</span>, <span class="at">height =</span> <span class="st">&quot;400px&quot;</span>)  </span>
<span id="cb189-17"><a href="rmarkdown-interaction.html#cb189-17" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb189-18"><a href="rmarkdown-interaction.html#cb189-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb189-19"><a href="rmarkdown-interaction.html#cb189-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb189-20"><a href="rmarkdown-interaction.html#cb189-20" aria-hidden="true" tabindex="-1"></a>      <span class="co">#  将选定的变量组合到一个新的数据框中</span></span>
<span id="cb189-21"><a href="rmarkdown-interaction.html#cb189-21" aria-hidden="true" tabindex="-1"></a>      selectedData <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb189-22"><a href="rmarkdown-interaction.html#cb189-22" aria-hidden="true" tabindex="-1"></a>        dataset[, <span class="fu">c</span>(input<span class="sc">$</span>xcol, input<span class="sc">$</span>ycol)]</span>
<span id="cb189-23"><a href="rmarkdown-interaction.html#cb189-23" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb189-24"><a href="rmarkdown-interaction.html#cb189-24" aria-hidden="true" tabindex="-1"></a>      clusters <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb189-25"><a href="rmarkdown-interaction.html#cb189-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">kmeans</span>(<span class="fu">selectedData</span>(), input<span class="sc">$</span>clusters)</span>
<span id="cb189-26"><a href="rmarkdown-interaction.html#cb189-26" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb189-27"><a href="rmarkdown-interaction.html#cb189-27" aria-hidden="true" tabindex="-1"></a>      output<span class="sc">$</span>kmeans <span class="ot">=</span> <span class="fu">renderPlot</span>(<span class="at">height =</span> <span class="dv">400</span>, {</span>
<span id="cb189-28"><a href="rmarkdown-interaction.html#cb189-28" aria-hidden="true" tabindex="-1"></a>        res <span class="ot">=</span> <span class="fu">clusters</span>()</span>
<span id="cb189-29"><a href="rmarkdown-interaction.html#cb189-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb189-30"><a href="rmarkdown-interaction.html#cb189-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">plot</span>(<span class="fu">selectedData</span>(),</span>
<span id="cb189-31"><a href="rmarkdown-interaction.html#cb189-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> res<span class="sc">$</span>cluster, <span class="at">pch =</span> <span class="dv">20</span>, <span class="at">cex =</span> <span class="dv">3</span>)</span>
<span id="cb189-32"><a href="rmarkdown-interaction.html#cb189-32" aria-hidden="true" tabindex="-1"></a>        <span class="fu">points</span>(res<span class="sc">$</span>centers, <span class="at">pch =</span> <span class="dv">4</span>, <span class="at">cex =</span> <span class="dv">4</span>, <span class="at">lwd =</span> <span class="dv">4</span>)</span>
<span id="cb189-33"><a href="rmarkdown-interaction.html#cb189-33" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb189-34"><a href="rmarkdown-interaction.html#cb189-34" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb189-35"><a href="rmarkdown-interaction.html#cb189-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">500</span>)</span>
<span id="cb189-36"><a href="rmarkdown-interaction.html#cb189-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb189-37"><a href="rmarkdown-interaction.html#cb189-37" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="小部件的大小和布局" class="section level4 hasAnchor" number="5.1.4.3">
<h4><span class="header-section-number">5.1.4.3</span> 小部件的大小和布局<a href="rmarkdown-interaction.html#小部件的大小和布局" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Shiny 小部件可以嵌入在不同的地方，包括标准的全宽页面、页面内的小列，甚至在 HTML5 幻灯片中。为了让小部件的大小和布局在上文所述的文档中稳定工作，作者建议小部件的总高度不高于 500 像素。当然，还可以在创建小部件的函数中添加一个显式的 height 参数（默认值为 500）。</p>
</div>
</div>
<div id="shiny-link" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Shiny 文档间的链接<a href="rmarkdown-interaction.html#shiny-link" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>可以使用 Markdown 链接语法并指定文档的<strong>相对</strong>路径，链接到其他 Shiny 文档上，例如： <code>[另一个Shiny文档](another.Rmd)</code>。如果在一个页面上单击指向另一个 Rmd 文档的链接，该 Rmd 文档将作为当前交互式 Shiny 文档启动。</p>
<p>默认情况下，只能链接到调用 <code>rmarkdown::run()</code> 的文件所在目录中的 R Markdown 文件（例如，无法连接到 <code>../foo.Rmd</code>）。 但是，可以使用 <code>rmarkdown::run()</code> 的 <code>dir</code> 参数来定义根目录。</p>
</div>
<div id="shiny-render" class="section level3 hasAnchor" number="5.1.6">
<h3><span class="header-section-number">5.1.6</span> Shiny 文档的渲染<a href="rmarkdown-interaction.html#shiny-render" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="shiny-delay" class="section level4 hasAnchor" number="5.1.6.1">
<h4><span class="header-section-number">5.1.6.1</span> 延迟渲染<a href="rmarkdown-interaction.html#shiny-delay" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Shiny 文档通常在每次 R Markdown 文档渲染时都会显示。这时，较大或计算量较大的文档可能需要一些时间来加载。</p>
<p>如果文档包含不需要立即渲染的交互式 Shiny 组件，可以在 <code>rmarkdown::render_delayed()</code> 函数中封装 Shiny 代码。这个函数保存它的参数，直到文档呈现完成并显示给用户，然后计算它，并在计算完成时将其注入输出文档。</p>
<p>例如，以下代码中，首先渲染出数值输入的结果，加载完文档并显示给用户之后， <code>render_delayed()</code> 才会执行内部代码，并将其加载到文档中。</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb190-1"><a href="rmarkdown-interaction.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, echo = FALSE} </span></span>
<span id="cb190-2"><a href="rmarkdown-interaction.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="in">numericInput(&quot;rows&quot;, &quot;How many cars?&quot;, 5)</span></span>
<span id="cb190-3"><a href="rmarkdown-interaction.html#cb190-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-4"><a href="rmarkdown-interaction.html#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="in">rmarkdown::render_delayed({</span></span>
<span id="cb190-5"><a href="rmarkdown-interaction.html#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="in">  renderTable({</span></span>
<span id="cb190-6"><a href="rmarkdown-interaction.html#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="in">    head(cars, input$rows)</span></span>
<span id="cb190-7"><a href="rmarkdown-interaction.html#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="in">  })</span></span>
<span id="cb190-8"><a href="rmarkdown-interaction.html#cb190-8" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb190-9"><a href="rmarkdown-interaction.html#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<!-- #### 渲染函数的输出参数 {#shiny-args} -->
<!-- 在一个经典的 Shiny 应用程序中，读者可以使用 `plotOutput()` 和 `verbatimTextOutput()` 等函数在 UI 中指定输出元素，并使用 `renderPlot()` 和 `renderPrint()` 等函数呈现其内容。 -->
<!-- 相比之下，在 Shiny 文档中，UI 元素通常是在调用 `renderXXX()` 函数时自动创建的。例如，使用 `renderPlot()` 函数，而预先没有创建对应的 `plotOutput()`。在这种情况下，Shiny 将相应的输出对象与每个 `renderXXX()` 函数关联起来，使得可以在一个完整的 Shiny 应用程序之外使用 Shiny 代码。但是，在这个过程中可能会丢失一些功能。尤其是，`plotOutput()` 可以接受一些可选参数来设置宽度和高度等内容。 -->
<!-- 要将选项从 `renderXXX()` 传递到 `xxxOutput()`，可以使用 `outputArgs` 参数。 例如：要绘制一张宽度为 200px，高度为 100px 的图形时。 可以设定为如下形式： -->
<!-- ````markdown -->
<!-- ```{r, echo = FALSE}  -->
<!-- renderPlot({ -->
<!--   plot(yourData) -->
<!-- }, outputArgs = list(width = "200px", height = "100px") -->
<!-- ) -->
<!-- ``` -->
<!-- ```` -->
<!-- 无论想设置多少个输出参数，`outputArgs` 总是设定为一个列表（默认是一个空列表，它不设置输出参数）。如果试图传入一个不存在的参数，那么将得到以下的错误提示信息（例如：在本例中，试图设置一个名为 `not_an_argument` 的参数）： -->
<!-- ```markdown -->
<!-- **Error**: Unused argument: in `outputArgs`, `not_an_argument` -->
<!-- is not an valid argument for the output function -->
<!-- ``` -->
<!-- 读者如果想查看运行中的 `outputArgs`，请运行下面的 R Markdown 文档或访问在线版 <https://gallery.shinyapps.io/output-args/>。 -->
<!-- ````markdown -->
<!-- ---
title: 通过呈现函数来设置输出参数
runtime: shiny
output: html_document
---

这个交互式 Rmd 文档使用了 `outputArgs`
参数，并且现在可用于所有 Shiny `render` 函数。 举个例子，这可以让你通过 `renderImage` 设置 `imageOutput` 的参数。 意味着你不必为了刷过图像而创建 `ui` 对象。 注意，这仅适用于交互式  Rmd 期间的 Shiny 代码片段（不适用于嵌入式完整应用程序——你需要调用 `shinyApp` 才能运行的应用程序）。 

## 刷过图像(并存储数据)

```{r setup, echo=FALSE}
library(datasets)

generateImage = function() {
  outfile = tempfile(fileext = '.png')
  png(outfile)
  par(mar = c(0,0,0,0))
  image(volcano, axes = FALSE)
  contour(volcano, add = TRUE)
  dev.off()
  list(src = outfile)
}
```

```{r image}
renderImage({
  generateImage()
}, deleteFile = TRUE, 
   outputArgs = list(brush = brushOpts(id = "plot_brush"),
                     width = "250",
                     height = "250px")
)
```

以下是发送到服务器的一些信息: (刷过图像以更改数据)

```{r brush info}
renderText({ 
  print(input$plot_brush)
  brush = input$plot_brush
  paste0("xmin: ", brush$xmin, "; ",
         "xmax: ", brush$xmax, "; ",
         "ymin: ", brush$ymin, "; ",
         "ymax: ", brush$ymax)
})
```

---

###  调整图片


```{r plot}
renderPlot({ 
  plot(cars) 
}, outputArgs = list(width = "75%", 
                     height = "250px")
)
``` -->
<!-- ```` -->
<!-- ##### 附加说明{#shiny-extra} -->
<!-- 需要强调的是，读者只能在一个 Shiny 的 R Markdown 文档中使用这个功能。也就是说，必须在 YAML 元数据中设置 `runtime: shiny` 。但即使是这样，这也只适用于在 UI 中没有相应的显式输出元素的情况下呈现输出的 Shiny 代码片段。如果读者想在文档中嵌入一个完整的 Shiny 的应用程序，并尝试使用 `outputArgs` ，这时它将被忽略，并将以下警告输出到 R Markdown 控制台中 （在这种情况下， `ui` 函数将类似于 `ui = plotOutput("plot")` ）： -->
<!-- ```markdown -->
<!-- Warning in `output$plot`(...) : -->
<!-- Unused argument: outputArgs. The argument outputArgs is only -->
<!-- meant to be used when embedding snippets of Shiny code in an -->
<!-- R Markdown code chunk (using runtime: shiny). When running a -->
<!-- full Shiny app, please set the output arguments directly in -->
<!-- the corresponding output function of your UI code. -->
<!-- ``` -->
<!-- 如果尝试在上文所述的任意文档中使用 `outputArgs`，例如：在常用的（即非嵌入式）Shiny 应用程序内部使用 `outputArgs`，也会发生同样的情况。 -->
</div>
</div>
</div>
<div id="rmarkdown-dashboards" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> 交互式仪表盘：Dashboards<a href="rmarkdown-interaction.html#rmarkdown-dashboards" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>本节将介绍通过 <strong>flexdashboard</strong> 包 <span class="citation">(<a href="#ref-R-flexdashboard" role="doc-biblioref">Iannone, Allaire, and Borges 2020</a>)</span> 设计一个仪表盘的方法。</p>
<p>仪表盘在业务风格的报告中特别常见。它们可以用来展示报告的概要和关键内容。仪表盘的布局通常是基于网格搭建的，各个组件排列在各种大小的“盒子”中。</p>
<p>使用 <strong>flexdashboard</strong> 包，读者可以</p>
<ul>
<li><p>通过 R Markdown，展示一组数据的可视化图表。</p></li>
<li><p>嵌入各种各样的组件，包括 HTML 小部件、R 图形、表格数据和文本注释等内容。</p></li>
<li><p>可以指定按行或列进行布局(各组件会自动调整大小以填满浏览器，并且在移动设备上也十分适配)。</p></li>
<li><p>可以创建区域来呈现可视化图形和相关注释。</p></li>
<li><p>使用 Shiny 驱动动态可视化图表。</p></li>
</ul>
<div id="dashboards-intro" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Dashboards 入门<a href="rmarkdown-interaction.html#dashboards-intro" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>首先，安装 <code>flexdashboard</code> 包：</p>
<pre><code>install.packages(&quot;flexdashboard&quot;)</code></pre>
<p>其次，通过点击 <code>File -&gt; New File -&gt; R Markdown</code> 对话框在 RStudio 中创建文档，并选择 “Flex Dashboard” 模板。操作界面如图 <a href="rmarkdown-interaction.html#fig:dashboard-new">5.6</a> 所示：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-new"></span>
<img src="images/dashboard-new.png" alt="创建新的 dashboard 文件。"  />
<p class="caption">
图 5.6: 创建新的 dashboard 文件。
</p>
</div>
<blockquote>
<p><strong>注</strong>：如果没有使用 RStudio 进行操作，那么也可以从 R 控制台创建一个新的 <code>flexdashboard</code> 的 R Markdown 文件，具体操作如下：</p>
</blockquote>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="rmarkdown-interaction.html#cb192-1" aria-hidden="true" tabindex="-1"></a>rmarkdown<span class="sc">::</span><span class="fu">draft</span>(</span>
<span id="cb192-2"><a href="rmarkdown-interaction.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;dashboard.Rmd&quot;</span>, <span class="at">template =</span> <span class="st">&quot;flex_dashboard&quot;</span>,</span>
<span id="cb192-3"><a href="rmarkdown-interaction.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">package =</span> <span class="st">&quot;flexdashboard&quot;</span></span>
<span id="cb192-4"><a href="rmarkdown-interaction.html#cb192-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>本章只介绍一些基本特性和用法。如果读者想更进一步了解 <strong>flexdashboard</strong>，可以查看它的完整文档： <a href="https://rmarkdown.rstudio.com/flexdashboard/" class="uri">https://rmarkdown.rstudio.com/flexdashboard/</a> 。</p>
<p>仪表盘有许多与 HTML 文档相同的特性，比如图形选项，外观和风格，MathJax 公式，头部和正文前后内容和 Pandoc 参数，等等。除此之外，也建议浏览 R 帮助页面 <code>?flexdashboard::flex_dashboard</code> 来了解更多 <code>flexdashboard</code> 选项和其特性。</p>
<p>当然 RStudio 官网也给出了该包 <a href="https://pkgs.rstudio.com/flexdashboard/">介绍</a> 与案例，读者可以基于案例到学习实现快速入门。</p>
</div>
<div id="dashboards-layout" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Dashboards 排版<a href="rmarkdown-interaction.html#dashboards-layout" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>关于仪表盘布局的总体规则是：</p>
<ul>
<li><p>一级标题：生成页面；</p></li>
<li><p>二级标题：生成列（或行）；</p></li>
<li><p>三级标题：生成框（包含一个或多个仪表盘组件）。</p></li>
</ul>
<p>下面给出一个简单的例子：</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb193-1"><a href="rmarkdown-interaction.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb193-2"><a href="rmarkdown-interaction.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;入门例子&quot;</span></span>
<span id="cb193-3"><a href="rmarkdown-interaction.html#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> flexdashboard::flex_dashboard</span></span>
<span id="cb193-4"><a href="rmarkdown-interaction.html#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb193-5"><a href="rmarkdown-interaction.html#cb193-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-6"><a href="rmarkdown-interaction.html#cb193-6" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb193-7"><a href="rmarkdown-interaction.html#cb193-7" aria-hidden="true" tabindex="-1"></a><span class="in">library(flexdashboard)</span></span>
<span id="cb193-8"><a href="rmarkdown-interaction.html#cb193-8" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb193-9"><a href="rmarkdown-interaction.html#cb193-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-10"><a href="rmarkdown-interaction.html#cb193-10" aria-hidden="true" tabindex="-1"></a>第一列</span>
<span id="cb193-11"><a href="rmarkdown-interaction.html#cb193-11" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------</span>
<span id="cb193-12"><a href="rmarkdown-interaction.html#cb193-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-13"><a href="rmarkdown-interaction.html#cb193-13" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图表 A</span></span>
<span id="cb193-14"><a href="rmarkdown-interaction.html#cb193-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-15"><a href="rmarkdown-interaction.html#cb193-15" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb193-16"><a href="rmarkdown-interaction.html#cb193-16" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb193-17"><a href="rmarkdown-interaction.html#cb193-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-18"><a href="rmarkdown-interaction.html#cb193-18" aria-hidden="true" tabindex="-1"></a>第二列</span>
<span id="cb193-19"><a href="rmarkdown-interaction.html#cb193-19" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------</span>
<span id="cb193-20"><a href="rmarkdown-interaction.html#cb193-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-21"><a href="rmarkdown-interaction.html#cb193-21" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图表 B</span></span>
<span id="cb193-22"><a href="rmarkdown-interaction.html#cb193-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-23"><a href="rmarkdown-interaction.html#cb193-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb193-24"><a href="rmarkdown-interaction.html#cb193-24" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb193-25"><a href="rmarkdown-interaction.html#cb193-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-26"><a href="rmarkdown-interaction.html#cb193-26" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图表 C</span></span>
<span id="cb193-27"><a href="rmarkdown-interaction.html#cb193-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-28"><a href="rmarkdown-interaction.html#cb193-28" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb193-29"><a href="rmarkdown-interaction.html#cb193-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>注意，第一行文本（第一列）下的一系列破折号是二级标题的另一种 Markdown 语法形式，即：</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb194-1"><a href="rmarkdown-interaction.html#cb194-1" aria-hidden="true" tabindex="-1"></a>第一列</span>
<span id="cb194-2"><a href="rmarkdown-interaction.html#cb194-2" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------</span></code></pre></div>
<p>等同于</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb195-1"><a href="rmarkdown-interaction.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">## 第一列</span></span></code></pre></div>
<blockquote>
<p>这里使用一系列减号，只是为了让二级标题在源文档中更为显眼罢了。读者可以根据自身喜好，选择任意一种语法形式。</p>
</blockquote>
<p>默认情况下，二级标题在仪表板上生成列，三级标题在列中自上而下排列。所以在默认情况下，不必在仪表盘上设置列，因为它默认一列一列自上而下排列显示。</p>
<blockquote>
<p><strong>注意</strong>：二级标题的内容将不会显示在输出中。二级标题仅用于布局（例如，例子中的“第一列” 不会显示在输出中），因此二级标题的实际内容一点都不重要。相比之下，一级标题和三级标题更加重要。</p>
</blockquote>
<p>图 <a href="rmarkdown-interaction.html#fig:dashboard-start">5.7</a> 显示了上述示例的结果，一共是两列，第一列为 “图表 A”，第二列为 “图表 B” 和 “图表 C”。</p>
<blockquote>
<p><strong>注</strong>：本例中，作者并没有在代码块中加入任何 R 代码，因此框内都是空的。在实际使用中，读者可以编写任意的 R 代码来生成 R 图、HTML 小部件或其他组件，并将其加入到框中。</p>
</blockquote>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-start"></span>
<img src="images/dashboard-start.png" alt="简单仪表盘布局示例。"  />
<p class="caption">
图 5.7: 简单仪表盘布局示例。
</p>
</div>
<div id="基于行的布局" class="section level4 hasAnchor" number="5.2.2.1">
<h4><span class="header-section-number">5.2.2.1</span> 基于行的布局<a href="rmarkdown-interaction.html#基于行的布局" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>通过修改 <code>orientation</code> 选项将默认布局（列导向）改为以行导向的布局，例如：</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb196-1"><a href="rmarkdown-interaction.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb196-2"><a href="rmarkdown-interaction.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="at">  flexdashboard:</span><span class="fu">:flex_dashboard</span><span class="kw">:</span></span>
<span id="cb196-3"><a href="rmarkdown-interaction.html#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">orientation</span><span class="kw">:</span><span class="at"> rows</span></span></code></pre></div>
<p>此时，二级结构将会按照行进行排列，三级结构会按照行中的列进行排放。将上述例子修改后，输出结果如图 <a href="rmarkdown-interaction.html#fig:dashboard-rows">5.8</a> 所示：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-rows"></span>
<img src="images/dashboard-rows.png" alt="基于行布局的结果。"  />
<p class="caption">
图 5.8: 基于行布局的结果。
</p>
</div>
</div>
<div id="节属性" class="section level4 hasAnchor" number="5.2.2.2">
<h4><span class="header-section-number">5.2.2.2</span> 节属性<a href="rmarkdown-interaction.html#节属性" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>二级结构头部还可以加入一些属性，例如：设置列宽度为 350。</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb197-1"><a href="rmarkdown-interaction.html#cb197-1" aria-hidden="true" tabindex="-1"></a>窄栏 {data-width=350}</span>
<span id="cb197-2"><a href="rmarkdown-interaction.html#cb197-2" aria-hidden="true" tabindex="-1"></a>--------------------------------</span></code></pre></div>
<p>在基于行布局的情况下，可以为行设置 <code>data-height</code> 属性。而基于列布局的情况下，可以使用 <code>{.tabset}</code> 使得三级结构以制表符的形式排列，例如：</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb198-1"><a href="rmarkdown-interaction.html#cb198-1" aria-hidden="true" tabindex="-1"></a>两个选项卡 {.tabset}</span>
<span id="cb198-2"><a href="rmarkdown-interaction.html#cb198-2" aria-hidden="true" tabindex="-1"></a>------------------</span>
<span id="cb198-3"><a href="rmarkdown-interaction.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="rmarkdown-interaction.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="fu">### 选项卡 A</span></span>
<span id="cb198-5"><a href="rmarkdown-interaction.html#cb198-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-6"><a href="rmarkdown-interaction.html#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="fu">### 选项卡 B</span></span></code></pre></div>
<p>结果如图 <a href="rmarkdown-interaction.html#fig:dashboard-tab">5.9</a> 所示：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-tab"></span>
<img src="images/dashboard-tab.png" alt="以制表符的形式排列。"  />
<p class="caption">
图 5.9: 以制表符的形式排列。
</p>
</div>
</div>
<div id="multiple-pages" class="section level4 hasAnchor" number="5.2.2.3">
<h4><span class="header-section-number">5.2.2.3</span> 多页<a href="rmarkdown-interaction.html#multiple-pages" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>如果 R Markdown 文档中有多个一级结构的内容时，这时仪表盘会将每个一节结构分别显示为单独页面。下面给出一个简单的例子：</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode md"><code class="sourceCode markdown"><span id="cb199-1"><a href="rmarkdown-interaction.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb199-2"><a href="rmarkdown-interaction.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;多页显示&quot;</span></span>
<span id="cb199-3"><a href="rmarkdown-interaction.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> flexdashboard::flex_dashboard</span></span>
<span id="cb199-4"><a href="rmarkdown-interaction.html#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb199-5"><a href="rmarkdown-interaction.html#cb199-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-6"><a href="rmarkdown-interaction.html#cb199-6" aria-hidden="true" tabindex="-1"></a>图形 {data-icon=&quot;fa-signal&quot;}</span>
<span id="cb199-7"><a href="rmarkdown-interaction.html#cb199-7" aria-hidden="true" tabindex="-1"></a><span class="fu">===================================== </span></span>
<span id="cb199-8"><a href="rmarkdown-interaction.html#cb199-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-9"><a href="rmarkdown-interaction.html#cb199-9" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图 A</span></span>
<span id="cb199-10"><a href="rmarkdown-interaction.html#cb199-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-11"><a href="rmarkdown-interaction.html#cb199-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb199-12"><a href="rmarkdown-interaction.html#cb199-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb199-13"><a href="rmarkdown-interaction.html#cb199-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-14"><a href="rmarkdown-interaction.html#cb199-14" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图 B</span></span>
<span id="cb199-15"><a href="rmarkdown-interaction.html#cb199-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-16"><a href="rmarkdown-interaction.html#cb199-16" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb199-17"><a href="rmarkdown-interaction.html#cb199-17" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb199-18"><a href="rmarkdown-interaction.html#cb199-18" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb199-19"><a href="rmarkdown-interaction.html#cb199-19" aria-hidden="true" tabindex="-1"></a>表格 {data-icon=&quot;fa-table&quot;}</span>
<span id="cb199-20"><a href="rmarkdown-interaction.html#cb199-20" aria-hidden="true" tabindex="-1"></a><span class="fu">=====================================     </span></span>
<span id="cb199-21"><a href="rmarkdown-interaction.html#cb199-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-22"><a href="rmarkdown-interaction.html#cb199-22" aria-hidden="true" tabindex="-1"></a><span class="fu">### 表 A</span></span>
<span id="cb199-23"><a href="rmarkdown-interaction.html#cb199-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-24"><a href="rmarkdown-interaction.html#cb199-24" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb199-25"><a href="rmarkdown-interaction.html#cb199-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb199-26"><a href="rmarkdown-interaction.html#cb199-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-27"><a href="rmarkdown-interaction.html#cb199-27" aria-hidden="true" tabindex="-1"></a><span class="fu">### 表 B</span></span>
<span id="cb199-28"><a href="rmarkdown-interaction.html#cb199-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-29"><a href="rmarkdown-interaction.html#cb199-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb199-30"><a href="rmarkdown-interaction.html#cb199-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-pages"></span>
<img src="images/dashboard-multipages.png" alt="仪表盘上的多个页面情况。"  />
<p class="caption">
图 5.10: 仪表盘上的多个页面情况。
</p>
</div>
<blockquote>
<p><strong>注</strong>：多个等号是一级标题的另一种 Markdown 语法（也可以使用单个井号 <code>#</code> 表示）。</p>
</blockquote>
<p>从图 <a href="rmarkdown-interaction.html#fig:dashboard-pages">5.10</a> 可以看到：
页面标题显示在仪表盘顶部的导航菜单中。一级结构单独构成一个页面。</p>
<p>本例中，还做了一个小拓展，通过 <code>data-icon</code> 属性将图标应用于页面标题中。当然也可以从该网址 <a href="https://fontawesome.com" class="uri">https://fontawesome.com</a> 找到其他可用图标。例如，图 <a href="rmarkdown-interaction.html#fig:dashboard-icon">5.11</a> 给出部分可用图标。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-icon"></span>
<img src="images/dashboard-icon.png" alt="网站中部分可用图标。"  />
<p class="caption">
图 5.11: 网站中部分可用图标。
</p>
</div>
</div>
<div id="故事板" class="section level4 hasAnchor" number="5.2.2.4">
<h4><span class="header-section-number">5.2.2.4</span> 故事板<a href="rmarkdown-interaction.html#故事板" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>除了基于列或行布局外，还可以通过故事板（storyboard）进行布局，呈现一些可视化图形或其他说明。下面给出一个简单的例子：</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb200-1"><a href="rmarkdown-interaction.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb200-2"><a href="rmarkdown-interaction.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;故事板&quot;</span></span>
<span id="cb200-3"><a href="rmarkdown-interaction.html#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> </span></span>
<span id="cb200-4"><a href="rmarkdown-interaction.html#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="co">  flexdashboard::flex_dashboard:</span></span>
<span id="cb200-5"><a href="rmarkdown-interaction.html#cb200-5" aria-hidden="true" tabindex="-1"></a><span class="co">    storyboard: true</span></span>
<span id="cb200-6"><a href="rmarkdown-interaction.html#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb200-7"><a href="rmarkdown-interaction.html#cb200-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-8"><a href="rmarkdown-interaction.html#cb200-8" aria-hidden="true" tabindex="-1"></a><span class="fu">### 散点图</span></span>
<span id="cb200-9"><a href="rmarkdown-interaction.html#cb200-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-10"><a href="rmarkdown-interaction.html#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb200-11"><a href="rmarkdown-interaction.html#cb200-11" aria-hidden="true" tabindex="-1"></a><span class="in">plot(cars, pch = 20)</span></span>
<span id="cb200-12"><a href="rmarkdown-interaction.html#cb200-12" aria-hidden="true" tabindex="-1"></a><span class="in">grid()</span></span>
<span id="cb200-13"><a href="rmarkdown-interaction.html#cb200-13" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb200-14"><a href="rmarkdown-interaction.html#cb200-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-15"><a href="rmarkdown-interaction.html#cb200-15" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb200-16"><a href="rmarkdown-interaction.html#cb200-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-17"><a href="rmarkdown-interaction.html#cb200-17" aria-hidden="true" tabindex="-1"></a>可以添加一些评论。</span>
<span id="cb200-18"><a href="rmarkdown-interaction.html#cb200-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-19"><a href="rmarkdown-interaction.html#cb200-19" aria-hidden="true" tabindex="-1"></a><span class="fu">### 直方图</span></span>
<span id="cb200-20"><a href="rmarkdown-interaction.html#cb200-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-21"><a href="rmarkdown-interaction.html#cb200-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb200-22"><a href="rmarkdown-interaction.html#cb200-22" aria-hidden="true" tabindex="-1"></a><span class="in">hist(faithful$eruptions, col = &#39;gray&#39;, border = &#39;white&#39;, main = &#39;&#39;)</span></span>
<span id="cb200-23"><a href="rmarkdown-interaction.html#cb200-23" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb200-24"><a href="rmarkdown-interaction.html#cb200-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-25"><a href="rmarkdown-interaction.html#cb200-25" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb200-26"><a href="rmarkdown-interaction.html#cb200-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-27"><a href="rmarkdown-interaction.html#cb200-27" aria-hidden="true" tabindex="-1"></a>可以添加一些评论。</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-story"></span>
<img src="images/dashboard-story.png" alt="基于故事板布局的结果。"  />
<p class="caption">
图 5.12: 基于故事板布局的结果。
</p>
</div>
<p>如图 <a href="rmarkdown-interaction.html#fig:dashboard-story">5.12</a> 所示，读者可以通过顶部的左右导航按钮来浏览所有故事板内容。</p>
</div>
</div>
<div id="dashboards-module" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Dashboards 组件<a href="rmarkdown-interaction.html#dashboards-module" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>仪表盘布局中可以包含各种各样的组件，包括：</p>
<ol style="list-style-type: decimal">
<li><p>基于 HTML 小部件的交互式 JavaScript 数据可视化图形。</p></li>
<li><p>R 图形，包括基础、栅栏和网格图形；</p></li>
<li><p>表格（可选选项包括：排序，过滤和分页等）；</p></li>
<li><p>数值框（展示重要数据）；</p></li>
<li><p>仪表盘；</p></li>
<li><p>文本注释；</p></li>
<li><p>导航栏（提供与仪表盘相关的更多链接）。</p></li>
</ol>
<blockquote>
<p><strong>注</strong>：无论输出格式如何，前三个组件在大多数 R Markdown 文档中均可使用。 而后四个组件是仪表盘特有的，本节主要介绍后四个组件。</p>
</blockquote>
<div id="数值框" class="section level4 hasAnchor" number="5.2.3.1">
<h4><span class="header-section-number">5.2.3.1</span> 数值框<a href="rmarkdown-interaction.html#数值框" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>如果希望在仪表盘中包含一个或多个数值，那么读者可以使用 <strong>flexdashboard</strong> 包中的 <code>valueBox()</code> 函数来实现这个需求。下面给出一个简单的例子：</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb201-1"><a href="rmarkdown-interaction.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb201-2"><a href="rmarkdown-interaction.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;数值框&quot;</span></span>
<span id="cb201-3"><a href="rmarkdown-interaction.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb201-4"><a href="rmarkdown-interaction.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">  flexdashboard::flex_dashboard:</span></span>
<span id="cb201-5"><a href="rmarkdown-interaction.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="co">    orientation: rows</span></span>
<span id="cb201-6"><a href="rmarkdown-interaction.html#cb201-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb201-7"><a href="rmarkdown-interaction.html#cb201-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-8"><a href="rmarkdown-interaction.html#cb201-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb201-9"><a href="rmarkdown-interaction.html#cb201-9" aria-hidden="true" tabindex="-1"></a><span class="in">library(flexdashboard)</span></span>
<span id="cb201-10"><a href="rmarkdown-interaction.html#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="in"># 这些计算函数只是简单的例子</span></span>
<span id="cb201-11"><a href="rmarkdown-interaction.html#cb201-11" aria-hidden="true" tabindex="-1"></a><span class="in">computeArticles = function(...) return(45)</span></span>
<span id="cb201-12"><a href="rmarkdown-interaction.html#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="in">computeComments = function(...) return(126)</span></span>
<span id="cb201-13"><a href="rmarkdown-interaction.html#cb201-13" aria-hidden="true" tabindex="-1"></a><span class="in">computeSpam = function(...) return(15)</span></span>
<span id="cb201-14"><a href="rmarkdown-interaction.html#cb201-14" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb201-15"><a href="rmarkdown-interaction.html#cb201-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-16"><a href="rmarkdown-interaction.html#cb201-16" aria-hidden="true" tabindex="-1"></a><span class="fu">### 每日文章数</span></span>
<span id="cb201-17"><a href="rmarkdown-interaction.html#cb201-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-18"><a href="rmarkdown-interaction.html#cb201-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb201-19"><a href="rmarkdown-interaction.html#cb201-19" aria-hidden="true" tabindex="-1"></a><span class="in">articles = computeArticles()</span></span>
<span id="cb201-20"><a href="rmarkdown-interaction.html#cb201-20" aria-hidden="true" tabindex="-1"></a><span class="in">valueBox(articles, icon = &quot;fa-pencil&quot;)</span></span>
<span id="cb201-21"><a href="rmarkdown-interaction.html#cb201-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb201-22"><a href="rmarkdown-interaction.html#cb201-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-23"><a href="rmarkdown-interaction.html#cb201-23" aria-hidden="true" tabindex="-1"></a><span class="fu">### 每日评论数</span></span>
<span id="cb201-24"><a href="rmarkdown-interaction.html#cb201-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-25"><a href="rmarkdown-interaction.html#cb201-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb201-26"><a href="rmarkdown-interaction.html#cb201-26" aria-hidden="true" tabindex="-1"></a><span class="in">comments = computeComments()</span></span>
<span id="cb201-27"><a href="rmarkdown-interaction.html#cb201-27" aria-hidden="true" tabindex="-1"></a><span class="in">valueBox(comments, icon = &quot;fa-comments&quot;)</span></span>
<span id="cb201-28"><a href="rmarkdown-interaction.html#cb201-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb201-29"><a href="rmarkdown-interaction.html#cb201-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-30"><a href="rmarkdown-interaction.html#cb201-30" aria-hidden="true" tabindex="-1"></a><span class="fu">### 每日垃圾邮件数</span></span>
<span id="cb201-31"><a href="rmarkdown-interaction.html#cb201-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-32"><a href="rmarkdown-interaction.html#cb201-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb201-33"><a href="rmarkdown-interaction.html#cb201-33" aria-hidden="true" tabindex="-1"></a><span class="in">spam = computeSpam()</span></span>
<span id="cb201-34"><a href="rmarkdown-interaction.html#cb201-34" aria-hidden="true" tabindex="-1"></a><span class="in">valueBox(</span></span>
<span id="cb201-35"><a href="rmarkdown-interaction.html#cb201-35" aria-hidden="true" tabindex="-1"></a><span class="in">  spam, icon = &quot;fa-trash&quot;,</span></span>
<span id="cb201-36"><a href="rmarkdown-interaction.html#cb201-36" aria-hidden="true" tabindex="-1"></a><span class="in">  color = ifelse(spam &gt; 10, &quot;warning&quot;, &quot;primary&quot;)</span></span>
<span id="cb201-37"><a href="rmarkdown-interaction.html#cb201-37" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb201-38"><a href="rmarkdown-interaction.html#cb201-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-valueboxes"></span>
<img src="images/dashboard-valueboxes.png" alt="仪表盘上并排的三个值。"  />
<p class="caption">
图 5.13: 仪表盘上并排的三个值。
</p>
</div>
<p>图 <a href="rmarkdown-interaction.html#fig:dashboard-valueboxes">5.13</a> 展示了三个并排的仪表，每个仪表都显示了一个数值和标题。这里重点解释下第三个代码块（<code>###  每日垃圾邮件数</code>）。这里的 <code>valueBox()</code> 函数定义了一个值( <code>spam</code> )和一个图标( <code>icon = "fa-trash"</code> )。并使用 <code>color</code> 设置参数框的颜色。内部使用了一个 <code>ifelse()</code> 语句，使得不同值表示不同的颜色。当然，可用的颜色还包括： <code>"info"</code>, <code>"success"</code> 和 <code>"danger"</code>（默认值为： <code>"primary"</code>）。也可以指定任何有效的 CSS 颜色（例如：<code>"#ffffff"</code>， <code>"rgb(100, 100, 100)"</code> 等）。</p>
</div>
<div id="仪表" class="section level4 hasAnchor" number="5.2.3.2">
<h4><span class="header-section-number">5.2.3.2</span> 仪表<a href="rmarkdown-interaction.html#仪表" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>在指定数值范围内显示仪表上的数值。例如，下面展示了三个仪表并排的结果（见图 <a href="rmarkdown-interaction.html#fig:dashboard-gauges">5.14</a>）。</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb202-1"><a href="rmarkdown-interaction.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb202-2"><a href="rmarkdown-interaction.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;仪表&quot;</span></span>
<span id="cb202-3"><a href="rmarkdown-interaction.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb202-4"><a href="rmarkdown-interaction.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co">  flexdashboard::flex_dashboard:</span></span>
<span id="cb202-5"><a href="rmarkdown-interaction.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="co">    orientation: rows</span></span>
<span id="cb202-6"><a href="rmarkdown-interaction.html#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb202-7"><a href="rmarkdown-interaction.html#cb202-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-8"><a href="rmarkdown-interaction.html#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb202-9"><a href="rmarkdown-interaction.html#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="in">library(flexdashboard)</span></span>
<span id="cb202-10"><a href="rmarkdown-interaction.html#cb202-10" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb202-11"><a href="rmarkdown-interaction.html#cb202-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-12"><a href="rmarkdown-interaction.html#cb202-12" aria-hidden="true" tabindex="-1"></a><span class="fu">### 接触率</span></span>
<span id="cb202-13"><a href="rmarkdown-interaction.html#cb202-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-14"><a href="rmarkdown-interaction.html#cb202-14" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb202-15"><a href="rmarkdown-interaction.html#cb202-15" aria-hidden="true" tabindex="-1"></a><span class="in">gauge(91, min = 0, max = 100, symbol = &#39;%&#39;, gaugeSectors(</span></span>
<span id="cb202-16"><a href="rmarkdown-interaction.html#cb202-16" aria-hidden="true" tabindex="-1"></a><span class="in">  success = c(80, 100), warning = c(40, 79), danger = c(0, 39)</span></span>
<span id="cb202-17"><a href="rmarkdown-interaction.html#cb202-17" aria-hidden="true" tabindex="-1"></a><span class="in">))</span></span>
<span id="cb202-18"><a href="rmarkdown-interaction.html#cb202-18" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb202-19"><a href="rmarkdown-interaction.html#cb202-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-20"><a href="rmarkdown-interaction.html#cb202-20" aria-hidden="true" tabindex="-1"></a><span class="fu">### 平均额定值</span></span>
<span id="cb202-21"><a href="rmarkdown-interaction.html#cb202-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-22"><a href="rmarkdown-interaction.html#cb202-22" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb202-23"><a href="rmarkdown-interaction.html#cb202-23" aria-hidden="true" tabindex="-1"></a><span class="in">gauge(37.4, min = 0, max = 50, gaugeSectors(</span></span>
<span id="cb202-24"><a href="rmarkdown-interaction.html#cb202-24" aria-hidden="true" tabindex="-1"></a><span class="in">  success = c(41, 50), warning = c(21, 40), danger = c(0, 20)</span></span>
<span id="cb202-25"><a href="rmarkdown-interaction.html#cb202-25" aria-hidden="true" tabindex="-1"></a><span class="in">))</span></span>
<span id="cb202-26"><a href="rmarkdown-interaction.html#cb202-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb202-27"><a href="rmarkdown-interaction.html#cb202-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-28"><a href="rmarkdown-interaction.html#cb202-28" aria-hidden="true" tabindex="-1"></a><span class="fu">### 取消数</span></span>
<span id="cb202-29"><a href="rmarkdown-interaction.html#cb202-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-30"><a href="rmarkdown-interaction.html#cb202-30" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb202-31"><a href="rmarkdown-interaction.html#cb202-31" aria-hidden="true" tabindex="-1"></a><span class="in">gauge(7, min = 0, max = 10, gaugeSectors(</span></span>
<span id="cb202-32"><a href="rmarkdown-interaction.html#cb202-32" aria-hidden="true" tabindex="-1"></a><span class="in">  success = c(0, 2), warning = c(3, 6), danger = c(7, 10)</span></span>
<span id="cb202-33"><a href="rmarkdown-interaction.html#cb202-33" aria-hidden="true" tabindex="-1"></a><span class="in">))</span></span>
<span id="cb202-34"><a href="rmarkdown-interaction.html#cb202-34" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-gauges"></span>
<img src="images/dashboard-gauges.png" alt="三个仪表并排放在仪表盘上。"  />
<p class="caption">
图 5.14: 三个仪表并排放在仪表盘上。
</p>
</div>
<p>这个示例需要解释以下几点：</p>
<ol style="list-style-type: decimal">
<li><p>通过 <code>gauge()</code> 函数设置一个仪表盘。其内部三个参数需要确定：<code>value</code>， <code>min</code> 和 <code>max</code> （可以是任何数值）。</p></li>
<li><p>可以指定一个可选的符号（<code>symbol</code>）和值一起显示（本例中， “<code>%</code>” 用来表示百分比）。</p></li>
<li><p>可以使用 <code>gaugeSectors()</code> 函数指定一组自定义的颜色扇区，默认颜色为绿色。扇区选项（<code>sectors</code>）可以指定三个值的范围（<code>success</code>, <code>warning</code> 和 <code>danger</code>） 使得仪表盘的颜色根据它的值变化而变化。</p></li>
</ol>
</div>
<div id="文本注释" class="section level4 hasAnchor" number="5.2.3.3">
<h4><span class="header-section-number">5.2.3.3</span> 文本注释<a href="rmarkdown-interaction.html#文本注释" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>可以通过以下方式在仪表盘中包含额外的叙述说明：</p>
<ol style="list-style-type: decimal">
<li><p>在页面顶部加入相应文本内容。</p></li>
<li><p>定义不包含图表，而是仅包含任意内容（文本、图像和方程等）的指示板。</p></li>
</ol>
<p>如图 <a href="rmarkdown-interaction.html#fig:dashboard-text">5.15</a> 所示，顶部包含了一些内容说明和右下角包含了一个只有内容的指示板：</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb203-1"><a href="rmarkdown-interaction.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb203-2"><a href="rmarkdown-interaction.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;文本注释&quot;</span></span>
<span id="cb203-3"><a href="rmarkdown-interaction.html#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb203-4"><a href="rmarkdown-interaction.html#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="co">  flexdashboard::flex_dashboard:</span></span>
<span id="cb203-5"><a href="rmarkdown-interaction.html#cb203-5" aria-hidden="true" tabindex="-1"></a><span class="co">    orientation: rows</span></span>
<span id="cb203-6"><a href="rmarkdown-interaction.html#cb203-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb203-7"><a href="rmarkdown-interaction.html#cb203-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-8"><a href="rmarkdown-interaction.html#cb203-8" aria-hidden="true" tabindex="-1"></a>英国 1974-1979 年每月死于支气管炎、肺气肿和哮喘的人数 （来源于：P. J. Diggle, 1990, Time Series: A Biostatistical Introduction. Oxford, table A.3）</span>
<span id="cb203-9"><a href="rmarkdown-interaction.html#cb203-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-10"><a href="rmarkdown-interaction.html#cb203-10" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb203-11"><a href="rmarkdown-interaction.html#cb203-11" aria-hidden="true" tabindex="-1"></a><span class="in">library(dygraphs)</span></span>
<span id="cb203-12"><a href="rmarkdown-interaction.html#cb203-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb203-13"><a href="rmarkdown-interaction.html#cb203-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-14"><a href="rmarkdown-interaction.html#cb203-14" aria-hidden="true" tabindex="-1"></a>行 {data-height=600}</span>
<span id="cb203-15"><a href="rmarkdown-interaction.html#cb203-15" aria-hidden="true" tabindex="-1"></a>-------------------------------------</span>
<span id="cb203-16"><a href="rmarkdown-interaction.html#cb203-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-17"><a href="rmarkdown-interaction.html#cb203-17" aria-hidden="true" tabindex="-1"></a><span class="fu">### 总肺癌死亡数</span></span>
<span id="cb203-18"><a href="rmarkdown-interaction.html#cb203-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-19"><a href="rmarkdown-interaction.html#cb203-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb203-20"><a href="rmarkdown-interaction.html#cb203-20" aria-hidden="true" tabindex="-1"></a><span class="in">dygraph(ldeaths)</span></span>
<span id="cb203-21"><a href="rmarkdown-interaction.html#cb203-21" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb203-22"><a href="rmarkdown-interaction.html#cb203-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-23"><a href="rmarkdown-interaction.html#cb203-23" aria-hidden="true" tabindex="-1"></a>行 {data-height=400}</span>
<span id="cb203-24"><a href="rmarkdown-interaction.html#cb203-24" aria-hidden="true" tabindex="-1"></a>-------------------------------------</span>
<span id="cb203-25"><a href="rmarkdown-interaction.html#cb203-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-26"><a href="rmarkdown-interaction.html#cb203-26" aria-hidden="true" tabindex="-1"></a><span class="fu">### 男性死亡人数</span></span>
<span id="cb203-27"><a href="rmarkdown-interaction.html#cb203-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-28"><a href="rmarkdown-interaction.html#cb203-28" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb203-29"><a href="rmarkdown-interaction.html#cb203-29" aria-hidden="true" tabindex="-1"></a><span class="in">dygraph(mdeaths)</span></span>
<span id="cb203-30"><a href="rmarkdown-interaction.html#cb203-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb203-31"><a href="rmarkdown-interaction.html#cb203-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-32"><a href="rmarkdown-interaction.html#cb203-32" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; 1974-1979 年英国每月死于肺病的人数。</span></span>
<span id="cb203-33"><a href="rmarkdown-interaction.html#cb203-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-34"><a href="rmarkdown-interaction.html#cb203-34" aria-hidden="true" tabindex="-1"></a><span class="fu">### 备注</span></span>
<span id="cb203-35"><a href="rmarkdown-interaction.html#cb203-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-36"><a href="rmarkdown-interaction.html#cb203-36" aria-hidden="true" tabindex="-1"></a>本例使用了 dygraphs 包。该包为绘制时间序列数据提供了丰富的工具。</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-text"></span>
<img src="images/dashboard-text.png" alt="仪表盘上的文本注释。"  />
<p class="caption">
图 5.15: 仪表盘上的文本注释。
</p>
</div>
<blockquote>
<p><strong>注意</strong>：仪表盘中的每个组件都可以包括标题和注释部分。三级结构 (<code>###</code>) 后面的文本为标题；<code>&gt;</code> 开头的文本是注释。</p>
</blockquote>
<!-- 通过将 `.no-title` 属性应用于一个节标题，可以完全排除该标题。 -->
</div>
<div id="导航栏" class="section level4 hasAnchor" number="5.2.3.4">
<h4><span class="header-section-number">5.2.3.4</span> 导航栏<a href="rmarkdown-interaction.html#导航栏" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>默认情况下，仪表盘的导航栏包括：标题（<code>title</code>）、作者（<code>author</code>）和日期（<code>date</code>）。当仪表盘有多个页面时（第 <a href="rmarkdown-interaction.html#multiple-pages">5.2.2.3</a> 节），导航条左侧还包含指向各个页面的链接。当然，也在可以仪表盘上添加社交链接。</p>
<p>除此之外，使用 <code>navbar</code> 选项可以在导航栏中添加自定义链接。例如，在导航栏中添加 “关于” 链接：</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb204-1"><a href="rmarkdown-interaction.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb204-2"><a href="rmarkdown-interaction.html#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;导航栏&quot;</span></span>
<span id="cb204-3"><a href="rmarkdown-interaction.html#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb204-4"><a href="rmarkdown-interaction.html#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="at">  flexdashboard:</span><span class="fu">:flex_dashboard</span><span class="kw">:</span></span>
<span id="cb204-5"><a href="rmarkdown-interaction.html#cb204-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">navbar</span><span class="kw">:</span></span>
<span id="cb204-6"><a href="rmarkdown-interaction.html#cb204-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="kw">{</span><span class="at"> </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;关于&quot;</span><span class="kw">,</span><span class="at"> </span><span class="fu">href</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;https://example.com/about&quot;</span><span class="at"> </span><span class="kw">}</span></span>
<span id="cb204-7"><a href="rmarkdown-interaction.html#cb204-7" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>这时得到的界面如图 <a href="rmarkdown-interaction.html#fig:dashboard-about">5.16</a> 所示：</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-about"></span>
<img src="images/dashboard-about.png" alt="导航栏中添加自定义链接。"  />
<p class="caption">
图 5.16: 导航栏中添加自定义链接。
</p>
</div>
<blockquote>
<p><strong>注意</strong>：导航栏必须包括标题或图标（或两者都包含）。还可以使用 <code>href</code> 作为导航目标。如果想调整文本对齐方式，可以使用 <code>align</code> 参数 （默认情况下为右对齐）。</p>
</blockquote>
</div>
</div>
<div id="dashboards-shiny" class="section level3 hasAnchor" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Dashboards 与 Shiny<a href="rmarkdown-interaction.html#dashboards-shiny" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>在仪表盘中添加 Shiny，可以通过交互界面手动更改参数，并显示实时结果。或者当仪表盘的数据发生变化时，让仪表盘进行实时更新（请参阅 <strong>shiny</strong> 包中的 <code>reactiveFileReader()</code> 和 <code>reactivePoll()</code> 函数）。这是通过将 <code>runtime: shiny</code> 添加到标准仪表盘文档来实现的，然后添加一个或多个输入控件或响应表达式来动态驱动仪表板内组件的外观。</p>
<p>在 <strong>flexdashboard</strong> 中使用 Shiny 可以将一个静态的 R Markdown 报告变成一个交互式文档。需要注意的是，交互式文档需要部署到 Shiny 的服务器上，以便广泛共享（而静态 R Markdown 文档是可以附加到电子邮件或从任何标准 Web 服务器提供的独立 Web 页面）。</p>
<p>注意，<a href="https://rstudio.github.io/shinydashboard/"><strong>shinydashboard</strong></a> 包提供了用 Shiny 创建仪表板的另一种方法。</p>
<div id="入门指南" class="section level4 hasAnchor" number="5.2.4.1">
<h4><span class="header-section-number">5.2.4.1</span> 入门指南<a href="rmarkdown-interaction.html#入门指南" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>在仪表盘中添加 Shiny 组件的步骤如下：</p>
<ol style="list-style-type: decimal">
<li><p>在文档顶部 YAML 元数据中添加 <code>runtime: shiny</code>。</p></li>
<li><p>在仪表盘第一列添加 <code>{.sidebar}</code> 属性，使其成为 Shiny 控件输入的控制台</p></li>
</ol>
<blockquote>
<p><strong>注</strong>：这一步不是必须的，但这是基于 Shiny 仪表盘的经典布局。</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>根据需求，添加 Shiny 的输入和输出。</p></li>
<li><p>当代码中包含绘图函数时（例如：<code>hist()</code>），得将它们封装在 <code>renderPlot()</code> 中。这有利于界面在布局更改时，自动调整尺寸大小。</p></li>
</ol>
</div>
<div id="shiny-仪表盘的一个示例" class="section level4 hasAnchor" number="5.2.4.2">
<h4><span class="header-section-number">5.2.4.2</span> Shiny 仪表盘的一个示例<a href="rmarkdown-interaction.html#shiny-仪表盘的一个示例" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>图 <a href="rmarkdown-interaction.html#fig:dashboard-shiny">5.17</a> 给出了 Shiny 仪表盘的一个示例：</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb205-1"><a href="rmarkdown-interaction.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb205-2"><a href="rmarkdown-interaction.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> &quot;间歇泉喷发&quot;</span></span>
<span id="cb205-3"><a href="rmarkdown-interaction.html#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span><span class="co"> flexdashboard::flex_dashboard</span></span>
<span id="cb205-4"><a href="rmarkdown-interaction.html#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="an">runtime:</span><span class="co"> shiny</span></span>
<span id="cb205-5"><a href="rmarkdown-interaction.html#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb205-6"><a href="rmarkdown-interaction.html#cb205-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-7"><a href="rmarkdown-interaction.html#cb205-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r global, include=FALSE}</span></span>
<span id="cb205-8"><a href="rmarkdown-interaction.html#cb205-8" aria-hidden="true" tabindex="-1"></a><span class="in"># 在全局块中加载数据，以便仪表盘的所有用户可以共享</span></span>
<span id="cb205-9"><a href="rmarkdown-interaction.html#cb205-9" aria-hidden="true" tabindex="-1"></a><span class="in">library(datasets)</span></span>
<span id="cb205-10"><a href="rmarkdown-interaction.html#cb205-10" aria-hidden="true" tabindex="-1"></a><span class="in">data(faithful)</span></span>
<span id="cb205-11"><a href="rmarkdown-interaction.html#cb205-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb205-12"><a href="rmarkdown-interaction.html#cb205-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-13"><a href="rmarkdown-interaction.html#cb205-13" aria-hidden="true" tabindex="-1"></a>列 {.sidebar}</span>
<span id="cb205-14"><a href="rmarkdown-interaction.html#cb205-14" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------</span>
<span id="cb205-15"><a href="rmarkdown-interaction.html#cb205-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-16"><a href="rmarkdown-interaction.html#cb205-16" aria-hidden="true" tabindex="-1"></a>美国怀俄明州黄石国家公园的 Old Faithful  间歇泉在喷发和喷发之间的等待时间。</span>
<span id="cb205-17"><a href="rmarkdown-interaction.html#cb205-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-18"><a href="rmarkdown-interaction.html#cb205-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb205-19"><a href="rmarkdown-interaction.html#cb205-19" aria-hidden="true" tabindex="-1"></a><span class="in">selectInput(</span></span>
<span id="cb205-20"><a href="rmarkdown-interaction.html#cb205-20" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;n_breaks&quot;, label = &quot;条形数：&quot;,</span></span>
<span id="cb205-21"><a href="rmarkdown-interaction.html#cb205-21" aria-hidden="true" tabindex="-1"></a><span class="in">  choices = c(10, 20, 35, 50), selected = 20</span></span>
<span id="cb205-22"><a href="rmarkdown-interaction.html#cb205-22" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb205-23"><a href="rmarkdown-interaction.html#cb205-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-24"><a href="rmarkdown-interaction.html#cb205-24" aria-hidden="true" tabindex="-1"></a><span class="in">sliderInput(</span></span>
<span id="cb205-25"><a href="rmarkdown-interaction.html#cb205-25" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;bw_adjust&quot;, label = &quot;带宽调整：&quot;,</span></span>
<span id="cb205-26"><a href="rmarkdown-interaction.html#cb205-26" aria-hidden="true" tabindex="-1"></a><span class="in">  min = 0.2, max = 2, value = 1, step = 0.2</span></span>
<span id="cb205-27"><a href="rmarkdown-interaction.html#cb205-27" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb205-28"><a href="rmarkdown-interaction.html#cb205-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb205-29"><a href="rmarkdown-interaction.html#cb205-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-30"><a href="rmarkdown-interaction.html#cb205-30" aria-hidden="true" tabindex="-1"></a>列</span>
<span id="cb205-31"><a href="rmarkdown-interaction.html#cb205-31" aria-hidden="true" tabindex="-1"></a>--------------------------------------------------</span>
<span id="cb205-32"><a href="rmarkdown-interaction.html#cb205-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-33"><a href="rmarkdown-interaction.html#cb205-33" aria-hidden="true" tabindex="-1"></a><span class="fu">### 间歇泉喷发持续时间</span></span>
<span id="cb205-34"><a href="rmarkdown-interaction.html#cb205-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-35"><a href="rmarkdown-interaction.html#cb205-35" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb205-36"><a href="rmarkdown-interaction.html#cb205-36" aria-hidden="true" tabindex="-1"></a><span class="in">renderPlot({</span></span>
<span id="cb205-37"><a href="rmarkdown-interaction.html#cb205-37" aria-hidden="true" tabindex="-1"></a><span class="in">  erpt = faithful$eruptions</span></span>
<span id="cb205-38"><a href="rmarkdown-interaction.html#cb205-38" aria-hidden="true" tabindex="-1"></a><span class="in">  hist(</span></span>
<span id="cb205-39"><a href="rmarkdown-interaction.html#cb205-39" aria-hidden="true" tabindex="-1"></a><span class="in">    erpt, probability = TRUE, breaks = as.integer(input$n_breaks),</span></span>
<span id="cb205-40"><a href="rmarkdown-interaction.html#cb205-40" aria-hidden="true" tabindex="-1"></a><span class="in">    xlab = &quot;Duration (minutes)&quot;, main = &quot;Geyser Eruption Duration&quot;,</span></span>
<span id="cb205-41"><a href="rmarkdown-interaction.html#cb205-41" aria-hidden="true" tabindex="-1"></a><span class="in">    col = &#39;gray&#39;, border = &#39;white&#39;</span></span>
<span id="cb205-42"><a href="rmarkdown-interaction.html#cb205-42" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb205-43"><a href="rmarkdown-interaction.html#cb205-43" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb205-44"><a href="rmarkdown-interaction.html#cb205-44" aria-hidden="true" tabindex="-1"></a><span class="in">  dens = density(erpt, adjust = input$bw_adjust)</span></span>
<span id="cb205-45"><a href="rmarkdown-interaction.html#cb205-45" aria-hidden="true" tabindex="-1"></a><span class="in">  lines(dens, col = &quot;blue&quot;, lwd = 2)</span></span>
<span id="cb205-46"><a href="rmarkdown-interaction.html#cb205-46" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb205-47"><a href="rmarkdown-interaction.html#cb205-47" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:dashboard-shiny"></span>
<img src="images/dashboard-shiny.png" alt="基于 Shiny 的交互式仪表盘。"  />
<p class="caption">
图 5.17: 基于 Shiny 的交互式仪表盘。
</p>
</div>
<p>其中，仪表盘的第一列包含了 <code>{.sidebar}</code> 属性和两个 Shiny 的输入控件；第二列包含了绘制图表的 Shiny 代码。</p>
<blockquote>
<p><strong>注意</strong>：文档顶部标记为 <code>global</code> 的 R 代码块在全局环境中都可以被调用。这将为用户带来更好的启动性能，强烈推荐大家使用。</p>
</blockquote>
</div>
<div id="输入栏" class="section level4 hasAnchor" number="5.2.4.3">
<h4><span class="header-section-number">5.2.4.3</span> 输入栏<a href="rmarkdown-interaction.html#输入栏" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>通过添加 <code>{.sidebar}</code> 属性设置一个默认布局为左对齐，250 像素宽度的左侧边栏。</p>
<p>在搭建多个页面的仪表盘时，如果想创建一个应用于所有页面的工具条。这时，可以使用一级结构来定义侧边栏。</p>
</div>
<div id="拓展" class="section level4 hasAnchor" number="5.2.4.4">
<h4><span class="header-section-number">5.2.4.4</span> 拓展<a href="rmarkdown-interaction.html#拓展" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>下面给出一些学习 Shiny 和创建交互式文档的资源：</p>
<ol style="list-style-type: decimal">
<li><p>Shiny 官方网站( <a href="http://shiny.rstudio.com" class="uri">http://shiny.rstudio.com</a>) ：包含大量的文章、教程和示例。</p></li>
<li><p>Shiny 网站上的文章“<a href="http://shiny.rstudio.com/articles/interactive-docs.html">Introduction to Interactive Documents</a>”，这是一个很好的入门指南。</p></li>
<li><p>关于部署交互式文档，读者可以使用 Shiny Server 或 RStudio Connect：<a href="https://www.rstudio.com/products/shiny/shiny-server/" class="uri">https://www.rstudio.com/products/shiny/shiny-server/</a>。</p></li>
</ol>
</div>
</div>
</div>
<div id="package-rmd" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> 在 R package 中使用 R Markdown<a href="rmarkdown-interaction.html#package-rmd" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rmd-vignettes" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> 写软件包的文档<a href="rmarkdown-interaction.html#rmd-vignettes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>如果有开发R包的经验，或者项目中编写的自定义函数需要清晰的文档和严格的测试，那么可以考虑将项目制作成一个 R 包。如果不知道如何创建一个 R 包，则可以很容易地在 RStudio IDE 中通过点击菜单 <code>File -&gt; New Project</code> 开始，选择项目类型为 <code>R Package</code>。此外，第 <a href="rmarkdown-working.html#rmarkdown-package">4.2</a> 节还介绍了如何使用 R Markdown 开发 R 包，可以大大加速 R 包开发过程。</p>
<p>使用 R 包来管理项目有很多好处。例如，可以将数据集放在 <code>data/</code> 文件夹中，在 <code>R/</code> 下写 R 代码，生成文档到 <code>man/</code>（例如，使用 <strong>roxygen2</strong> 包<span class="citation">(<a href="#ref-R-roxygen2" role="doc-biblioref"><strong>R-roxygen2?</strong></a>)</span>），并将单元测试添加到 <code>test/</code> 中。当涉及到 R Markdown 报告时，可以将它们作为 <code>vignettes/</code> 下的软件包长文档来编写。在这些长文档中，可以加载数据集并调用包中的函数。当构建包时（通过 <code>R CMD build</code> 或 RStudio 命令），长文档将被自动编译。</p>
<p>要在 R Markdown 中创建一个包的长文档，最简单的方法是通过 RStudio 菜单 <code>File -&gt; New File -&gt; R Markdown -&gt; From Template</code>（见图<a href="rmarkdown-interaction.html#fig:package-vignette">5.18</a>）。然后从 <strong>rmarkdown</strong> 包中选择 <code>Package Vignette</code>，将得到一个长文档的模板。在更改模板的标题、作者和其他元数据之后，就可以开始编写报告的内容了。</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:package-vignette"></span>
<img src="images/package-vignette.png" alt="在 RStudio 中创建一个包的长文档。"  />
<p class="caption">
图 5.18: 在 RStudio 中创建一个包的长文档。
</p>
</div>
<p>或者，也可以安装包 <strong>usethis</strong> <span class="citation">(<a href="#ref-R-usethis" role="doc-biblioref"><strong>R-usethis?</strong></a>)</span> 并使用其中的函数 <code>usethis::use_vignette()</code> 来创建一个长文档框架。下面是软件包长文档的 YAML 前端内容通常情况下的样子：</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb206-1"><a href="rmarkdown-interaction.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb206-2"><a href="rmarkdown-interaction.html#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Vignette Title&quot;</span></span>
<span id="cb206-3"><a href="rmarkdown-interaction.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Vignette Author&quot;</span></span>
<span id="cb206-4"><a href="rmarkdown-interaction.html#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> rmarkdown::html_vignette</span></span>
<span id="cb206-5"><a href="rmarkdown-interaction.html#cb206-5" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span><span class="kw">: </span><span class="ch">&gt;</span></span>
<span id="cb206-6"><a href="rmarkdown-interaction.html#cb206-6" aria-hidden="true" tabindex="-1"></a>  %\VignetteIndexEntry{Vignette Title}</span>
<span id="cb206-7"><a href="rmarkdown-interaction.html#cb206-7" aria-hidden="true" tabindex="-1"></a>  %\VignetteEngine{knitr::rmarkdown}</span>
<span id="cb206-8"><a href="rmarkdown-interaction.html#cb206-8" aria-hidden="true" tabindex="-1"></a>  %\VignetteEncoding{UTF-8}</span>
<span id="cb206-9"><a href="rmarkdown-interaction.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code></pre></div>
<p>需要注意的是，需要在 <code>title</code> 字段和 <code>\VignetteIndexEntry{}</code> 命令中更改长文档的标题。除了长文档中的上述信息外，还需要在包的 <code>DESCRIPTION</code> 文件中做另外两件事：</p>
<ol style="list-style-type: decimal">
<li><p>在 <code>DESCRIPTION</code> 文件中指定 <code>VignetteBuilder: knitr</code>。</p></li>
<li><p>在 <code>DESCRIPTION</code> 文件中添加 <code>Suggests: knitr, rmarkdown</code>。</p></li>
</ol>
<p>长文档的输出格式不一定非得是 HTML，也可以是 PDF，所以也可以使用 <code>output: pdf_document</code>。创建除 HTML 和 PDF 之外的任何其他输出格式也可以，比如 <code>beamer_presentation</code> 和 <code>tufte::tufte_html</code>。然而，目前 R 只识别 HTML 和 PDF 格式的长文档。</p>
</div>
<div id="package-template" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> R 包中的 R Markdown 模板<a href="rmarkdown-interaction.html#package-template" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>第 <a href="rmarkdown-interaction.html#rmd-vignettes">5.3.1</a> 节的图 <a href="rmarkdown-interaction.html#fig:package-vignette">5.18</a> 给出了从 <strong>rmarkdown</strong> 包中检索可编辑的 Package Vignette（HTML）模板的过程。这个 R Markdown 文件预先填充了适用于 R 包长文档的元数据。</p>
<p>类似地，任何包都可以包含 R Markdown 模板，包的用户可以通过 RStudio IDE（如图 <a href="rmarkdown-interaction.html#fig:package-vignette">5.18</a> 所示）或使用 <code>rmarkdown::draft()</code> 函数访问这些模板。</p>
<div id="模板使用样例" class="section level4 hasAnchor" number="5.3.2.1">
<h4><span class="header-section-number">5.3.2.1</span> 模板使用样例<a href="rmarkdown-interaction.html#模板使用样例" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>模板是共享自定义结构、样式和内容的有效的方法，有很多优秀的例子都体现了这一特点。</p>
<p>许多模板通过预填充 YAML 元数据来添加结构和样式，例如 <strong>rmarkdown</strong> 包的 Package Vignette （HTML）模板。类似地，<strong>rmdformats</strong> 包<span class="citation">(<a href="#ref-R-rmdformats" role="doc-biblioref"><strong>R-rmdformats?</strong></a>)</span>提供了许多模板，这些模板将不同的自定义的样式函数传递给 <code>output</code> 选项。</p>
<p>其他模板演示了包所需的文档结构。例如，<strong>pagedown</strong> 包<span class="citation">(<a href="#ref-R-pagedown" role="doc-biblioref">Xie et al. 2022</a>)</span>包含了许多海报、简历和其他页面布局的模板。类似地，<strong>xaringan</strong> 包的 Ninja Presentation 模板<span class="citation">(<a href="#ref-R-xaringan" role="doc-biblioref">Xie 2022d</a>)</span>展示了许多不同幻灯片格式选项的语法。</p>
<p>模板也可以展示包的特性和语法。例如，<strong>flexdashboard</strong> 包<span class="citation">(<a href="#ref-R-flexdashboard" role="doc-biblioref">Iannone, Allaire, and Borges 2020</a>)</span>和 <strong>learnr</strong> 包<span class="citation">(<a href="#ref-R-learnr" role="doc-biblioref"><strong>R-learnr?</strong></a>)</span>都包含了带有代码块的模板，这些代码块分别调用包中的函数来创建示例仪表板或教程。</p>
<p>类似地，模板也可以包含样板内容。例如，<strong>rticles</strong> 包<span class="citation">(<a href="#ref-R-rticles" role="doc-biblioref">Allaire, Xie, Dervieux, et al. 2022</a>)</span>提供了许多这样的模板，以使 R Markdown 输出符合不同学术期刊所需的风格和内容指导。样板内容在组织设置中也很有用，比如生成季度报告的团队。</p>
</div>
<div id="模版设置" class="section level4 hasAnchor" number="5.3.2.2">
<h4><span class="header-section-number">5.3.2.2</span> 模版设置<a href="rmarkdown-interaction.html#模版设置" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><strong>usethis</strong> 包<span class="citation">(<a href="#ref-R-usethis" role="doc-biblioref"><strong>R-usethis?</strong></a>)</span>有一个创建模板的功能。运行 <code>usethis::use_rmarkdown_template("Template Name")</code> 将自动创建所需的目录结构和文件（模板名应自己提供）。</p>
<p>如果想手动设置模板，可以在 <code>inst/rmarkdown/templates</code> 目录下创建一个子目录。在这个目录中，需要保存至少两个文件：</p>
<ol style="list-style-type: decimal">
<li><p>一个名为 <code>template.yaml</code> 的文件，它为 RStudio IDE 提供了基本的元数据，比如模板的可读名称。这个文件至少应该有 <code>name</code> 和 <code>description</code> 字段，例如：</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb207-1"><a href="rmarkdown-interaction.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> 模板样例</span></span>
<span id="cb207-2"><a href="rmarkdown-interaction.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="fu">description</span><span class="kw">:</span><span class="at"> 这个模板做了什么</span></span></code></pre></div>
<p>如果想在模板被选用时创建一个新目录，可以包含 <code>create_dir: true</code>，如果模板依赖于额外的资源，这也是有用的。例如，<a href="https://github.com/rstudio/learnr/blob/master/inst/rmarkdown/templates/tutorial/template.yaml"><strong>learnr</strong> 包的模板</a> 设置了 <code>create_dir: true</code>，而 <a href="https://github.com/rstudio/flexdashboard/blob/master/inst/rmarkdown/templates/flex_dashboard/template.yaml"><strong>flexdashboard</strong> 包的模板</a>则使用默认的 <code>create_dir: false</code>。可以尝试在 RStudio 中打开这两个模板，以注意到不同的用户提示。</p></li>
<li><p>保存在 <code>skeleton/skeleton.Rmd</code> 下 R Markdown 文档。这可能包含希望放入 R Markdown 文档中的任何内容。</p></li>
</ol>
<p>可供选择的是，<code>skeleton</code> 文件夹可能还包括其他资源，如模板使用的样式表或图像。这些文件将与模板一起被加载到用户的计算机中。</p>
<p>建立自定义 R Markdown 模板的更多细节，请参阅 <a href="https://rstudio.github.io/rstudio-extensions/rmarkdown_templates.html">RStudio 扩展</a>的网站，以及 <em>R Markdown Definitive Guide</em> 的第十七章 <a href="https://bookdown.org/yihui/rmarkdown/document-templates.html">“Document Templates”</a><span class="citation">(<a href="#ref-rmarkdown2018" role="doc-biblioref">Xie, Allaire, and Grolemund 2018</a>)</span>。</p>
</div>
</div>
<div id="rmd-auto" class="section level3 hasAnchor" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> 定义一个自动化报告函数<a href="rmarkdown-interaction.html#rmd-auto" class="anchor-section" aria-label="Anchor link to header"></a></h3>

</div>
</div>
</div>
<h3>参考文献<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-rticles" class="csl-entry">
Allaire, JJ, Yihui Xie, Christophe Dervieux, R Foundation, Hadley Wickham, Journal of Statistical Software, Ramnath Vaidyanathan, et al. 2022. <em>Rticles: Article Formats for r Markdown</em>. <a href="https://github.com/rstudio/rticles">https://github.com/rstudio/rticles</a>.
</div>
<div id="ref-R-flexdashboard" class="csl-entry">
Iannone, Richard, JJ Allaire, and Barbara Borges. 2020. <em>Flexdashboard: R Markdown Format for Flexible Dashboards</em>. <a href="http://rmarkdown.rstudio.com/flexdashboard">http://rmarkdown.rstudio.com/flexdashboard</a>.
</div>
<div id="ref-R-xaringan" class="csl-entry">
———. 2022d. <em>Xaringan: Presentation Ninja</em>. <a href="https://github.com/yihui/xaringan">https://github.com/yihui/xaringan</a>.
</div>
<div id="ref-rmarkdown2018" class="csl-entry">
Xie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. <em>R Markdown: The Definitive Guide</em>. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown">https://bookdown.org/yihui/rmarkdown</a>.
</div>
<div id="ref-R-pagedown" class="csl-entry">
Xie, Yihui, Romain Lesur, Brent Thorne, and Xianying Tan. 2022. <em>Pagedown: Paginate the HTML Output of r Markdown with CSS for Print</em>. <a href="https://github.com/rstudio/pagedown">https://github.com/rstudio/pagedown</a>.
</div>
</div>
<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://rmarkdown-guide.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="rmarkdown-working.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rmarkdown-operation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/cosname/rmarkdown-guide/edit/master/05-interaction.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
